(this["webpackJsonpcloudreve-frontend-pro"]=this["webpackJsonpcloudreve-frontend-pro"]||[]).push([[6],{5806:function(e,a,t){"use strict";t.r(a);var n=t(10),r=t(0),l=t.n(r),c=t(87),i=t(5285),o=t(284),m=t(3),s=t(296),u=t(18),p=t(35),d=t(68),E=t(5169),b=t(5170),f=t(184),h=t(40),v=t(142),g=t(52),O=t(202),y=t.n(O),N=t(5498),C=t.n(N),j=t(5497),S=t.n(j),k=t(59),_=t(54),x=t(53),w=t(305),P=t(5775),D=t(5182),z=t(5776),W=t(5777),F=t(5778),I=t(5779),q=t(5780),R=t(5781),L=t(5243),T=t(5782),A=t(5274),B=t(5783),M=t(5784),U=t(5785),K=t(5786),H=t(5787),J=t(5181),G=t(5283),Q=t(7),X=t(5199),V=t(5176),Y=t(5177),$=t(20),Z=t(8),ee=t(5),ae=t(14);function te(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function ne(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?te(t,!0).forEach((function(a){Object(m.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):te(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var re=Object(Q.a)({root:{maxWidth:"100%",boxShadow:"none","&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"},"&$expanded":{margin:0}},expanded:{}})(X.a),le=Object(Q.a)({root:{minHeight:0,padding:0,"&$expanded":{minHeight:0}},content:{maxWidth:"100%",margin:0,display:"block","&$expanded":{margin:"0"}},expanded:{}})(V.a),ce=Object(Q.a)((function(e){return{root:{display:"block",padding:e.spacing(0)}}}))(Y.a),ie=Object(c.a)((function(e){return{root:{display:"flex",width:"100%"},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},hide:{display:"none"},drawer:{width:240,flexShrink:0,whiteSpace:"nowrap"},drawerOpen:{width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerClose:Object(m.a)({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:e.spacing(7)+1},e.breakpoints.up("sm"),{width:e.spacing(9)+1}),title:{flexGrow:1},toolbar:ne({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar),content:{flexGrow:1,padding:e.spacing(3)},sub:{paddingLeft:36,color:e.palette.text.secondary},subMenu:{backgroundColor:e.palette.background.default,paddingTop:0,paddingBottom:0},active:{backgroundColor:Object(u.e)(e.palette.primary.main,.8),color:e.palette.primary.main,"&:hover":{backgroundColor:Object(u.e)(e.palette.primary.main,.7)}},activeText:{fontWeight:500},activeIcon:{color:e.palette.primary.main}}})),oe=[{title:"\u9762\u677f\u9996\u9875",icon:l.a.createElement(P.a,null),path:"home"},{title:"\u53c2\u6570\u8bbe\u7f6e",icon:l.a.createElement(D.a,null),sub:[{title:"\u7ad9\u70b9\u4fe1\u606f",path:"basic",icon:l.a.createElement(z.a,null)},{title:"\u6ce8\u518c\u4e0e\u767b\u5f55",path:"access",icon:l.a.createElement(W.a,null)},{title:"\u90ae\u4ef6",path:"mail",icon:l.a.createElement(F.a,null)},{title:"\u4e0a\u4f20\u4e0e\u4e0b\u8f7d",path:"upload",icon:l.a.createElement(I.a,null)},{title:"\u589e\u503c\u670d\u52a1",path:"vas",icon:l.a.createElement(q.a,null)},{title:"\u5916\u89c2",path:"theme",icon:l.a.createElement(R.a,null)},{title:"\u79bb\u7ebf\u4e0b\u8f7d",path:"aria2",icon:l.a.createElement(L.a,null)},{title:"\u56fe\u50cf\u5904\u7406",path:"image",icon:l.a.createElement(T.a,null)}]},{title:"\u5b58\u50a8\u7b56\u7565",icon:l.a.createElement(A.a,null),path:"policy"},{title:"\u7528\u6237\u7ec4",icon:l.a.createElement(B.a,null),path:"group"},{title:"\u7528\u6237",icon:l.a.createElement(M.a,null),path:"user"},{title:"\u6587\u4ef6",icon:l.a.createElement(U.a,null),path:"file"},{title:"\u5206\u4eab",icon:l.a.createElement(K.a,null),path:"share"},{title:"\u8ba2\u5355",icon:l.a.createElement(H.a,null),path:"order"},{title:"\u6301\u4e45\u4efb\u52a1",icon:l.a.createElement(J.a,null),sub:[{title:"\u79bb\u7ebf\u4e0b\u8f7d",path:"download",icon:l.a.createElement(L.a,null)},{title:"\u5e38\u89c4\u4efb\u52a1",path:"task",icon:l.a.createElement(G.a,null)}]}];function me(e){var a,t,c=e.content,i=ie(),o=Object(p.a)(),u=Object(r.useState)(!ae.a.isMobile()),O=Object(n.a)(u,2),N=O[0],j=O[1],P=Object(r.useState)(null),D=Object(n.a)(P,2),z=D[0],W=D[1],F=Object($.g)(),I=Object($.h)(),q=Object(Z.c)(),R=Object(r.useCallback)((function(e){return q(Object(ee.e)(e))}),[q]);Object(r.useEffect)((function(){R("\u4eea\u8868\u76d8")}),[]),Object(r.useEffect)((function(){return function(){R()}}),[]);var L=Object($.j)().path;return l.a.createElement("div",{className:i.root},l.a.createElement(E.a,{position:"fixed",className:Object(s.a)(i.appBar,Object(m.a)({},i.appBarShift,N))},l.a.createElement(b.a,null,l.a.createElement(g.a,{color:"inherit","aria-label":"open drawer",onClick:function(){j(!0)},edge:"start",className:Object(s.a)(i.menuButton,Object(m.a)({},i.hide,N))},l.a.createElement(y.a,null)),l.a.createElement(h.a,{variant:"h6",className:i.title,noWrap:!0},"Cloudreve \u4eea\u8868\u76d8"),l.a.createElement(w.a,null))),l.a.createElement(d.a,{variant:"permanent",className:Object(s.a)(i.drawer,(a={},Object(m.a)(a,i.drawerOpen,N),Object(m.a)(a,i.drawerClose,!N),a)),classes:{paper:Object(s.a)((t={},Object(m.a)(t,i.drawerOpen,N),Object(m.a)(t,i.drawerClose,!N),t))}},l.a.createElement("div",{className:i.toolbar},l.a.createElement(g.a,{onClick:function(){j(!1)}},"rtl"===o.direction?l.a.createElement(S.a,null):l.a.createElement(C.a,null))),l.a.createElement(v.a,null),l.a.createElement(f.a,{className:i.noPadding},oe.map((function(e){return void 0!==e.path?l.a.createElement(k.a,{onClick:function(){return F.push("/admin/"+e.path)},button:!0,className:Object(s.a)(Object(m.a)({},i.active,I.pathname.startsWith("/admin/"+e.path))),key:e.title},l.a.createElement(_.a,{className:Object(s.a)(Object(m.a)({},i.activeIcon,I.pathname.startsWith("/admin/"+e.path)))},e.icon),l.a.createElement(x.a,{className:Object(s.a)(Object(m.a)({},i.activeText,I.pathname.startsWith("/admin/"+e.path))),primary:e.title})):l.a.createElement(re,{square:!0,expanded:z===e.title,onChange:function(a,t){W(t?e.title:null)}},l.a.createElement(le,{"aria-controls":"panel1d-content",id:"panel1d-header"},l.a.createElement(k.a,{button:!0,key:e.title},l.a.createElement(_.a,null,e.icon),l.a.createElement(x.a,{primary:e.title}))),l.a.createElement(ce,null,l.a.createElement(f.a,{className:i.subMenu},e.sub.map((function(e){var a;return l.a.createElement(k.a,{onClick:function(){return F.push("/admin/"+e.path)},className:Object(s.a)((a={},Object(m.a)(a,i.sub,N),Object(m.a)(a,i.active,I.pathname.startsWith("/admin/"+e.path)),a)),button:!0,key:e.title},l.a.createElement(_.a,{className:Object(s.a)(Object(m.a)({},i.activeIcon,I.pathname.startsWith("/admin/"+e.path)))},e.icon),l.a.createElement(x.a,{primary:e.title}))})))))})))),l.a.createElement("main",{className:i.content},l.a.createElement("div",{className:i.toolbar}),c(L)))}var se=t(17),ue=(t(135),t(5237)),pe=t(402),de=t.n(pe),Ee=t(5762),be=t(5254),fe=t(100),he=t(5763),ve=t(5676),ge=t.n(ve),Oe=t(9),ye=t(5244),Ne=t(215),Ce=t(5788),je=t(5789),Se=t(5790),ke=t(5791),_e=t(5792),xe=t(5793),we=t(5794),Pe=t(5795),De=t(183),ze=t(5278),We=t(99),Fe=t(182),Ie=t(134),qe=t.n(Ie),Re=t(80),Le=t(5294),Te=t(5192),Ae=t(5166),Be=t(5171),Me=t(5191),Ue=t(5193),Ke=t(387),He=Object(c.a)((function(e){return{paper:{padding:e.spacing(3),height:"100%"},logo:{width:70},logoContainer:{padding:e.spacing(3),display:"flex"},title:{marginLeft:16},cloudreve:{fontSize:25,color:e.palette.text.secondary},version:{color:e.palette.text.hint},links:{padding:e.spacing(3)},iconRight:{minWidth:0},userIcon:{backgroundColor:De.a[100],color:De.a[600]},fileIcon:{backgroundColor:ze.a[100],color:ze.a[800]},publicIcon:{backgroundColor:We.a[100],color:We.a[800]},secretIcon:{backgroundColor:Fe.a[100],color:Fe.a[800]}}}));function Je(){var e=He(),a=Object(r.useState)([]),t=Object(n.a)(a,2),c=t[0],i=t[1],o=Object(r.useState)([]),m=Object(n.a)(o,2),s=m[0],u=m[1],p=Object(r.useState)({}),d=Object(n.a)(p,2),E=d[0],b=d[1],g=l.a.useState(!1),O=Object(n.a)(g,2),y=O[0],N=O[1],C=l.a.useState(""),j=Object(n.a)(C,2),S=j[0],w=j[1],D=Object(r.useState)({fileTotal:0,userTotal:0,publicShareTotal:0,secretShareTotal:0}),z=Object(n.a)(D,2),W=z[0],F=z[1],I=Object(r.useState)({backend:"-"}),q=Object(n.a)(I,2),R=q[0],L=q[1],T=Object(Z.c)(),A=Object(r.useCallback)((function(e,a,t,n){return T(Object(ee.P)(e,a,t,n))}),[T]);return Object(r.useEffect)((function(){Oe.b.get("/admin/summary").then((function(e){var a=[];e.data.date.forEach((function(t,n){a.push({name:t,file:e.data.files[n],user:e.data.users[n],share:e.data.shares[n]})})),i(a),F({fileTotal:e.data.fileTotal,userTotal:e.data.userTotal,publicShareTotal:e.data.publicShareTotal,secretShareTotal:e.data.secretShareTotal}),L(e.data.version),w(e.data.siteURL),""!==e.data.siteURL&&e.data.siteURL===window.location.origin||N(!0)})).catch((function(e){A("top","right",e.message,"error")})),qe.a.get("/api/v3/admin/news").then((function(e){u(e.data.data);var a={};e.data.included.forEach((function(e){"users"===e.type&&(a[e.id]=e.attributes)})),b(a)})).catch((function(e){A("top","right",e.message,"error")}))}),[]),l.a.createElement(be.a,{container:!0,spacing:3},l.a.createElement(Ae.a,{open:y,onClose:function(){return N(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},l.a.createElement(Te.a,{id:"alert-dialog-title"},"\u786e\u5b9a\u7ad9\u70b9URL\u8bbe\u7f6e"),l.a.createElement(Be.a,null,l.a.createElement(Me.a,{id:"alert-dialog-description"},l.a.createElement(h.a,null,""===S&&"\u60a8\u5c1a\u672a\u8bbe\u5b9a\u7ad9\u70b9URL\uff0c\u662f\u5426\u8981\u5c06\u5176\u8bbe\u5b9a\u4e3a\u5f53\u524d\u7684 "+window.location.origin+" ?",""!==S&&"\u60a8\u8bbe\u7f6e\u7684\u7ad9\u70b9URL\u4e0e\u5f53\u524d\u5b9e\u9645\u4e0d\u4e00\u81f4\uff0c\u662f\u5426\u8981\u5c06\u5176\u8bbe\u5b9a\u4e3a\u5f53\u524d\u7684 "+window.location.origin+" ?"),l.a.createElement(h.a,null,"\u6b64\u8bbe\u7f6e\u975e\u5e38\u91cd\u8981\uff0c\u8bf7\u786e\u4fdd\u5176\u4e0e\u60a8\u7ad9\u70b9\u7684\u5b9e\u9645\u5730\u5740\u4e00\u81f4\u3002\u4f60\u53ef\u4ee5\u5728 \u53c2\u6570\u8bbe\u7f6e - \u7ad9\u70b9\u4fe1\u606f \u4e2d\u66f4\u6539\u6b64\u8bbe\u7f6e\u3002"))),l.a.createElement(Ue.a,null,l.a.createElement(Ke.a,{onClick:function(){return N(!1)},color:"default"},"\u5ffd\u7565"),l.a.createElement(Ke.a,{onClick:function(){return N(!1),void Oe.b.patch("/admin/setting",{options:[{key:"siteURL",value:window.location.origin}]}).then((function(e){w(window.location.origin),A("top","right","\u8bbe\u7f6e\u5df2\u66f4\u6539","success")})).catch((function(e){A("top","right",e.message,"error")}))},color:"primary"},"\u66f4\u6539"))),l.a.createElement(be.a,{alignContent:"stretch",item:!0,xs:12,md:8,lg:9},l.a.createElement(fe.a,{className:e.paper},l.a.createElement(h.a,{variant:"button",display:"block",gutterBottom:!0},"\u8d8b\u52bf"),l.a.createElement(ge.a,{width:"100%",aspect:ae.a.isMobile()?4/3:3},l.a.createElement(he.d,{width:1200,height:300,data:c},l.a.createElement(he.a,{strokeDasharray:"3 3"}),l.a.createElement(he.f,{dataKey:"name"}),l.a.createElement(he.g,null),l.a.createElement(he.e,null),l.a.createElement(he.b,null),l.a.createElement(he.c,{name:"\u6587\u4ef6",type:"monotone",dataKey:"file",stroke:"#3f51b5"}),l.a.createElement(he.c,{name:"\u7528\u6237",type:"monotone",dataKey:"user",stroke:"#82ca9d"}),l.a.createElement(he.c,{name:"\u5206\u4eab",type:"monotone",dataKey:"share",stroke:"#e91e63"}))))),l.a.createElement(be.a,{item:!0,xs:12,md:4,lg:3},l.a.createElement(fe.a,{className:e.paper},l.a.createElement(h.a,{variant:"button",display:"block",gutterBottom:!0},"\u603b\u8ba1"),l.a.createElement(v.a,null),l.a.createElement(f.a,{className:e.root},l.a.createElement(k.a,null,l.a.createElement(ye.a,null,l.a.createElement(Ne.a,{className:e.userIcon},l.a.createElement(Ce.a,null))),l.a.createElement(x.a,{primary:W.userTotal,secondary:"\u6ce8\u518c\u7528\u6237"})),l.a.createElement(k.a,null,l.a.createElement(ye.a,null,l.a.createElement(Ne.a,{className:e.fileIcon},l.a.createElement(je.a,null))),l.a.createElement(x.a,{primary:W.fileTotal,secondary:"\u6587\u4ef6\u603b\u6570"})),l.a.createElement(k.a,null,l.a.createElement(ye.a,null,l.a.createElement(Ne.a,{className:e.publicIcon},l.a.createElement(Se.a,null))),l.a.createElement(x.a,{primary:W.publicShareTotal,secondary:"\u516c\u5f00\u5206\u4eab\u603b\u6570"})),l.a.createElement(k.a,null,l.a.createElement(ye.a,null,l.a.createElement(Ne.a,{className:e.secretIcon},l.a.createElement(ke.a,null))),l.a.createElement(x.a,{primary:W.secretShareTotal,secondary:"\u79c1\u5bc6\u5206\u4eab\u603b\u6570"}))))),l.a.createElement(be.a,{item:!0,xs:12,md:4,lg:3},l.a.createElement(fe.a,null,l.a.createElement("div",{className:e.logoContainer},l.a.createElement("img",{className:e.logo,src:"/static/img/cloudreve.svg"}),l.a.createElement("div",{className:e.title},l.a.createElement(h.a,{className:e.cloudreve},"Cloudreve"),l.a.createElement(h.a,{className:e.version},R.backend," ","true"===R.is_pro&&l.a.createElement(Le.a,{size:"small",label:"Pro"})))),l.a.createElement(v.a,null),l.a.createElement("div",null,l.a.createElement(f.a,{component:"nav","aria-label":"main mailbox folders"},l.a.createElement(k.a,{button:!0,onClick:function(){return window.open("https://cloudreve.org")}},l.a.createElement(_.a,null,l.a.createElement(P.a,null)),l.a.createElement(x.a,{primary:"\u4e3b\u9875"}),l.a.createElement(_.a,{className:e.iconRight},l.a.createElement(_e.a,null))),l.a.createElement(k.a,{button:!0,onClick:function(){return window.open("https://github.com/cloudreve/cloudreve")}},l.a.createElement(_.a,null,l.a.createElement(xe.a,null)),l.a.createElement(x.a,{primary:"GitHub"}),l.a.createElement(_.a,{className:e.iconRight},l.a.createElement(_e.a,null))),l.a.createElement(k.a,{button:!0,onClick:function(){return window.open("https://forum.cloudreve.org")}},l.a.createElement(_.a,null,l.a.createElement(we.a,null)),l.a.createElement(x.a,{primary:"\u8ba8\u8bba\u793e\u533a"}),l.a.createElement(_.a,{className:e.iconRight},l.a.createElement(_e.a,null))),l.a.createElement(k.a,{button:!0,onClick:function(){return window.open("https://t.me/cloudreve_official")}},l.a.createElement(_.a,null,l.a.createElement(Pe.a,null)),l.a.createElement(x.a,{primary:"Telegram \u7fa4\u7ec4"}),l.a.createElement(_.a,{className:e.iconRight},l.a.createElement(_e.a,null))))))),l.a.createElement(be.a,{item:!0,xs:12,md:8,lg:9},l.a.createElement(fe.a,{className:e.paper},l.a.createElement(f.a,null,s&&s.map((function(a,t){return l.a.createElement(l.a.Fragment,null,l.a.createElement(k.a,{button:!0,alignItems:"flex-start",onClick:function(){return window.open("https://forum.cloudreve.org/d/"+a.id)}},l.a.createElement(ye.a,null,l.a.createElement(Ne.a,{alt:"Travis Howard",src:E[a.relationships.startUser.data.id]&&E[a.relationships.startUser.data.id].avatarUrl})),l.a.createElement(x.a,{primary:a.attributes.title,secondary:l.a.createElement(l.a.Fragment,null,l.a.createElement(h.a,{component:"span",variant:"body2",className:e.inline,color:"textPrimary"},E[a.relationships.startUser.data.id]&&E[a.relationships.startUser.data.id].username," "),"\u53d1\u8868\u4e8e"," ",l.a.createElement(Re.a,{datetime:a.attributes.startTime,locale:"zh_CN"}))})),l.a.createElement(v.a,null))}))))))}var Ge=t(5187),Qe=t(5186),Xe=t(5189),Ve=t(5195),Ye=t(5198),$e=t(185);function Ze(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}var ea=Object(c.a)((function(e){var a;return{root:(a={},Object(m.a)(a,e.breakpoints.up("md"),{marginLeft:100}),Object(m.a)(a,"marginBottom",40),a),form:{maxWidth:400,marginTop:20,marginBottom:20},formContainer:Object(m.a)({},e.breakpoints.up("md"),{padding:"0px 24px 0 24px"})}}));function aa(){var e=ea(),a=Object(r.useState)(!1),t=Object(n.a)(a,2),c=t[0],i=t[1],o=Object(r.useState)({siteURL:"",siteName:"",siteTitle:"",pwa_small_icon:"",pwa_medium_icon:"",pwa_large_icon:"",pwa_display:"",pwa_theme_color:"",pwa_background_color:""}),s=Object(n.a)(o,2),u=s[0],p=s[1],d=function(e){return function(a){p(function(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?Ze(t,!0).forEach((function(a){Object(m.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ze(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}({},u,Object(m.a)({},e,a.target.value)))}},E=Object(Z.c)(),b=Object(r.useCallback)((function(e,a,t,n){return E(Object(ee.P)(e,a,t,n))}),[E]);Object(r.useEffect)((function(){Oe.b.post("/admin/setting",{keys:Object.keys(u)}).then((function(e){p(e.data)})).catch((function(e){b("top","right",e.message,"error")}))}),[]);return l.a.createElement("div",null,l.a.createElement("form",{onSubmit:function(e){e.preventDefault(),i(!0);var a=[];Object.keys(u).forEach((function(e){a.push({key:e,value:u[e]})})),Oe.b.patch("/admin/setting",{options:a}).then((function(e){b("top","right","\u8bbe\u7f6e\u5df2\u66f4\u6539","success")})).catch((function(e){b("top","right",e.message,"error")})).then((function(){i(!1)}))}},l.a.createElement("div",{className:e.root},l.a.createElement(h.a,{variant:"h6",gutterBottom:!0},"\u57fa\u672c\u4fe1\u606f"),l.a.createElement("div",{className:e.formContainer},l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u4e3b\u6807\u9898"),l.a.createElement(Xe.a,{value:u.siteName,onChange:d("siteName"),required:!0}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u7ad9\u70b9\u7684\u4e3b\u6807\u9898"))),l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u526f\u6807\u9898"),l.a.createElement(Xe.a,{value:u.siteTitle,onChange:d("siteTitle")}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u7ad9\u70b9\u7684\u526f\u6807\u9898"))),l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u7ad9\u70b9URL"),l.a.createElement(Xe.a,{type:"url",value:u.siteURL,onChange:d("siteURL"),required:!0}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u975e\u5e38\u91cd\u8981\uff0c\u8bf7\u786e\u4fdd\u4e0e\u5b9e\u9645\u60c5\u51b5\u4e00\u81f4\u3002\u4f7f\u7528\u4e91\u5b58\u50a8\u7b56\u7565\u3001\u652f\u4ed8\u5e73\u53f0\u65f6\uff0c\u8bf7\u586b\u5165\u53ef\u4ee5\u88ab\u5916\u7f51\u8bbf\u95ee\u7684\u5730\u5740\u3002"))))),l.a.createElement("div",{className:e.root},l.a.createElement(h.a,{variant:"h6",gutterBottom:!0},"\u6e10\u8fdb\u5f0f\u5e94\u7528 (PWA)"),l.a.createElement("div",{className:e.formContainer},l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u5c0f\u56fe\u6807"),l.a.createElement(Xe.a,{value:u.pwa_small_icon,onChange:d("pwa_small_icon")}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u6269\u5c55\u540d\u4e3a ico \u7684\u5c0f\u56fe\u6807\u5730\u5740"))),l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u4e2d\u56fe\u6807"),l.a.createElement(Xe.a,{value:u.pwa_medium_icon,onChange:d("pwa_medium_icon")}),l.a.createElement(Ve.a,{id:"component-helper-text"},"192x192 \u7684\u4e2d\u7b49\u56fe\u6807\u5730\u5740\uff0cpng \u683c\u5f0f"))),l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u5927\u56fe\u6807"),l.a.createElement(Xe.a,{value:u.pwa_large_icon,onChange:d("pwa_large_icon")}),l.a.createElement(Ve.a,{id:"component-helper-text"},"512x512 \u7684\u5927\u56fe\u6807\u5730\u5740\uff0cpng \u683c\u5f0f"))),l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,null,l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u5c55\u793a\u6a21\u5f0f"),l.a.createElement(Ye.a,{value:u.pwa_display,onChange:d("pwa_display")},l.a.createElement($e.a,{value:"fullscreen"},"fullscreen"),l.a.createElement($e.a,{value:"standalone"},"standalone"),l.a.createElement($e.a,{value:"minimal-ui"},"minimal-ui"),l.a.createElement($e.a,{value:"browser"},"browser")),l.a.createElement(Ve.a,{id:"component-helper-text"},"PWA \u5e94\u7528\u6dfb\u52a0\u540e\u7684\u5c55\u793a\u6a21\u5f0f"))),l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u4e3b\u9898\u8272"),l.a.createElement(Xe.a,{value:u.pwa_theme_color,onChange:d("pwa_theme_color")}),l.a.createElement(Ve.a,{id:"component-helper-text"},"CSS \u8272\u503c\uff0c\u5f71\u54cd PWA \u542f\u52a8\u753b\u9762\u4e0a\u72b6\u6001\u680f\u3001\u5185\u5bb9\u9875\u4e2d\u72b6\u6001\u680f\u3001\u5730\u5740\u680f\u7684\u989c\u8272")))),l.a.createElement("div",{className:e.formContainer},l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u80cc\u666f\u8272"),l.a.createElement(Xe.a,{value:u.pwa_background_color,onChange:d("pwa_background_color")}),l.a.createElement(Ve.a,{id:"component-helper-text"},"CSS \u8272\u503c"))))),l.a.createElement("div",{className:e.root},l.a.createElement(Ke.a,{disabled:c,type:"submit",variant:"contained",color:"primary"},"\u4fdd\u5b58"))))}var ta=t(34),na=t(5281),ra=t(5265);function la(e){var a=e.title,t=e.msg,n=e.open,r=e.onClose;return l.a.createElement(Ae.a,{open:n,onClose:r,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},l.a.createElement(Te.a,{id:"alert-dialog-title"},a),l.a.createElement(Be.a,null,l.a.createElement(Me.a,{id:"alert-dialog-description"},l.a.createElement(h.a,null,t))),l.a.createElement(Ue.a,null,l.a.createElement(Ke.a,{onClick:r,color:"primary"},"\u77e5\u9053\u4e86")))}var ca=t(5288);function ia(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function oa(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?ia(t,!0).forEach((function(a){Object(m.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ia(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var ma=Object(c.a)((function(e){var a;return{root:(a={},Object(m.a)(a,e.breakpoints.up("md"),{marginLeft:100}),Object(m.a)(a,"marginBottom",40),a),form:{maxWidth:400,marginTop:20,marginBottom:20},formContainer:Object(m.a)({},e.breakpoints.up("md"),{padding:"0px 24px 0 24px"})}}));function sa(){var e=ma(),a=Object(r.useState)(!1),t=Object(n.a)(a,2),c=t[0],i=t[1],o=Object(r.useState)({register_enabled:"1",default_group:"1",email_active:"0",login_captcha:"0",reg_captcha:"0",forget_captcha:"0",qq_login:"0",qq_direct_login:"0",qq_login_id:"",qq_login_key:"",authn_enabled:"0",captcha_IsUseReCaptcha:"0",captcha_ReCaptchaKey:"defaultKey",captcha_ReCaptchaSecret:"defaultSecret"}),s=Object(n.a)(o,2),u=s[0],p=s[1],d=Object(r.useState)(""),E=Object(n.a)(d,2),b=E[0],f=E[1],v=Object(r.useState)([]),g=Object(n.a)(v,2),O=g[0],y=g[1],N=Object(r.useState)(!1),C=Object(n.a)(N,2),j=C[0],S=C[1],k=function(e){return function(a){var t=a.target.value;void 0!==a.target.checked&&(t=a.target.checked?"1":"0"),p(oa({},u,Object(m.a)({},e,t)))}},_=function(e){return function(a){var t=a.target.value;p(oa({},u,Object(m.a)({},e,t)))}},x=Object(Z.c)(),w=Object(r.useCallback)((function(e,a,t,n){return x(Object(ee.P)(e,a,t,n))}),[x]);Object(r.useEffect)((function(){Oe.b.post("/admin/setting",{keys:[].concat(Object(ta.a)(Object.keys(u)),["siteURL"])}).then((function(e){f(e.data.siteURL),delete e.data.siteURL,p(e.data)})).catch((function(e){w("top","right",e.message,"error")})),Oe.b.get("/admin/groups").then((function(e){y(e.data)})).catch((function(e){w("top","right",e.message,"error")}))}),[]);return l.a.createElement("div",null,l.a.createElement(la,{title:"\u63d0\u793a",msg:"Web Authn \u9700\u8981\u60a8\u7684\u7ad9\u70b9\u542f\u7528 HTTPS\uff0c\u5e76\u786e\u8ba4 \u53c2\u6570\u8bbe\u7f6e - \u7ad9\u70b9\u4fe1\u606f - \u7ad9\u70b9URL \u4e5f\u4f7f\u7528\u4e86 HTTPS \u540e\u624d\u80fd\u5f00\u542f\u3002",onClose:function(){return S(!1)},open:j}),l.a.createElement("form",{onSubmit:function(e){e.preventDefault(),i(!0);var a=[];Object.keys(u).forEach((function(e){a.push({key:e,value:u[e]})})),Oe.b.patch("/admin/setting",{options:a}).then((function(e){w("top","right","\u8bbe\u7f6e\u5df2\u66f4\u6539","success")})).catch((function(e){w("top","right",e.message,"error")})).then((function(){i(!1)}))}},l.a.createElement("div",{className:e.root},l.a.createElement(h.a,{variant:"h6",gutterBottom:!0},"\u6ce8\u518c\u4e0e\u767b\u5f55"),l.a.createElement("div",{className:e.formContainer},l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(ra.a,{control:l.a.createElement(na.a,{checked:"1"===u.register_enabled,onChange:k("register_enabled")}),label:"\u5141\u8bb8\u65b0\u7528\u6237\u6ce8\u518c"}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u5173\u95ed\u540e\uff0c\u65e0\u6cd5\u518d\u901a\u8fc7\u524d\u53f0\u6ce8\u518c\u65b0\u7684\u7528\u6237"))),l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(ra.a,{control:l.a.createElement(na.a,{checked:"1"===u.email_active,onChange:k("email_active")}),label:"\u90ae\u4ef6\u6fc0\u6d3b"}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u5f00\u542f\u540e\uff0c\u65b0\u7528\u6237\u6ce8\u518c\u9700\u8981\u70b9\u51fb\u90ae\u4ef6\u4e2d\u7684\u6fc0\u6d3b\u94fe\u63a5\u624d\u80fd\u5b8c\u6210\u3002\u8bf7\u786e\u8ba4\u90ae\u4ef6\u53d1\u9001\u8bbe\u7f6e\u662f\u5426\u6b63\u786e\uff0c\u5426\u5219\u6fc0\u6d3b\u90ae\u4ef6\u65e0\u6cd5\u9001\u8fbe"))),l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(ra.a,{control:l.a.createElement(na.a,{checked:"1"===u.reg_captcha,onChange:k("reg_captcha")}),label:"\u6ce8\u518c\u9a8c\u8bc1\u7801"}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u662f\u5426\u542f\u7528\u6ce8\u518c\u8868\u5355\u9a8c\u8bc1\u7801"))),l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(ra.a,{control:l.a.createElement(na.a,{checked:"1"===u.login_captcha,onChange:k("login_captcha")}),label:"\u767b\u5f55\u9a8c\u8bc1\u7801"}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u662f\u5426\u542f\u7528\u767b\u5f55\u8868\u5355\u9a8c\u8bc1\u7801"))),l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(ra.a,{control:l.a.createElement(na.a,{checked:"1"===u.forget_captcha,onChange:k("forget_captcha")}),label:"\u627e\u56de\u5bc6\u7801\u9a8c\u8bc1\u7801"}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u662f\u5426\u542f\u7528\u627e\u56de\u5bc6\u7801\u8868\u5355\u9a8c\u8bc1\u7801"))),l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(ra.a,{control:l.a.createElement(na.a,{checked:"1"===u.captcha_IsUseReCaptcha,onChange:k("captcha_IsUseReCaptcha")}),label:"\u4f7f\u7528ReCaptcha\u9a8c\u8bc1\u7801"}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u662f\u5426\u4f7f\u7528ReCaptcha\u9a8c\u8bc1\u7801"))),"1"===u.captcha_IsUseReCaptcha&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"Site KEY"),l.a.createElement(Xe.a,{required:!0,value:u.captcha_ReCaptchaKey,onChange:_("captcha_ReCaptchaKey")}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u5e94\u7528\u7ba1\u7406\u9875\u9762\u83b7\u53d6\u5230\u7684\u7684 \u7f51\u7ad9\u5bc6\u94a5"))),l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"Secret"),l.a.createElement(Xe.a,{required:!0,value:u.captcha_ReCaptchaSecret,onChange:_("captcha_ReCaptchaSecret")}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u5e94\u7528\u7ba1\u7406\u9875\u9762\u83b7\u53d6\u5230\u7684\u7684 \u79d8\u94a5")))),l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(ra.a,{control:l.a.createElement(na.a,{checked:"1"===u.authn_enabled,onChange:function(e){b.startsWith("https://")?k("authn_enabled")(e):S(!0)}}),label:"Web Authn"}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u662f\u5426\u5141\u8bb8\u7528\u6237\u4f7f\u7528\u7ed1\u5b9a\u7684\u5916\u90e8\u9a8c\u8bc1\u5668\u767b\u5f55\uff0c\u7ad9\u70b9\u5fc5\u987b\u542f\u52a8 HTTPS \u624d\u80fd\u4f7f\u7528\u3002"))),l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,null,l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u9ed8\u8ba4\u7528\u6237\u7ec4"),l.a.createElement(Ye.a,{value:u.default_group,onChange:_("default_group"),required:!0},O.map((function(e){return 3===e.ID?null:l.a.createElement($e.a,{key:e.ID,value:e.ID.toString()},e.Name)}))),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u7528\u6237\u6ce8\u518c\u540e\u7684\u521d\u59cb\u7528\u6237\u7ec4"))))),l.a.createElement("div",{className:e.root},l.a.createElement(h.a,{variant:"h6",gutterBottom:!0},"QQ\u4e92\u8054"),l.a.createElement("div",{className:e.formContainer},l.a.createElement("div",{className:e.form},l.a.createElement(ca.a,{severity:"info"},"\u521b\u5efa\u5e94\u7528\u65f6\uff0c\u56de\u8c03\u5730\u5740\u8bf7\u586b\u5199\uff1a",b.endsWith("/")?b+"#/login/qq":b+"/#/login/qq")),l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(ra.a,{control:l.a.createElement(na.a,{checked:"1"===u.qq_login,onChange:k("qq_login")}),label:"\u5f00\u542fQQ\u4e92\u8054"}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u662f\u5426\u5141\u8bb8\u7ed1\u5b9aQQ\u3001\u4f7f\u7528QQ\u767b\u5f55\u672c\u7ad9"))),"1"===u.qq_login&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(ra.a,{control:l.a.createElement(na.a,{checked:"1"===u.qq_direct_login,onChange:k("qq_direct_login")}),label:"\u672a\u7ed1\u5b9a\u65f6\u53ef\u76f4\u63a5\u767b\u5f55"}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u5f00\u542f\u540e\uff0c\u5982\u679c\u7528\u6237\u4f7f\u7528\u4e86QQ\u767b\u5f55\uff0c\u4f46\u662f\u6ca1\u6709\u5df2\u7ed1\u5b9a\u7684\u6ce8\u518c\u7528\u6237\uff0c\u7cfb\u7edf\u4f1a\u4e3a\u5176\u521b\u5efa\u7528\u6237\u5e76\u767b\u5f55\u3002\u8fd9\u79cd\u65b9\u5f0f\u521b\u5efa\u7684\u7528\u6237\u65e5\u540e\u53ea\u80fd\u4f7f\u7528QQ\u767b\u5f55\u3002"))),l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"APP ID"),l.a.createElement(Xe.a,{required:!0,value:u.qq_login_id,onChange:_("qq_login_id")}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u5e94\u7528\u7ba1\u7406\u9875\u9762\u83b7\u53d6\u5230\u7684\u7684 APP ID"))),l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"APP KEY"),l.a.createElement(Xe.a,{required:!0,value:u.qq_login_key,onChange:_("qq_login_key")}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u5e94\u7528\u7ba1\u7406\u9875\u9762\u83b7\u53d6\u5230\u7684\u7684 APP KEY")))))),l.a.createElement("div",{className:e.root},l.a.createElement(Ke.a,{disabled:c,type:"submit",variant:"contained",color:"primary"},"\u4fdd\u5b58"))))}var ua=t(5261);function pa(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}var da=Object(c.a)((function(e){var a;return{root:(a={},Object(m.a)(a,e.breakpoints.up("md"),{marginLeft:100}),Object(m.a)(a,"marginBottom",40),a),form:{maxWidth:400,marginTop:20,marginBottom:20},formContainer:Object(m.a)({},e.breakpoints.up("md"),{padding:"0px 24px 0 24px"}),buttonMargin:{marginLeft:8}}}));function Ea(){var e=da(),a=Object(r.useState)(!1),t=Object(n.a)(a,2),c=t[0],i=t[1],o=Object(r.useState)(!1),s=Object(n.a)(o,2),u=s[0],p=s[1],d=Object(r.useState)(""),E=Object(n.a)(d,2),b=E[0],f=E[1],v=Object(r.useState)({fromName:"",fromAdress:"",smtpHost:"",smtpPort:"",replyTo:"",smtpUser:"",smtpPass:"",mail_keepalive:"30",over_used_template:"",mail_activation_template:"",mail_reset_pwd_template:""}),g=Object(n.a)(v,2),O=g[0],y=g[1],N=function(e){return function(a){y(function(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?pa(t,!0).forEach((function(a){Object(m.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):pa(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}({},O,Object(m.a)({},e,a.target.value)))}},C=Object(Z.c)(),j=Object(r.useCallback)((function(e,a,t,n){return C(Object(ee.P)(e,a,t,n))}),[C]);Object(r.useEffect)((function(){Oe.b.post("/admin/setting",{keys:Object.keys(O)}).then((function(e){y(e.data)})).catch((function(e){j("top","right",e.message,"error")}))}),[]);return l.a.createElement("div",null,l.a.createElement(Ae.a,{open:u,onClose:function(){return p(!1)},"aria-labelledby":"form-dialog-title"},l.a.createElement(Te.a,{id:"form-dialog-title"},"\u53d1\u4ef6\u6d4b\u8bd5"),l.a.createElement(Be.a,null,l.a.createElement(Me.a,null,l.a.createElement(h.a,null,"\u53d1\u9001\u6d4b\u8bd5\u90ae\u4ef6\u524d\uff0c\u8bf7\u5148\u4fdd\u5b58\u5df2\u66f4\u6539\u7684\u90ae\u4ef6\u8bbe\u7f6e\uff1b"),l.a.createElement(h.a,null,"\u90ae\u4ef6\u53d1\u9001\u7ed3\u679c\u4e0d\u4f1a\u7acb\u5373\u53cd\u9988\uff0c\u5982\u679c\u60a8\u957f\u65f6\u95f4\u672a\u6536\u5230\u6d4b\u8bd5\u90ae\u4ef6\uff0c\u8bf7\u68c0\u67e5 Cloudreve \u5728\u7ec8\u7aef\u8f93\u51fa\u7684\u9519\u8bef\u65e5\u5fd7\u3002")),l.a.createElement(ua.a,{autoFocus:!0,margin:"dense",id:"name",label:"\u6536\u4ef6\u4eba\u5730\u5740",value:b,onChange:function(e){return f(e.target.value)},type:"email",fullWidth:!0})),l.a.createElement(Ue.a,null,l.a.createElement(Ke.a,{onClick:function(){return p(!1)},color:"default"},"\u53d6\u6d88"),l.a.createElement(Ke.a,{onClick:function(){return i(!0),void Oe.b.post("/admin/mailTest",{to:b}).then((function(e){j("top","right","\u6d4b\u8bd5\u90ae\u4ef6\u5df2\u53d1\u9001","success")})).catch((function(e){j("top","right",e.message,"error")})).then((function(){i(!1)}))},disabled:c,color:"primary"},"\u53d1\u9001"))),l.a.createElement("form",{onSubmit:function(e){e.preventDefault(),i(!0);var a=[];Object.keys(O).forEach((function(e){a.push({key:e,value:O[e]})})),Oe.b.patch("/admin/setting",{options:a}).then((function(e){j("top","right","\u8bbe\u7f6e\u5df2\u66f4\u6539","success"),Oe.b.get("/admin/reload/email").then((function(e){})).catch((function(e){j("top","right",e.message,"error")})).then((function(){}))})).catch((function(e){j("top","right",e.message,"error")})).then((function(){i(!1)}))}},l.a.createElement("div",{className:e.root},l.a.createElement(h.a,{variant:"h6",gutterBottom:!0},"\u53d1\u4fe1"),l.a.createElement("div",{className:e.formContainer},l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u53d1\u4ef6\u4eba\u540d"),l.a.createElement(Xe.a,{value:O.fromName,onChange:N("fromName"),required:!0}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u90ae\u4ef6\u4e2d\u5c55\u793a\u7684\u53d1\u4ef6\u4eba\u59d3\u540d"))),l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u53d1\u4ef6\u4eba\u90ae\u7bb1"),l.a.createElement(Xe.a,{type:"email",required:!0,value:O.fromAdress,onChange:N("fromAdress")}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u53d1\u4ef6\u90ae\u7bb1\u7684\u5730\u5740"))),l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"SMTP \u670d\u52a1\u5668"),l.a.createElement(Xe.a,{value:O.smtpHost,onChange:N("smtpHost"),required:!0}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u53d1\u4ef6\u670d\u52a1\u5668\u5730\u5740\uff0c\u4e0d\u542b\u7aef\u53e3\u53f7"))),l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"SMTP \u7aef\u53e3"),l.a.createElement(Xe.a,{inputProps:{min:1,step:1},type:"number",value:O.smtpPort,onChange:N("smtpPort"),required:!0}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u53d1\u4ef6\u670d\u52a1\u5668\u5730\u5740\u7aef\u53e3\u53f7"))),l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"SMTP \u7528\u6237\u540d"),l.a.createElement(Xe.a,{value:O.smtpUser,onChange:N("smtpUser"),required:!0}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u53d1\u4fe1\u90ae\u7bb1\u7528\u6237\u540d\uff0c\u4e00\u822c\u4e0e\u90ae\u7bb1\u5730\u5740\u76f8\u540c"))),l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"SMTP \u5bc6\u7801"),l.a.createElement(Xe.a,{type:"password",value:O.smtpPass,onChange:N("smtpPass"),required:!0}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u53d1\u4fe1\u90ae\u7bb1\u5bc6\u7801"))),l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u56de\u4fe1\u90ae\u7bb1"),l.a.createElement(Xe.a,{value:O.replyTo,onChange:N("replyTo"),required:!0}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u7528\u6237\u56de\u590d\u7cfb\u7edf\u53d1\u9001\u7684\u90ae\u4ef6\u65f6\uff0c\u7528\u4e8e\u63a5\u6536\u56de\u4fe1\u7684\u90ae\u7bb1"))),l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"SMTP \u8fde\u63a5\u6709\u6548\u671f (\u79d2)"),l.a.createElement(Xe.a,{inputProps:{min:1,step:1},type:"number",value:O.mail_keepalive,onChange:N("mail_keepalive"),required:!0}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u6709\u6548\u671f\u5185\u5efa\u7acb\u7684 SMTP \u8fde\u63a5\u4f1a\u88ab\u65b0\u90ae\u4ef6\u53d1\u9001\u8bf7\u6c42\u590d\u7528"))))),l.a.createElement("div",{className:e.root},l.a.createElement(h.a,{variant:"h6",gutterBottom:!0},"\u90ae\u4ef6\u6a21\u677f"),l.a.createElement("div",{className:e.formContainer},l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u65b0\u7528\u6237\u6fc0\u6d3b"),l.a.createElement(Xe.a,{value:O.mail_activation_template,onChange:N("mail_activation_template"),multiline:!0,rowsMax:"10",required:!0}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u65b0\u7528\u6237\u6ce8\u518c\u540e\u6fc0\u6d3b\u90ae\u4ef6\u7684\u6a21\u677f"))),l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u8d85\u989d\u63d0\u9192"),l.a.createElement(Xe.a,{value:O.over_used_template,onChange:N("over_used_template"),multiline:!0,rowsMax:"10",required:!0}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u7528\u6237\u56e0\u589e\u503c\u670d\u52a1\u8fc7\u671f\uff0c\u5bb9\u91cf\u8d85\u51fa\u9650\u5236\u540e\u53d1\u9001\u7684\u63d0\u9192\u90ae\u4ef6\u6a21\u677f"))),l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u91cd\u7f6e\u5bc6\u7801"),l.a.createElement(Xe.a,{value:O.mail_reset_pwd_template,onChange:N("mail_reset_pwd_template"),multiline:!0,rowsMax:"10",required:!0}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u5bc6\u7801\u91cd\u7f6e\u90ae\u4ef6\u6a21\u677f"))))),l.a.createElement("div",{className:e.root},l.a.createElement(Ke.a,{disabled:c,type:"submit",variant:"contained",color:"primary"},"\u4fdd\u5b58"),"   ",l.a.createElement(Ke.a,{className:e.buttonMargin,variant:"outlined",color:"primary",onClick:function(){return p(!0)}},"\u53d1\u9001\u6d4b\u8bd5\u90ae\u4ef6"))))}var ba=t(5258),fa=function(e){return e<1024?[Math.round(e),1]:e<1048576?[Math.round(e/1024),1024]:e<1073741824?[Math.round(e/1048576),1048576]:e<1099511627776?[Math.round(e/1073741824),1073741824]:[Math.round(e/1099511627776),1099511627776]};function ha(e){var a=e.onChange,t=e.min,c=e.value,i=e.required,o=e.label,m=e.max,s=e.suffix,u=Object(Z.c)(),p=Object(r.useCallback)((function(e,a,t,n){return u(Object(ee.P)(e,a,t,n))}),[u]),d=Object(r.useState)(1),E=Object(n.a)(d,2),b=E[0],f=E[1],h=!0,v=Object(r.useCallback)((function(){var e=fa(c);return h&&0!==c&&(f(e[1]),h=!1),e}),[c]);return l.a.createElement(Qe.a,null,l.a.createElement(Ge.a,{htmlFor:"component-helper"},o),l.a.createElement(Xe.a,{style:{width:200},value:v()[0],type:"number",inputProps:{min:t,step:1},onChange:function(e){e.target.value*b<m?a({target:{value:(e.target.value*b).toString()}}):p("top","right","\u8d85\u51fa\u6700\u5927\u5c3a\u5bf8\u9650\u5236","warning")},required:i,endAdornment:l.a.createElement(ba.a,{position:"end"},l.a.createElement(Ye.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:b,onChange:function(e){v()[0]*e.target.value<m?(a({target:{value:(v()[0]*e.target.value).toString()}}),f(e.target.value)):p("top","right","\u8d85\u51fa\u6700\u5927\u5c3a\u5bf8\u9650\u5236","warning")}},l.a.createElement($e.a,{value:1},"B",s&&s),l.a.createElement($e.a,{value:1024},"KB",s&&s),l.a.createElement($e.a,{value:1048576},"MB",s&&s),l.a.createElement($e.a,{value:1073741824},"GB",s&&s),l.a.createElement($e.a,{value:1099511627776},"TB",s&&s)))}))}function va(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function ga(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?va(t,!0).forEach((function(a){Object(m.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):va(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var Oa=Object(c.a)((function(e){var a;return{root:(a={},Object(m.a)(a,e.breakpoints.up("md"),{marginLeft:100}),Object(m.a)(a,"marginBottom",40),a),form:{maxWidth:400,marginTop:20,marginBottom:20},formContainer:Object(m.a)({},e.breakpoints.up("md"),{padding:"0px 24px 0 24px"})}}));function ya(){var e=Oa(),a=Object(r.useState)(!1),t=Object(n.a)(a,2),c=t[0],i=t[1],o=Object(r.useState)({max_worker_num:"1",max_parallel_transfer:"1",temp_path:"",maxEditSize:"0",onedrive_chunk_retries:"0",archive_timeout:"0",download_timeout:"0",preview_timeout:"0",doc_preview_timeout:"0",upload_credential_timeout:"0",upload_session_timeout:"0",slave_api_timeout:"0",onedrive_monitor_timeout:"0",share_download_session_timeout:"0",onedrive_callback_check:"0",reset_after_upload_failed:"0",onedrive_source_timeout:"0"}),s=Object(n.a)(o,2),u=s[0],p=s[1],d=function(e){return function(a){p(ga({},u,Object(m.a)({},e,a.target.value)))}},E=Object(Z.c)(),b=Object(r.useCallback)((function(e,a,t,n){return E(Object(ee.P)(e,a,t,n))}),[E]);Object(r.useEffect)((function(){Oe.b.post("/admin/setting",{keys:Object.keys(u)}).then((function(e){p(e.data)})).catch((function(e){b("top","right",e.message,"error")}))}),[]);var f;return l.a.createElement("div",null,l.a.createElement("form",{onSubmit:function(e){e.preventDefault(),i(!0);var a=[];Object.keys(u).forEach((function(e){a.push({key:e,value:u[e]})})),Oe.b.patch("/admin/setting",{options:a}).then((function(e){b("top","right","\u8bbe\u7f6e\u5df2\u66f4\u6539","success")})).catch((function(e){b("top","right",e.message,"error")})).then((function(){i(!1)}))}},l.a.createElement("div",{className:e.root},l.a.createElement(h.a,{variant:"h6",gutterBottom:!0},"\u5b58\u50a8\u4e0e\u4f20\u8f93"),l.a.createElement("div",{className:e.formContainer},l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,null,l.a.createElement(Ge.a,{htmlFor:"component-helper"},"Worker \u6570\u91cf"),l.a.createElement(Xe.a,{type:"number",inputProps:{min:1,step:1},value:u.max_worker_num,onChange:d("max_worker_num"),required:!0}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u4efb\u52a1\u961f\u5217\u6700\u591a\u5e76\u884c\u6267\u884c\u7684\u4efb\u52a1\u6570\uff0c\u4fdd\u5b58\u540e\u9700\u8981\u91cd\u542f Cloudreve \u751f\u6548"))),l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,null,l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u4e2d\u8f6c\u5e76\u884c\u4f20\u8f93"),l.a.createElement(Xe.a,{type:"number",inputProps:{min:1,step:1},value:u.max_parallel_transfer,onChange:d("max_parallel_transfer"),required:!0}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u4efb\u52a1\u961f\u5217\u4e2d\u8f6c\u4efb\u52a1\u4f20\u8f93\u65f6\uff0c\u6700\u5927\u5e76\u884c\u534f\u7a0b\u6570"))),l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u4e34\u65f6\u76ee\u5f55"),l.a.createElement(Xe.a,{value:u.temp_path,onChange:d("temp_path"),required:!0}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u7528\u4e8e\u5b58\u653e\u6253\u5305\u4e0b\u8f7d\u3001\u89e3\u538b\u7f29\u3001\u538b\u7f29\u7b49\u4efb\u52a1\u4ea7\u751f\u7684\u4e34\u65f6\u6587\u4ef6\u7684\u76ee\u5f55\u8def\u5f84"))),l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,null,l.a.createElement(ha,{value:u.maxEditSize,onChange:d("maxEditSize"),required:!0,min:0,max:2147483647,label:"\u6587\u672c\u6587\u4ef6\u5728\u7ebf\u7f16\u8f91\u5927\u5c0f"}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u6587\u672c\u6587\u4ef6\u53ef\u5728\u7ebf\u7f16\u8f91\u7684\u6700\u5927\u5927\u5c0f\uff0c\u8d85\u51fa\u6b64\u5927\u5c0f\u7684\u6587\u4ef6\u65e0\u6cd5\u5728\u7ebf\u7f16\u8f91"))),l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,null,l.a.createElement(Ge.a,{htmlFor:"component-helper"},"OneDrive \u5206\u7247\u9519\u8bef\u91cd\u8bd5"),l.a.createElement(Xe.a,{type:"number",inputProps:{min:0,step:1},value:u.onedrive_chunk_retries,onChange:d("onedrive_chunk_retries"),required:!0}),l.a.createElement(Ve.a,{id:"component-helper-text"},"OneDrive \u5b58\u50a8\u7b56\u7565\u5206\u7247\u4e0a\u4f20\u5931\u8d25\u540e\u91cd\u8bd5\u7684\u6700\u5927\u6b21\u6570\uff0c\u53ea\u9002\u7528\u4e8e\u670d\u52a1\u7aef\u4e0a\u4f20\u6216\u4e2d\u8f6c"))),l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(ra.a,{control:l.a.createElement(na.a,{checked:"1"===u.reset_after_upload_failed,onChange:(f="reset_after_upload_failed",function(e){var a=e.target.checked?"1":"0";p(ga({},u,Object(m.a)({},f,a)))})}),label:"\u4e0a\u4f20\u6821\u9a8c\u5931\u8d25\u65f6\u5f3a\u5236\u91cd\u7f6e\u8fde\u63a5"}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u5f00\u542f\u540e\uff0c\u5982\u679c\u672c\u6b21\u7b56\u7565\u3001\u5934\u50cf\u7b49\u6570\u636e\u4e0a\u4f20\u6821\u9a8c\u5931\u8d25\uff0c\u670d\u52a1\u5668\u4f1a\u5f3a\u5236\u91cd\u7f6e\u8fde\u63a5"))))),l.a.createElement("div",{className:e.root},l.a.createElement(h.a,{variant:"h6",gutterBottom:!0},"\u6709\u6548\u671f (\u79d2)"),l.a.createElement("div",{className:e.formContainer},l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,null,l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u6253\u5305\u4e0b\u8f7d"),l.a.createElement(Xe.a,{type:"number",inputProps:{min:1,step:1},value:u.archive_timeout,onChange:d("archive_timeout"),required:!0}))),l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,null,l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u4e0b\u8f7d\u4f1a\u8bdd"),l.a.createElement(Xe.a,{type:"number",inputProps:{min:1,step:1},value:u.download_timeout,onChange:d("download_timeout"),required:!0}))),l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,null,l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u9884\u89c8\u94fe\u63a5"),l.a.createElement(Xe.a,{type:"number",inputProps:{min:1,step:1},value:u.preview_timeout,onChange:d("preview_timeout"),required:!0}))),l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,null,l.a.createElement(Ge.a,{htmlFor:"component-helper"},"Office \u6587\u6863\u9884\u89c8\u8fde\u63a5"),l.a.createElement(Xe.a,{type:"number",inputProps:{min:1,step:1},value:u.doc_preview_timeout,onChange:d("doc_preview_timeout"),required:!0}))),l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,null,l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u4e0a\u4f20\u51ed\u8bc1"),l.a.createElement(Xe.a,{type:"number",inputProps:{min:1,step:1},value:u.upload_credential_timeout,onChange:d("upload_credential_timeout"),required:!0}))),l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,null,l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u4e0a\u4f20\u4f1a\u8bdd"),l.a.createElement(Xe.a,{type:"number",inputProps:{min:1,step:1},value:u.upload_session_timeout,onChange:d("upload_session_timeout"),required:!0}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u8d85\u51fa\u540e\u4e0d\u518d\u5904\u7406\u6b64\u4e0a\u4f20\u7684\u56de\u8c03\u8bf7\u6c42"))),l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,null,l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u4ece\u673aAPI\u8bf7\u6c42"),l.a.createElement(Xe.a,{type:"number",inputProps:{min:1,step:1},value:u.slave_api_timeout,onChange:d("slave_api_timeout"),required:!0}))),l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,null,l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u5206\u4eab\u4e0b\u8f7d\u4f1a\u8bdd"),l.a.createElement(Xe.a,{type:"number",inputProps:{min:1,step:1},value:u.share_download_session_timeout,onChange:d("share_download_session_timeout"),required:!0}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u8bbe\u5b9a\u65f6\u95f4\u5185\u91cd\u590d\u4e0b\u8f7d\u5206\u4eab\u6587\u4ef6\uff0c\u4e0d\u4f1a\u88ab\u8bb0\u5165\u603b\u4e0b\u8f7d\u6b21\u6570"))),l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,null,l.a.createElement(Ge.a,{htmlFor:"component-helper"},"OneDrive \u5ba2\u6237\u7aef\u4e0a\u4f20\u76d1\u63a7\u95f4\u9694"),l.a.createElement(Xe.a,{type:"number",inputProps:{min:1,step:1},value:u.onedrive_monitor_timeout,onChange:d("onedrive_monitor_timeout"),required:!0}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u6bcf\u95f4\u9694\u6240\u8bbe\u5b9a\u65f6\u95f4\uff0cCloudreve \u4f1a\u5411 OneDrive \u8bf7\u6c42\u68c0\u67e5\u5ba2\u6237\u7aef\u4e0a\u4f20\u60c5\u51b5\u5df2\u786e\u4fdd\u5ba2\u6237\u7aef\u4e0a\u4f20\u53ef\u63a7"))),l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,null,l.a.createElement(Ge.a,{htmlFor:"component-helper"},"OneDrive \u56de\u8c03\u7b49\u5f85"),l.a.createElement(Xe.a,{type:"number",inputProps:{min:1,step:1},value:u.onedrive_callback_check,onChange:d("onedrive_callback_check"),required:!0}),l.a.createElement(Ve.a,{id:"component-helper-text"},"OneDrive \u5ba2\u6237\u7aef\u4e0a\u4f20\u5b8c\u6210\u540e\uff0c\u7b49\u5f85\u56de\u8c03\u7684\u6700\u5927\u65f6\u95f4\uff0c\u5982\u679c\u8d85\u51fa\u4f1a\u88ab\u8ba4\u4e3a\u4e0a\u4f20\u5931\u8d25"))),l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,null,l.a.createElement(Ge.a,{htmlFor:"component-helper"},"OneDrive \u4e0b\u8f7d\u8bf7\u6c42\u7f13\u5b58"),l.a.createElement(Xe.a,{type:"number",inputProps:{min:1,max:3659,step:1},value:u.onedrive_source_timeout,onChange:d("onedrive_source_timeout"),required:!0}),l.a.createElement(Ve.a,{id:"component-helper-text"},"OneDrive \u83b7\u53d6\u6587\u4ef6\u4e0b\u8f7d URL \u540e\u53ef\u5c06\u7ed3\u679c\u7f13\u5b58\uff0c\u51cf\u8f7b\u70ed\u95e8\u6587\u4ef6\u4e0b\u8f7dAPI\u8bf7\u6c42\u9891\u7387"))))),l.a.createElement("div",{className:e.root},l.a.createElement(Ke.a,{disabled:c,type:"submit",variant:"contained",color:"primary"},"\u4fdd\u5b58"))))}var Na=t(5270),Ca=t(5287),ja=t(5173);function Sa(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function ka(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?Sa(t,!0).forEach((function(a){Object(m.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Sa(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var _a=Object(c.a)((function(e){return{formContainer:{margin:"8px 0 8px 0"}}}));function xa(e){var a=e.open,t=e.onClose,c=e.onSubmit,i=_a(),o=Object(r.useState)({name:"",size:"1073741824",time:"",price:"",score:""}),s=Object(n.a)(o,2),u=s[0],p=s[1],d=function(e){return function(a){p(ka({},u,Object(m.a)({},e,a.target.value)))}};return l.a.createElement(Ae.a,{open:a,onClose:t,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",maxWidth:"xs"},l.a.createElement("form",{onSubmit:function(e){e.preventDefault();var a=ka({},u);a.size=parseInt(a.size),a.time=86400*parseInt(a.time),a.price=parseInt(100*a.price),a.score=parseInt(a.score),a.id=(new Date).valueOf(),c(a)}},l.a.createElement(Te.a,{id:"alert-dialog-title"},"\u6dfb\u52a0\u5bb9\u91cf\u5305"),l.a.createElement(Be.a,null,l.a.createElement(Me.a,{id:"alert-dialog-description"},l.a.createElement("div",{className:i.formContainer},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u540d\u79f0"),l.a.createElement(Xe.a,{value:u.name,onChange:d("name"),required:!0}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u5546\u54c1\u5c55\u793a\u540d\u79f0"))),l.a.createElement("div",{className:i.formContainer},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(ha,{value:u.size,onChange:d("size"),min:1,label:"\u5927\u5c0f",max:0x8000000000000000,required:!0}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u5bb9\u91cf\u5305\u7684\u5927\u5c0f"))),l.a.createElement("div",{className:i.formContainer},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u6709\u6548\u671f (\u5929)"),l.a.createElement(Xe.a,{type:"number",inputProps:{min:1,step:1},value:u.time,onChange:d("time"),required:!0}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u6bcf\u4e2a\u5bb9\u91cf\u5305\u7684\u6709\u6548\u671f"))),l.a.createElement("div",{className:i.formContainer},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u5355\u4ef7 (\u5143)"),l.a.createElement(Xe.a,{type:"number",inputProps:{min:.01,step:.01},value:u.price,onChange:d("price"),required:!0}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u5bb9\u91cf\u5305\u7684\u5355\u4ef7"))),l.a.createElement("div",{className:i.formContainer},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u5355\u4ef7 (\u79ef\u5206)"),l.a.createElement(Xe.a,{type:"number",inputProps:{min:0,step:1},value:u.score,onChange:d("score"),required:!0}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u4f7f\u7528\u79ef\u5206\u8d2d\u4e70\u65f6\u7684\u4ef7\u683c\uff0c\u586b\u5199\u4e3a 0 \u8868\u793a\u4e0d\u80fd\u4f7f\u7528\u79ef\u5206\u8d2d\u4e70"))))),l.a.createElement(Ue.a,null,l.a.createElement(Ke.a,{onClick:t,color:"default"},"\u53d6\u6d88"),l.a.createElement(Ke.a,{type:"submit",color:"primary"},"\u786e\u5b9a"))))}var wa=t(5256),Pa=t(5255),Da=t(5251),za=t(5252),Wa=t(5257),Fa=t(5276),Ia=t(16);function qa(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function Ra(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?qa(t,!0).forEach((function(a){Object(m.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):qa(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var La=Object(c.a)((function(e){return{formContainer:{margin:"8px 0 8px 0"}}}));function Ta(e){var a=e.open,t=e.onClose,c=e.onSubmit,i=La(),o=Object(r.useState)([]),s=Object(n.a)(o,2),u=s[0],p=s[1],d=Object(r.useState)({name:"",group_id:2,time:"",price:"",score:"",des:"",highlight:!1}),E=Object(n.a)(d,2),b=E[0],f=E[1];Object(r.useEffect)((function(){a&&0===u.length&&Oe.b.get("/admin/groups").then((function(e){p(e.data)})).catch((function(e){}))}),[a]);var h,v=function(e){return function(a){f(Ra({},b,Object(m.a)({},e,a.target.value)))}};return l.a.createElement(Ae.a,{open:a,onClose:t,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",maxWidth:"xs",scroll:"paper"},l.a.createElement("form",{onSubmit:function(e){e.preventDefault();var a=Ra({},b);a.time=86400*parseInt(a.time),a.price=parseInt(100*a.price),a.score=parseInt(a.score),a.id=(new Date).valueOf(),a.des=a.des.split("\n"),c(a)}},l.a.createElement(Te.a,{id:"alert-dialog-title"},"\u6dfb\u52a0\u53ef\u8d2d\u7528\u6237\u7ec4"),l.a.createElement(Be.a,null,l.a.createElement(Me.a,{id:"alert-dialog-description"},l.a.createElement("div",{className:i.formContainer},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u540d\u79f0"),l.a.createElement(Xe.a,{value:b.name,onChange:v("name"),required:!0}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u5546\u54c1\u5c55\u793a\u540d\u79f0"))),l.a.createElement("div",{className:i.formContainer},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u7528\u6237\u7ec4"),l.a.createElement(Ye.a,{value:b.group_id,onChange:v("group_id"),required:!0},u.map((function(e){return 3!==e.ID?l.a.createElement($e.a,{value:e.ID},e.Name):null}))),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u8d2d\u4e70\u540e\u5347\u7ea7\u7684\u7528\u6237\u7ec4"))),l.a.createElement("div",{className:i.formContainer},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u6709\u6548\u671f (\u5929)"),l.a.createElement(Xe.a,{type:"number",inputProps:{min:1,step:1},value:b.time,onChange:v("time"),required:!0}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u5355\u4f4d\u8d2d\u4e70\u65f6\u95f4\u7684\u6709\u6548\u671f"))),l.a.createElement("div",{className:i.formContainer},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u5355\u4ef7 (\u5143)"),l.a.createElement(Xe.a,{type:"number",inputProps:{min:.01,step:.01},value:b.price,onChange:v("price"),required:!0}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u7528\u6237\u7ec4\u7684\u5355\u4ef7"))),l.a.createElement("div",{className:i.formContainer},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u5355\u4ef7 (\u79ef\u5206)"),l.a.createElement(Xe.a,{type:"number",inputProps:{min:0,step:1},value:b.score,onChange:v("score"),required:!0}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u4f7f\u7528\u79ef\u5206\u8d2d\u4e70\u65f6\u7684\u4ef7\u683c\uff0c\u586b\u5199\u4e3a 0 \u8868\u793a\u4e0d\u80fd\u4f7f\u7528\u79ef\u5206\u8d2d\u4e70"))),l.a.createElement("div",{className:i.formContainer},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u5546\u54c1\u63cf\u8ff0 (\u4e00\u884c\u4e00\u4e2a)"),l.a.createElement(Xe.a,{value:b.des,onChange:v("des"),multiline:!0,rowsMax:10,required:!0}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u8d2d\u4e70\u9875\u9762\u5c55\u793a\u7684\u5546\u54c1\u63cf\u8ff0"))),l.a.createElement("div",{className:i.formContainer},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(ra.a,{control:l.a.createElement(na.a,{checked:b.highlight,onChange:(h="highlight",function(e){f(Ra({},b,Object(m.a)({},h,e.target.checked)))})}),label:"\u7a81\u51fa\u5c55\u793a"}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u5f00\u542f\u540e\uff0c\u5728\u5546\u54c1\u9009\u62e9\u9875\u9762\u4f1a\u88ab\u7a81\u51fa\u5c55\u793a"))))),l.a.createElement(Ue.a,null,l.a.createElement(Ke.a,{onClick:t,color:"default"},"\u53d6\u6d88"),l.a.createElement(Ke.a,{type:"submit",color:"primary"},"\u786e\u5b9a"))))}function Aa(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}var Ba=Object(c.a)((function(e){return{formContainer:{margin:"8px 0 8px 0"}}}));function Ma(e){var a=e.open,t=e.onClose,c=e.products,i=e.onSuccess,o=Ba(),s=Object(r.useState)({num:1,id:0,time:1}),u=Object(n.a)(s,2),p=u[0],d=u[1],E=Object(r.useState)(!1),b=Object(n.a)(E,2),f=b[0],h=b[1],v=Object(Z.c)(),g=Object(r.useCallback)((function(e,a,t,n){return v(Object(ee.P)(e,a,t,n))}),[v]),O=function(e){return function(a){d(function(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?Aa(t,!0).forEach((function(a){Object(m.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Aa(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}({},p,Object(m.a)({},e,a.target.value)))}};return l.a.createElement(Ae.a,{open:a,onClose:t,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",maxWidth:"xs"},l.a.createElement("form",{onSubmit:function(e){e.preventDefault(),h(!0),p.num=parseInt(p.num),p.id=parseInt(p.id),p.time=parseInt(p.time),p.type=2;for(var a=0;a<c.length;a++)if(c[a].id===p.id){void 0!==c[a].group_id?p.type=1:p.type=0;break}Oe.b.post("/admin/redeem",p).then((function(e){i(e.data),t()})).catch((function(e){g("top","right",e.message,"error")})).then((function(){h(!1)}))}},l.a.createElement(Te.a,{id:"alert-dialog-title"},"\u751f\u6210\u5151\u6362\u7801"),l.a.createElement(Be.a,null,l.a.createElement(Me.a,{id:"alert-dialog-description"},l.a.createElement("div",{className:o.formContainer},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u751f\u6210\u6570\u91cf"),l.a.createElement(Xe.a,{type:"number",inputProps:{step:1,min:1,max:100},value:p.num,onChange:O("num"),required:!0}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u6fc0\u6d3b\u7801\u6279\u91cf\u751f\u6210\u6570\u91cf"))),l.a.createElement("div",{className:o.formContainer},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u5bf9\u5e94\u5546\u54c1"),l.a.createElement(Ye.a,{value:p.id,onChange:function(e){O("id")(e)}},c.map((function(e){return l.a.createElement($e.a,{value:e.id,"data-type":"1"},e.name)})),l.a.createElement($e.a,{value:0},"\u79ef\u5206")))),l.a.createElement("div",{className:o.formContainer},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u5546\u54c1\u6570\u91cf"),l.a.createElement(Xe.a,{type:"number",inputProps:{step:1,min:1},value:p.time,onChange:O("time"),required:!0}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u5bf9\u4e8e\u79ef\u5206\u7c7b\u5546\u54c1\uff0c\u6b64\u5904\u4e3a\u79ef\u5206\u6570\u91cf\uff0c\u5176\u4ed6\u5546\u54c1\u4e3a\u65f6\u957f\u500d\u6570"))))),l.a.createElement(Ue.a,null,l.a.createElement(Ke.a,{disabled:f,onClick:t,color:"default"},"\u53d6\u6d88"),l.a.createElement(Ke.a,{disabled:f,type:"submit",color:"primary"},"\u786e\u5b9a"))))}var Ua=t(5807),Ka=t(5286);function Ha(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function Ja(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?Ha(t,!0).forEach((function(a){Object(m.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ha(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var Ga=Object(c.a)((function(e){var a;return{root:(a={},Object(m.a)(a,e.breakpoints.up("md"),{marginLeft:100}),Object(m.a)(a,"marginBottom",40),a),form:{maxWidth:400,marginTop:20,marginBottom:20},formContainer:Object(m.a)({},e.breakpoints.up("md"),{padding:"0px 24px 0 24px"}),tabForm:{marginTop:20},content:{padding:e.spacing(2)},tableContainer:{overflowX:"auto",marginTop:e.spacing(2)},navigator:{marginTop:10}}})),Qa={};function Xa(){var e=Ga(),a=Object(r.useState)(!1),t=Object(n.a)(a,2),c=t[0],i=t[1],o=Object(r.useState)(0),s=Object(n.a)(o,2),u=s[0],p=s[1],d=Object(r.useState)({alipay_enabled:"0",payjs_enabled:"0",payjs_id:"",appid:"",appkey:"",shopid:"",payjs_secret:"",score_enabled:"0",share_score_rate:"0",score_price:"0",ban_time:"0",group_sell_data:"[]",pack_data:"[]"}),E=Object(n.a)(d,2),b=E[0],f=E[1],v=Object(r.useState)([]),O=Object(n.a)(v,2),y=O[0],N=O[1],C=Object(r.useState)([]),j=Object(n.a)(C,2),S=j[0],k=j[1],_=Object(r.useState)(!1),x=Object(n.a)(_,2),w=x[0],P=x[1],D=Object(r.useState)(!1),z=Object(n.a)(D,2),W=z[0],F=z[1],I=Object(r.useState)(!1),q=Object(n.a)(I,2),R=q[0],L=q[1],T=Object(r.useState)([]),A=Object(n.a)(T,2),B=A[0],M=A[1],U=Object(r.useState)([]),K=Object(n.a)(U,2),H=K[0],J=K[1],G=Object(r.useState)(!1),Q=Object(n.a)(G,2),X=Q[0],V=Q[1],Y=Object(r.useState)(1),$=Object(n.a)(Y,2),ae=$[0],te=$[1],ne=Object(r.useState)(20),re=Object(n.a)(ne,2),le=re[0],ce=(re[1],Object(r.useState)(0)),ie=Object(n.a)(ce,2),oe=ie[0],me=ie[1];Object(r.useEffect)((function(){var e=JSON.parse(b.group_sell_data);e.forEach((function(e){Qa[e.id]=e.name})),N(e)}),[b.group_sell_data]),Object(r.useEffect)((function(){var e=JSON.parse(b.pack_data);e.forEach((function(e){Qa[e.id]=e.name})),k(e)}),[b.pack_data]),Object(r.useEffect)((function(){3===u&&se()}),[u,ae,le]);var se=function(){Oe.b.post("/admin/redeem/list",{page:ae,page_size:le,order_by:"id desc"}).then((function(e){M(e.data.items),me(e.data.total)})).catch((function(e){Ee("top","right",e.message,"error")}))},ue=function(e){return function(a){f(Ja({},b,Object(m.a)({},e,a.target.value)))}},pe=function(e){return function(a){var t=a.target.value;void 0!==a.target.checked&&(t=a.target.checked?"1":"0"),f(Ja({},b,Object(m.a)({},e,t)))}},de=Object(Z.c)(),Ee=Object(r.useCallback)((function(e,a,t,n){return de(Object(ee.P)(e,a,t,n))}),[de]);Object(r.useEffect)((function(){Oe.b.post("/admin/setting",{keys:Object.keys(b)}).then((function(e){f(e.data)})).catch((function(e){Ee("top","right",e.message,"error")}))}),[]);var be=function(){var e=[];Object.keys(b).forEach((function(a){e.push({key:a,value:b[a]})})),Oe.b.patch("/admin/setting",{options:e}).then((function(e){Ee("top","right","\u8bbe\u7f6e\u5df2\u66f4\u6539","success")})).catch((function(e){Ee("top","right",e.message,"error")})).then((function(){i(!1)}))},he=function(e,a){var t=[];Object.keys(b).forEach((function(n){t.push({key:n,value:n===e?a:b[n]})})),Oe.b.patch("/admin/setting",{options:t}).then((function(e){Ee("top","right","\u8bbe\u7f6e\u5df2\u4fdd\u5b58","success")})).catch((function(e){Ee("top","right",e.message,"error")})).then((function(){i(!1)}))};return l.a.createElement("div",null,l.a.createElement(fe.a,{square:!0},l.a.createElement(Ca.a,{value:u,indicatorColor:"primary",textColor:"primary",onChange:function(e,a){return p(a)},scrollButtons:"auto"},l.a.createElement(Na.a,{label:"\u652f\u4ed8/\u6742\u9879\u8bbe\u7f6e"}),l.a.createElement(Na.a,{label:"\u5bb9\u91cf\u5305"}),l.a.createElement(Na.a,{label:"\u53ef\u8d2d\u7528\u6237\u7ec4"}),l.a.createElement(Na.a,{label:"\u5151\u6362\u7801"})),l.a.createElement("div",{className:e.content},0===u&&l.a.createElement("form",{onSubmit:function(e){e.preventDefault(),i(!0),be()},className:e.tabForm},l.a.createElement("div",{className:e.root},l.a.createElement(h.a,{variant:"h6",gutterBottom:!0},"\u652f\u4ed8\u5b9d\u5f53\u9762\u4ed8"),l.a.createElement("div",{className:e.formContainer},l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(ra.a,{control:l.a.createElement(na.a,{checked:"1"===b.alipay_enabled,onChange:pe("alipay_enabled")}),label:"\u5f00\u542f"}))),"1"===b.alipay_enabled&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"App- ID"),l.a.createElement(Xe.a,{value:b.appid,onChange:ue("appid"),required:!0}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u5f53\u9762\u4ed8\u5e94\u7528\u7684 APPID"))),l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"RSA \u5e94\u7528\u79c1\u94a5"),l.a.createElement(Xe.a,{value:b.appkey,onChange:ue("appkey"),multiline:!0,rowsMax:10,required:!0}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u5f53\u9762\u4ed8\u5e94\u7528\u7684 RSA2 (SHA256) \u79c1\u94a5\uff0c\u4e00\u822c\u662f\u7531\u60a8\u81ea\u5df1\u751f\u6210\u3002 \u8be6\u60c5\u53c2\u8003",l.a.createElement(ja.a,{target:"_blank",href:"https://docs.open.alipay.com/291/105971"},"\u751f\u6210 RSA \u5bc6\u94a5")))),l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u652f\u4ed8\u5b9d\u516c\u94a5"),l.a.createElement(Xe.a,{value:b.shopid,onChange:ue("shopid"),multiline:!0,rowsMax:10,required:!0}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u7531\u652f\u4ed8\u5b9d\u63d0\u4f9b\uff0c\u53ef\u5728 \u5e94\u7528\u7ba1\u7406 - \u5e94\u7528\u4fe1\u606f - \u63a5\u53e3\u52a0\u7b7e\u65b9\u5f0f \u4e2d\u83b7\u53d6")))))),l.a.createElement("div",{className:e.root},l.a.createElement(h.a,{variant:"h6",gutterBottom:!0},"PAYJS \u5fae\u4fe1\u652f\u4ed8"),l.a.createElement("div",{className:e.formContainer},l.a.createElement("div",{className:e.form},l.a.createElement(ca.a,{severity:"info"},l.a.createElement(h.a,{variant:"body2"},"\u6b64\u670d\u52a1\u7531\u7b2c\u4e09\u65b9\u5e73\u53f0"," ",l.a.createElement(ja.a,{href:"https://payjs.cn/",target:"_blank"},"PAYJS")," ","\u63d0\u4f9b\uff0c \u4ea7\u751f\u7684\u4efb\u4f55\u7ea0\u7eb7\u4e0e Cloudreve \u5f00\u53d1\u8005\u65e0\u5173\u3002"))),l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(ra.a,{control:l.a.createElement(na.a,{checked:"1"===b.payjs_enabled,onChange:pe("payjs_enabled")}),label:"\u5f00\u542f"}))),"1"===b.payjs_enabled&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u5546\u6237\u53f7"),l.a.createElement(Xe.a,{value:b.payjs_id,onChange:ue("payjs_id"),required:!0}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u53ef\u5728 PAYJS \u7ba1\u7406\u9762\u677f\u9996\u9875\u770b\u5230"))),l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u901a\u4fe1\u5bc6\u94a5"),l.a.createElement(Xe.a,{value:b.payjs_secret,onChange:ue("payjs_secret"),required:!0}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u53ef\u5728 PAYJS \u7ba1\u7406\u9762\u677f\u9996\u9875\u770b\u5230")))))),l.a.createElement("div",{className:e.root},l.a.createElement(h.a,{variant:"h6",gutterBottom:!0},"\u6742\u9879\u8bbe\u7f6e"),l.a.createElement("div",{className:e.formContainer},l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u5c01\u7981\u7f13\u51b2\u671f (\u79d2)"),l.a.createElement(Xe.a,{type:"number",inputProps:{step:1,min:1},value:b.ban_time,onChange:ue("ban_time"),required:!0}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u7528\u6237\u4fdd\u6301\u5bb9\u91cf\u8d85\u989d\u72b6\u6001\u7684\u6700\u957f\u65f6\u957f\uff0c\u8d85\u51fa\u65f6\u957f\u8be5\u7528\u6237\u4f1a\u88ab\u7cfb\u7edf\u51bb\u7ed3"))),l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(ra.a,{control:l.a.createElement(na.a,{checked:"1"===b.score_enabled,onChange:pe("score_enabled")}),label:"\u5141\u8bb8\u4e3a\u5206\u4eab\u5b9a\u4ef7"}),l.a.createElement(Ve.a,null,"\u5f00\u542f\u540e\uff0c\u7528\u6237\u53ef\u4e3a\u5206\u4eab\u8bbe\u5b9a\u79ef\u5206\u4ef7\u683c\uff0c\u4e0b\u8f7d\u9700\u8981\u6263\u9664\u79ef\u5206"))),"1"===b.score_enabled&&l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u79ef\u5206\u5230\u8d26\u6bd4\u7387 (%)"),l.a.createElement(Xe.a,{type:"number",inputProps:{step:1,min:0,max:100},value:b.share_score_rate,onChange:ue("share_score_rate"),required:!0}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u8d2d\u4e70\u4e0b\u8f7d\u8bbe\u5b9a\u4ef7\u683c\u7684\u5206\u4eab\uff0c\u5206\u4eab\u8005\u5b9e\u9645\u5230\u8d26\u7684\u79ef\u5206\u6bd4\u7387"))),l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u79ef\u5206\u4ef7\u683c (\u5206)"),l.a.createElement(Xe.a,{type:"number",inputProps:{step:1,min:1},value:b.score_price,onChange:ue("score_price"),required:!0}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u5145\u503c\u79ef\u5206\u65f6\u7684\u4ef7\u683c"))))),l.a.createElement("div",{className:e.root},l.a.createElement(Ke.a,{disabled:c,type:"submit",variant:"contained",color:"primary"},"\u4fdd\u5b58"))),1===u&&l.a.createElement("div",null,l.a.createElement(Ke.a,{onClick:function(){return P(!0)},variant:"contained",color:"secondary"},"\u6dfb\u52a0"),l.a.createElement("div",{className:e.tableContainer},l.a.createElement(Pa.a,{size:"small"},l.a.createElement(wa.a,null,l.a.createElement(Da.a,null,l.a.createElement(za.a,null,"\u540d\u79f0"),l.a.createElement(za.a,null,"\u5355\u4ef7"),l.a.createElement(za.a,null,"\u65f6\u957f"),l.a.createElement(za.a,null,"\u5927\u5c0f"),l.a.createElement(za.a,null,"\u64cd\u4f5c"))),l.a.createElement(Wa.a,null,S.map((function(e){return l.a.createElement(Da.a,{key:e.id},l.a.createElement(za.a,{component:"th",scope:"row"},e.name),l.a.createElement(za.a,null,"\uffe5",e.price/100,0!==e.score&&" \u6216 "+e.score+" \u79ef\u5206"),l.a.createElement(za.a,null,Math.ceil(e.time/86400),"\u5929"),l.a.createElement(za.a,null,Object(Ia.q)(e.size)),l.a.createElement(za.a,null,l.a.createElement(g.a,{onClick:function(){return function(e){var a=Object(ta.a)(S);a=a.filter((function(a){return a.id!==e})),k(a);var t=JSON.stringify(a);f(Ja({},b,{pack_data:t})),he("pack_data",t)}(e.id)},size:"small"},l.a.createElement(Fa.a,null))))})))))),2===u&&l.a.createElement("div",null,l.a.createElement(Ke.a,{onClick:function(){return F(!0)},variant:"contained",color:"secondary"},"\u6dfb\u52a0"),l.a.createElement("div",{className:e.tableContainer},l.a.createElement(Pa.a,{size:"small"},l.a.createElement(wa.a,null,l.a.createElement(Da.a,null,l.a.createElement(za.a,null,"\u540d\u79f0"),l.a.createElement(za.a,null,"\u5355\u4ef7"),l.a.createElement(za.a,null,"\u65f6\u957f"),l.a.createElement(za.a,null,"\u9ad8\u4eae"),l.a.createElement(za.a,null,"\u64cd\u4f5c"))),l.a.createElement(Wa.a,null,y.map((function(e){return l.a.createElement(Da.a,{key:e.id},l.a.createElement(za.a,{component:"th",scope:"row"},e.name),l.a.createElement(za.a,null,"\uffe5",e.price/100,0!==e.score&&" \u6216 "+e.score+" \u79ef\u5206"),l.a.createElement(za.a,null,Math.ceil(e.time/86400),"\u5929"),l.a.createElement(za.a,null,e.highlight?"\u662f":"\u5426"),l.a.createElement(za.a,null,l.a.createElement(g.a,{onClick:function(){return function(e){var a=Object(ta.a)(y);a=a.filter((function(a){return a.id!==e})),N(a);var t=JSON.stringify(a);f(Ja({},b,{group_sell_data:t})),he("group_sell_data",t)}(e.id)},size:"small"},l.a.createElement(Fa.a,null))))})))))),3===u&&l.a.createElement("div",null,l.a.createElement(Ke.a,{onClick:function(){return L(!0)},variant:"contained",color:"secondary"},"\u6dfb\u52a0"),l.a.createElement("div",{className:e.tableContainer},l.a.createElement(Pa.a,{size:"small"},l.a.createElement(wa.a,null,l.a.createElement(Da.a,null,l.a.createElement(za.a,null,"#"),l.a.createElement(za.a,null,"\u5546\u54c1\u540d"),l.a.createElement(za.a,null,"\u6570\u91cf"),l.a.createElement(za.a,null,"\u5151\u6362\u7801"),l.a.createElement(za.a,null,"\u72b6\u6001"),l.a.createElement(za.a,null,"\u64cd\u4f5c"))),l.a.createElement(Wa.a,null,B.map((function(e){return l.a.createElement(Da.a,{key:e.ID},l.a.createElement(za.a,{component:"th",scope:"row"},e.ID),l.a.createElement(za.a,null,0===e.ProductID&&"\u79ef\u5206",void 0!==Qa[e.ProductID]&&l.a.createElement(l.a.Fragment,null,Qa[e.ProductID]),0!==e.ProductID&&!Qa[e.ProductID]&&"\u5df2\u5931\u6548\u5546\u54c1"),l.a.createElement(za.a,null,e.Num),l.a.createElement(za.a,null,e.Code),l.a.createElement(za.a,null,e.Used?l.a.createElement(Ua.a,{color:"warning.main"},"\u5df2\u4f7f\u7528"):l.a.createElement(Ua.a,{color:"success.main"},"\u672a\u4f7f\u7528")),l.a.createElement(za.a,null,l.a.createElement(g.a,{onClick:function(){return a=e.ID,void Oe.b.delete("/admin/redeem/"+a).then((function(e){se()})).catch((function(e){Ee("top","right",e.message,"error")}));var a},size:"small"},l.a.createElement(Fa.a,null))))}))))),l.a.createElement("div",{className:e.navigator},l.a.createElement(Ka.a,{count:Math.ceil(oe/le),onChange:function(e,a){return te(a)},color:"secondary"}))),l.a.createElement(xa,{onSubmit:function(e){P(!1);var a=[].concat(Object(ta.a)(S),[e]);k(a);var t=JSON.stringify(a);f(Ja({},b,{pack_data:t})),he("pack_data",t)},open:w,onClose:function(){return P(!1)}}),l.a.createElement(Ta,{onSubmit:function(e){F(!1);var a=[].concat(Object(ta.a)(y),[e]);N(a);var t=JSON.stringify(a);f(Ja({},b,{group_sell_data:t})),he("group_sell_data",t)},open:W,onClose:function(){return F(!1)}}),l.a.createElement(Ma,{open:R,onSuccess:function(e){J(e),V(!0),se()},products:[].concat(Object(ta.a)(y),Object(ta.a)(S)),onClose:function(){return L(!1)}}),l.a.createElement(la,{title:"\u751f\u6210\u7ed3\u679c",open:X,msg:H.map((function(e){return l.a.createElement("div",null,e)})),onClose:function(){V(!1),J([])}}))))}var Va=t(5681),Ya=t(377),$a=t(5796),Za=t(5277),et=t(213);function at(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function tt(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?at(t,!0).forEach((function(a){Object(m.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):at(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var nt=Object(c.a)((function(e){return{picker:{"& div":{boxShadow:"none !important"},marginTop:e.spacing(1)},"@global":{".compact-picker:parent ":{boxShadow:"none !important"}},statusBar:{height:24,width:"100%"},fab:{textAlign:"right"}}}));function rt(e){var a=e.open,t=e.onClose,c=e.onSubmit,i=nt(),o=Object(r.useState)({palette:{primary:{main:"#3f51b5",contrastText:"#fff"},secondary:{main:"#d81b60",contrastText:"#fff"}}}),m=Object(n.a)(o,2),s=m[0],u=m[1],p=Object(r.useCallback)((function(){return Object(Ya.a)(s)}),[s]);return l.a.createElement(Ae.a,{open:a,onClose:t,fullWidth:!0,maxWidth:"md"},l.a.createElement(Be.a,null,l.a.createElement(be.a,{container:!0},l.a.createElement(be.a,{spacing:2,md:8,xs:12,container:!0},l.a.createElement(be.a,{md:6,xs:12,item:!0},l.a.createElement(h.a,{variant:"h6",gutterBottom:!0},"\u4e3b\u8272\u8c03"),l.a.createElement(ua.a,{value:s.palette.primary.main,onChange:function(e){u(tt({},s,{palette:tt({},s.palette,{primary:tt({},s.palette.primary,{main:e.target.value})})}))},fullWidth:!0}),l.a.createElement("div",{className:i.picker},l.a.createElement(Va.CompactPicker,{colors:["#4D4D4D","#999999","#FFFFFF","#f44336","#ff9800","#ffeb3b","#cddc39","#A4DD00","#00bcd4","#03a9f4","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#ff5722","#ffc107","#FCC400","#8bc34a","#4caf50","#009688","#2196f3","#3f51b5","#e91e63","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#673ab7","#9c27b0"],color:s.palette.primary.main,onChangeComplete:function(e,a){u(tt({},s,{palette:tt({},s.palette,{primary:tt({},s.palette.primary,{main:e.hex})})}))}}))),l.a.createElement(be.a,{md:6,xs:12,item:!0},l.a.createElement(h.a,{variant:"h6",gutterBottom:!0},"\u8f85\u8272\u8c03"),l.a.createElement(ua.a,{value:s.palette.secondary.main,onChange:function(e){u(tt({},s,{palette:tt({},s.palette,{secondary:tt({},s.palette.secondary,{main:e.target.value})})}))},fullWidth:!0}),l.a.createElement("div",{className:i.picker},l.a.createElement(Va.CompactPicker,{colors:["#4D4D4D","#999999","#FFFFFF","#ff1744","#ff3d00","#ffeb3b","#cddc39","#A4DD00","#00bcd4","#00e5ff","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#ff5722","#ffea00","#ffc400","#c6ff00","#00e676","#76ff03","#00b0ff","#2979ff","#f50057","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#1de9b6","#0C797D","#3d5afe","#651fff","#d500f9"],color:s.palette.secondary.main,onChangeComplete:function(e,a){u(tt({},s,{palette:tt({},s.palette,{secondary:tt({},s.palette.secondary,{main:e.hex})})}))}}))),l.a.createElement(be.a,{md:6,xs:12,item:!0},l.a.createElement(h.a,{variant:"h6",gutterBottom:!0},"\u4e3b\u8272\u8c03\u6587\u5b57"),l.a.createElement(ua.a,{value:s.palette.primary.contrastText,onChange:function(e){u(tt({},s,{palette:tt({},s.palette,{primary:tt({},s.palette.primary,{contrastText:e.target.value})})}))},fullWidth:!0}),l.a.createElement("div",{className:i.picker},l.a.createElement(Va.CompactPicker,{color:s.palette.primary.contrastText,onChangeComplete:function(e,a){u(tt({},s,{palette:tt({},s.palette,{primary:tt({},s.palette.primary,{contrastText:e.hex})})}))}}))),l.a.createElement(be.a,{md:6,xs:12,item:!0},l.a.createElement(h.a,{variant:"h6",gutterBottom:!0},"\u8f85\u8272\u8c03\u6587\u5b57"),l.a.createElement(ua.a,{value:s.palette.secondary.contrastText,onChange:function(e){u(tt({},s,{palette:tt({},s.palette,{secondary:tt({},s.palette.secondary,{contrastText:e.target.value})})}))},fullWidth:!0}),l.a.createElement("div",{className:i.picker},l.a.createElement(Va.CompactPicker,{color:s.palette.secondary.contrastText,onChangeComplete:function(e,a){u(tt({},s,{palette:tt({},s.palette,{secondary:tt({},s.palette.secondary,{contrastText:e.hex})})}))}})))),l.a.createElement(be.a,{spacing:2,md:4,xs:12},l.a.createElement(ue.a,{theme:p()},l.a.createElement("div",{className:i.statusBar,style:{backgroundColor:p().palette.primary.dark}}),l.a.createElement(E.a,{position:"static"},l.a.createElement(b.a,null,l.a.createElement(g.a,{edge:"start",className:i.menuButton,color:"inherit","aria-label":"menu"},l.a.createElement($a.a,null)),l.a.createElement(h.a,{variant:"h6",className:i.title},"Color"))),l.a.createElement("div",{style:{padding:16}},l.a.createElement(ua.a,{fullWidth:!0,color:"secondary",label:"\u6587\u5b57\u8f93\u5165"}),l.a.createElement("div",{className:i.fab,style:{paddingTop:64}},l.a.createElement(et.a,{color:"secondary","aria-label":"add"},l.a.createElement(Za.a,null)))))))),l.a.createElement(Ue.a,null,l.a.createElement(Ke.a,{onClick:t,color:"default"},"\u53d6\u6d88"),l.a.createElement(Ke.a,{onClick:function(){return c(s)},color:"primary"},"\u521b\u5efa")))}function lt(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function ct(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?lt(t,!0).forEach((function(a){Object(m.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):lt(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var it=Object(c.a)((function(e){var a;return{root:(a={},Object(m.a)(a,e.breakpoints.up("md"),{marginLeft:100}),Object(m.a)(a,"marginBottom",40),a),form:{maxWidth:500,marginTop:20,marginBottom:20},formContainer:Object(m.a)({},e.breakpoints.up("md"),{padding:"0px 24px 0 24px"}),colorContainer:{display:"flex"},colorDot:{width:20,height:20,borderRadius:"50%",marginLeft:6}}}));function ot(){var e=it(),a=Object(r.useState)(!1),t=Object(n.a)(a,2),c=t[0],i=t[1],o=Object(r.useState)({}),s=Object(n.a)(o,2),u=s[0],p=s[1],d=Object(r.useState)({themes:"{}",defaultTheme:"",home_view_method:"icon",share_view_method:"list"}),E=Object(n.a)(d,2),b=E[0],f=E[1],v=Object(r.useState)({}),O=Object(n.a)(v,2),y=O[0],N=O[1],C=Object(r.useState)({}),j=Object(n.a)(C,2),S=j[0],k=j[1],_=Object(r.useState)(!1),x=Object(n.a)(_,2),w=x[0],P=x[1];Object(r.useEffect)((function(){var e=JSON.parse(b.themes),a={};Object.keys(e).map((function(t){a[t]=JSON.stringify(e[t])})),p(e),N(a)}),[b.themes]);var D=function(e){return function(a){f(ct({},b,Object(m.a)({},e,a.target.value)))}},z=Object(Z.c)(),W=Object(r.useCallback)((function(e,a,t,n){return z(Object(ee.P)(e,a,t,n))}),[z]);Object(r.useEffect)((function(){Oe.b.post("/admin/setting",{keys:Object.keys(b)}).then((function(e){f(e.data)})).catch((function(e){W("top","right",e.message,"error")}))}),[]);return l.a.createElement("div",null,l.a.createElement("form",{onSubmit:function(e){e.preventDefault(),i(!0);var a=[];Object.keys(b).forEach((function(e){a.push({key:e,value:b[e]})})),Oe.b.patch("/admin/setting",{options:a}).then((function(e){W("top","right","\u8bbe\u7f6e\u5df2\u66f4\u6539","success")})).catch((function(e){W("top","right",e.message,"error")})).then((function(){i(!1)}))}},l.a.createElement("div",{className:e.root},l.a.createElement(h.a,{variant:"h6",gutterBottom:!0},"\u4e3b\u9898\u914d\u8272"),l.a.createElement("div",{className:e.formContainer},l.a.createElement("div",{className:e.form},l.a.createElement(Pa.a,{"aria-label":"simple table"},l.a.createElement(wa.a,null,l.a.createElement(Da.a,null,l.a.createElement(za.a,null,"\u5173\u952e\u8272"),l.a.createElement(za.a,null,"\u8272\u5f69\u914d\u7f6e"),l.a.createElement(za.a,null,"\u64cd\u4f5c"))),l.a.createElement(Wa.a,null,Object.keys(u).map((function(a){return l.a.createElement(Da.a,{key:a},l.a.createElement(za.a,{component:"th",scope:"row"},l.a.createElement("div",{className:e.colorContainer},l.a.createElement("div",{style:{backgroundColor:u[a].palette.primary.main},className:e.colorDot}),l.a.createElement("div",{style:{backgroundColor:u[a].palette.secondary.main},className:e.colorDot}))),l.a.createElement(za.a,null,l.a.createElement(ua.a,{error:S[a],helperText:S[a]&&"\u683c\u5f0f\u4e0d\u6b63\u786e",fullWidth:!0,multiline:!0,onChange:function(e){N(ct({},y,Object(m.a)({},a,e.target.value)))},onBlur:function(e){try{var t=JSON.parse(e.target.value);if(!("palette"in t)||!("primary"in t.palette)||!("main"in t.palette.primary)||!("secondary"in t.palette)||!("main"in t.palette.secondary))throw"error";p(ct({},u,Object(m.a)({},a,t)))}catch(e){return void k(ct({},S,Object(m.a)({},a,!0)))}k(ct({},S,Object(m.a)({},a,!1)))},value:y[a]})),l.a.createElement(za.a,null,l.a.createElement(g.a,{onClick:function(){return function(e){if(e!==b.defaultTheme)if(Object.keys(u).length<=1)W("top","right","\u8bf7\u81f3\u5c11\u4fdd\u7559\u4e00\u4e2a\u914d\u8272\u65b9\u6848","warning");else{var a=ct({},u);delete a[e];var t=JSON.stringify(a);f(ct({},b,{themes:t}))}else W("top","right","\u4e0d\u80fd\u5220\u9664\u9ed8\u8ba4\u914d\u8272","warning")}(a)}},l.a.createElement(Fa.a,null))))})))),l.a.createElement("div",null,l.a.createElement(Ke.a,{variant:"outlined",color:"primary",style:{marginTop:8},onClick:function(){return P(!0)}},"\u65b0\u5efa\u914d\u8272\u65b9\u6848")),l.a.createElement(ca.a,{severity:"info",style:{marginTop:8}},l.a.createElement(h.a,{variant:"body2"},"\u5b8c\u6574\u7684\u914d\u7f6e\u9879\u53ef\u5728 "," ",l.a.createElement(ja.a,{href:"https://material-ui.com/zh/customization/default-theme/",target:"_blank"},"\u9ed8\u8ba4\u4e3b\u9898 - Material-UI")," ","\u67e5\u9605\u3002"))),l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,null,l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u9ed8\u8ba4\u914d\u8272"),l.a.createElement(Ye.a,{value:b.defaultTheme,onChange:D("defaultTheme")},Object.keys(u).map((function(a){return l.a.createElement($e.a,{key:a,value:a},l.a.createElement("div",{className:e.colorContainer},l.a.createElement("div",{style:{backgroundColor:u[a].palette.primary.main},className:e.colorDot}),l.a.createElement("div",{style:{backgroundColor:u[a].palette.secondary.main},className:e.colorDot})))}))),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u7528\u6237\u672a\u6307\u5b9a\u504f\u597d\u914d\u8272\u65f6\uff0c\u7ad9\u70b9\u9ed8\u8ba4\u4f7f\u7528\u7684\u914d\u8272\u65b9\u6848"))))),l.a.createElement("div",{className:e.root},l.a.createElement(h.a,{variant:"h6",gutterBottom:!0},"\u754c\u9762"),l.a.createElement("div",{className:e.formContainer},l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,null,l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u4e2a\u4eba\u6587\u4ef6\u5217\u8868\u9ed8\u8ba4\u6837\u5f0f"),l.a.createElement(Ye.a,{value:b.home_view_method,onChange:D("home_view_method"),required:!0},l.a.createElement($e.a,{value:"icon"},"\u5927\u56fe\u6807"),l.a.createElement($e.a,{value:"smallIcon"},"\u5c0f\u56fe\u6807"),l.a.createElement($e.a,{value:"list"},"\u5217\u8868")),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u7528\u6237\u672a\u6307\u5b9a\u504f\u597d\u6837\u5f0f\u65f6\uff0c\u4e2a\u4eba\u6587\u4ef6\u9875\u9762\u5217\u8868\u9ed8\u8ba4\u6837\u5f0f")))),l.a.createElement("div",{className:e.formContainer},l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,null,l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u76ee\u5f55\u5206\u4eab\u9875\u5217\u8868\u9ed8\u8ba4\u6837\u5f0f"),l.a.createElement(Ye.a,{value:b.share_view_method,onChange:D("share_view_method"),required:!0},l.a.createElement($e.a,{value:"icon"},"\u5927\u56fe\u6807"),l.a.createElement($e.a,{value:"smallIcon"},"\u5c0f\u56fe\u6807"),l.a.createElement($e.a,{value:"list"},"\u5217\u8868")),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u7528\u6237\u672a\u6307\u5b9a\u504f\u597d\u6837\u5f0f\u65f6\uff0c\u76ee\u5f55\u5206\u4eab\u9875\u9762\u7684\u9ed8\u8ba4\u6837\u5f0f"))))),l.a.createElement("div",{className:e.root},l.a.createElement(Ke.a,{disabled:c,type:"submit",variant:"contained",color:"primary"},"\u4fdd\u5b58"))),l.a.createElement(rt,{onSubmit:function(e){if(P(!1),void 0===u[e.palette.primary.main]){var a=ct({},u,Object(m.a)({},e.palette.primary.main,e)),t=JSON.stringify(a);f(ct({},b,{themes:t}))}else W("top","right","\u4e3b\u8272\u8c03\u4e0d\u80fd\u4e0e\u5df2\u6709\u914d\u8272\u91cd\u590d","warning")},open:w,onClose:function(){return P(!1)}}))}function mt(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}var st=Object(c.a)((function(e){var a;return{root:(a={},Object(m.a)(a,e.breakpoints.up("md"),{marginLeft:100}),Object(m.a)(a,"marginBottom",40),a),form:{maxWidth:400,marginTop:20,marginBottom:20},formContainer:Object(m.a)({},e.breakpoints.up("md"),{padding:"0px 24px 0 24px"})}}));function ut(){var e=st(),a=Object(r.useState)(!1),t=Object(n.a)(a,2),c=t[0],i=t[1],o=Object(r.useState)({aria2_rpcurl:"",aria2_token:"",aria2_temp_path:"",aria2_options:"",aria2_interval:"0",aria2_call_timeout:"0"}),s=Object(n.a)(o,2),u=s[0],p=s[1],d=function(e){return function(a){p(function(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?mt(t,!0).forEach((function(a){Object(m.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):mt(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}({},u,Object(m.a)({},e,a.target.value)))}},E=Object(Z.c)(),b=Object(r.useCallback)((function(e,a,t,n){return E(Object(ee.P)(e,a,t,n))}),[E]);Object(r.useEffect)((function(){Oe.b.post("/admin/setting",{keys:Object.keys(u)}).then((function(e){p(e.data)})).catch((function(e){b("top","right",e.message,"error")}))}),[]);return l.a.createElement("div",null,l.a.createElement("form",{onSubmit:function(e){e.preventDefault(),i(!0);var a=[];Object.keys(u).forEach((function(e){a.push({key:e,value:u[e]})})),Oe.b.patch("/admin/setting",{options:a}).then((function(e){b("top","right","\u8bbe\u7f6e\u5df2\u66f4\u6539","success"),Oe.b.get("/admin/reload/aria2").then((function(e){})).catch((function(e){b("top","right",e.message,"error")})).then((function(){}))})).catch((function(e){b("top","right",e.message,"error")})).then((function(){i(!1)}))}},l.a.createElement("div",{className:e.root},l.a.createElement(h.a,{variant:"h6",gutterBottom:!0},"Aria2"),l.a.createElement("div",{className:e.formContainer},l.a.createElement("div",{className:e.form},l.a.createElement(ca.a,{severity:"info",style:{marginTop:8}},l.a.createElement(h.a,{variant:"body2"},"Cloudreve \u7684\u79bb\u7ebf\u4e0b\u8f7d\u529f\u80fd\u7531 "," ",l.a.createElement(ja.a,{href:"https://aria2.github.io/",target:"_blank"},"Aria2")," ","\u9a71\u52a8\u3002\u5982\u9700\u4f7f\u7528\uff0c\u8bf7\u5728\u540c\u4e00\u8bbe\u5907\u4e0a\u4ee5\u548c\u8fd0\u884c Cloudreve \u76f8\u540c\u7684\u7528\u6237\u8eab\u4efd\u542f\u52a8 Aria2\uff0c \u5e76\u5728 Aria2 \u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\u5f00\u542f RPC \u670d\u52a1\u3002"))),l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"RPC \u670d\u52a1\u5668\u5730\u5740"),l.a.createElement(Xe.a,{type:"url",value:u.aria2_rpcurl,onChange:d("aria2_rpcurl")}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u5305\u542b\u7aef\u53e3\u7684\u5b8c\u6574 RPC \u670d\u52a1\u5668\u5730\u5740\uff0c\u4f8b\u5982\uff1ahttp://127.0.0.1:6800/\uff0c\u7559\u7a7a\u8868\u793a\u4e0d\u542f\u7528 Aria2 \u670d\u52a1"))),l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"RPC Secret"),l.a.createElement(Xe.a,{value:u.aria2_token,onChange:d("aria2_token")}),l.a.createElement(Ve.a,{id:"component-helper-text"},"RPC \u6388\u6743\u4ee4\u724c\uff0c\u4e0e Aria2 \u914d\u7f6e\u6587\u4ef6\u4e2d\u4fdd\u6301\u4e00\u81f4\uff0c\u672a\u8bbe\u7f6e\u8bf7\u7559\u7a7a\u3002"))),l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u4e34\u65f6\u4e0b\u8f7d\u76ee\u5f55"),l.a.createElement(Xe.a,{value:u.aria2_temp_path,onChange:d("aria2_temp_path")}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u79bb\u7ebf\u4e0b\u8f7d\u4e34\u65f6\u4e0b\u8f7d\u76ee\u5f55\u7684",l.a.createElement("strong",null,"\u7edd\u5bf9\u8def\u5f84"),"\uff0cCloudreve \u8fdb\u7a0b\u9700\u8981\u6b64\u76ee\u5f55\u7684\u8bfb\u3001\u5199\u3001\u6267\u884c\u6743\u9650\u3002"))),l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u72b6\u6001\u5237\u65b0\u95f4\u9694 (\u79d2)"),l.a.createElement(Xe.a,{type:"number",inputProps:{step:1,min:1},required:!0,value:u.aria2_interval,onChange:d("aria2_interval")}),l.a.createElement(Ve.a,{id:"component-helper-text"},"Cloudreve \u5411 Aria2 \u8bf7\u6c42\u5237\u65b0\u4efb\u52a1\u72b6\u6001\u7684\u95f4\u9694\u3002"))),l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"RPC \u8c03\u7528\u8d85\u65f6 (\u79d2)"),l.a.createElement(Xe.a,{type:"number",inputProps:{step:1,min:1},required:!0,value:u.aria2_call_timeout,onChange:d("aria2_call_timeout")}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u8c03\u7528 RPC \u670d\u52a1\u65f6\u6700\u957f\u7b49\u5f85\u65f6\u95f4"))),l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u5168\u5c40\u4efb\u52a1\u53c2\u6570"),l.a.createElement(Xe.a,{multiline:!0,required:!0,value:u.aria2_options,onChange:d("aria2_options")}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u521b\u5efa\u4e0b\u8f7d\u4efb\u52a1\u65f6\u643a\u5e26\u7684\u989d\u5916\u8bbe\u7f6e\u53c2\u6570\uff0c\u4ee5 JSON \u7f16\u7801\u540e\u7684\u683c\u5f0f\u4e66\u5199\uff0c\u60a8\u53ef\u4e5f\u53ef\u4ee5\u5c06\u8fd9\u4e9b\u8bbe\u7f6e\u5199\u5728 Aria2 \u914d\u7f6e\u6587\u4ef6\u91cc\uff0c\u53ef\u7528\u53c2\u6570\u8bf7\u67e5\u9605\u5b98\u65b9\u6587\u6863"))))),l.a.createElement("div",{className:e.root},l.a.createElement(Ke.a,{disabled:c,type:"submit",variant:"contained",color:"primary"},"\u4fdd\u5b58"),l.a.createElement(Ke.a,{style:{marginLeft:8},disabled:c,onClick:function(){return i(!0),void Oe.b.post("/admin/aria2/test",{server:u.aria2_rpcurl,token:u.aria2_token}).then((function(e){b("top","right","\u8fde\u63a5\u6210\u529f\uff0cAria2 \u7248\u672c\u4e3a\uff1a"+e.data,"success")})).catch((function(e){b("top","right",e.message,"error")})).then((function(){i(!1)}))},variant:"outlined",color:"secondary"},"\u6d4b\u8bd5\u8fde\u63a5"))))}function pt(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}var dt=Object(c.a)((function(e){var a;return{root:(a={},Object(m.a)(a,e.breakpoints.up("md"),{marginLeft:100}),Object(m.a)(a,"marginBottom",40),a),form:{maxWidth:400,marginTop:20,marginBottom:20},formContainer:Object(m.a)({},e.breakpoints.up("md"),{padding:"0px 24px 0 24px"})}}));function Et(){var e=dt(),a=Object(r.useState)(!1),t=Object(n.a)(a,2),c=t[0],i=t[1],o=Object(r.useState)({gravatar_server:"",avatar_path:"",avatar_size:"",avatar_size_l:"",avatar_size_m:"",avatar_size_s:"",thumb_width:"",thumb_height:"",captcha_height:"1",captcha_width:"1",captcha_mode:"3",captcha_CaptchaLen:""}),s=Object(n.a)(o,2),u=s[0],p=s[1],d=function(e){return function(a){p(function(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?pt(t,!0).forEach((function(a){Object(m.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):pt(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}({},u,Object(m.a)({},e,a.target.value)))}},E=Object(Z.c)(),b=Object(r.useCallback)((function(e,a,t,n){return E(Object(ee.P)(e,a,t,n))}),[E]);Object(r.useEffect)((function(){Oe.b.post("/admin/setting",{keys:Object.keys(u)}).then((function(e){p(e.data)})).catch((function(e){b("top","right",e.message,"error")}))}),[]);return l.a.createElement("div",null,l.a.createElement("form",{onSubmit:function(e){e.preventDefault(),i(!0);var a=[];Object.keys(u).forEach((function(e){a.push({key:e,value:u[e]})})),Oe.b.patch("/admin/setting",{options:a}).then((function(e){b("top","right","\u8bbe\u7f6e\u5df2\u66f4\u6539","success")})).catch((function(e){b("top","right",e.message,"error")})).then((function(){i(!1)}))}},l.a.createElement("div",{className:e.root},l.a.createElement(h.a,{variant:"h6",gutterBottom:!0},"\u5934\u50cf"),l.a.createElement("div",{className:e.formContainer},l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"Gravatar \u670d\u52a1\u5668"),l.a.createElement(Xe.a,{type:"url",value:u.gravatar_server,onChange:d("gravatar_server"),required:!0}),l.a.createElement(Ve.a,{id:"component-helper-text"},"Gravatar \u670d\u52a1\u5668\u5730\u5740\uff0c\u53ef\u9009\u62e9\u4f7f\u7528\u56fd\u5185\u955c\u50cf"))),l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u5934\u50cf\u5b58\u50a8\u8def\u5f84"),l.a.createElement(Xe.a,{value:u.avatar_path,onChange:d("avatar_path"),required:!0}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u7528\u6237\u4e0a\u4f20\u81ea\u5b9a\u4e49\u5934\u50cf\u7684\u5b58\u50a8\u8def\u5f84"))),l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(ha,{value:u.avatar_size,onChange:d("avatar_size"),required:!0,min:0,max:2147483647,label:"\u5934\u50cf\u6587\u4ef6\u5927\u5c0f\u9650\u5236"}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u7528\u6237\u53ef\u4e0a\u4f20\u5934\u50cf\u6587\u4ef6\u7684\u6700\u5927\u5927\u5c0f"))),l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,null,l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u5c0f\u5934\u50cf\u5c3a\u5bf8"),l.a.createElement(Xe.a,{type:"number",inputProps:{min:1,step:1},value:u.avatar_size_s,onChange:d("avatar_size_s"),required:!0}))),l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,null,l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u4e2d\u5934\u50cf\u5c3a\u5bf8"),l.a.createElement(Xe.a,{type:"number",inputProps:{min:1,step:1},value:u.avatar_size_m,onChange:d("avatar_size_m"),required:!0}))),l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,null,l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u5927\u5934\u50cf\u5c3a\u5bf8"),l.a.createElement(Xe.a,{type:"number",inputProps:{min:1,step:1},value:u.avatar_size_l,onChange:d("avatar_size_l"),required:!0}))))),l.a.createElement("div",{className:e.root},l.a.createElement(h.a,{variant:"h6",gutterBottom:!0},"\u7f29\u7565\u56fe"),l.a.createElement("div",{className:e.formContainer},l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,null,l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u5bbd\u5ea6"),l.a.createElement(Xe.a,{type:"number",inputProps:{min:1,step:1},value:u.thumb_width,onChange:d("thumb_width"),required:!0})))),l.a.createElement("div",{className:e.formContainer},l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,null,l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u9ad8\u5ea6"),l.a.createElement(Xe.a,{type:"number",inputProps:{min:1,step:1},value:u.thumb_height,onChange:d("thumb_height"),required:!0}))))),l.a.createElement("div",{className:e.root},l.a.createElement(h.a,{variant:"h6",gutterBottom:!0},"\u9a8c\u8bc1\u7801"),l.a.createElement("div",{className:e.formContainer},l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,null,l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u5bbd\u5ea6"),l.a.createElement(Xe.a,{type:"number",inputProps:{min:1,step:1},value:u.captcha_width,onChange:d("captcha_width"),required:!0}))),l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,null,l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u9ad8\u5ea6"),l.a.createElement(Xe.a,{type:"number",inputProps:{min:1,step:1},value:u.captcha_height,onChange:d("captcha_height"),required:!0}))),l.a.createElement("div",{className:e.form},l.a.createElement(Qe.a,null,l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u6a21\u5f0f"),l.a.createElement(Ye.a,{value:u.captcha_mode,onChange:d("captcha_mode"),required:!0},l.a.createElement($e.a,{value:"0"},"\u6570\u5b57"),l.a.createElement($e.a,{value:"1"},"\u5b57\u6bcd"),l.a.createElement($e.a,{value:"2"},"\u7b97\u6570"),l.a.createElement($e.a,{value:"3"},"\u6570\u5b57+\u5b57\u6bcd")),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u9a8c\u8bc1\u7801\u7684\u5f62\u5f0f"))))),l.a.createElement("div",{className:e.root},l.a.createElement(Ke.a,{disabled:c,type:"submit",variant:"contained",color:"primary"},"\u4fdd\u5b58"))))}var bt=t(5275),ft=t(46),ht=t(5809),vt=t(5262),gt=t(5797),Ot=t(5798),yt=t(5266),Nt=Object(c.a)((function(e){return{cardContainer:{display:"flex"},cover:{width:100,height:60},card:{},content:{flex:"1 0 auto"},bg:{backgroundColor:e.palette.background.default,padding:"24px 24px"}}})),Ct=[{name:"\u672c\u673a\u5b58\u50a8",img:"local.png",path:"/admin/policy/add/local"},{name:"\u4ece\u673a\u5b58\u50a8",img:"remote.png",path:"/admin/policy/add/remote"},{name:"\u4e03\u725b",img:"qiniu.png",path:"/admin/policy/add/qiniu"},{name:"\u963f\u91cc\u4e91 OSS",img:"oss.png",path:"/admin/policy/add/oss"},{name:"\u53c8\u62cd\u4e91",img:"upyun.png",path:"/admin/policy/add/upyun"},{name:"\u817e\u8baf\u4e91 COS",img:"cos.png",path:"/admin/policy/add/cos"},{name:"OneDrive",img:"onedrive.png",path:"/admin/policy/add/onedrive"}];function jt(e){var a=e.open,t=e.onClose,n=Nt(),r=Object($.g)();return l.a.createElement(Ae.a,{open:a,onClose:t,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",maxWidth:"sm",fullWidth:!0},l.a.createElement(Te.a,{id:"alert-dialog-title"},"\u9009\u62e9\u5b58\u50a8\u65b9\u5f0f"),l.a.createElement(Be.a,{dividers:!0,className:n.bg},l.a.createElement(be.a,{container:!0,spacing:2},Ct.map((function(e){return l.a.createElement(be.a,{item:!0,sm:12,md:6},l.a.createElement(vt.a,{className:n.card},l.a.createElement(gt.a,{onClick:function(){r.push(e.path),t()},className:n.cardContainer},l.a.createElement(Ot.a,{className:n.cover,image:"/static/img/"+e.img}),l.a.createElement(yt.a,{className:n.content},l.a.createElement(h.a,{variant:"subtitle1",color:"textSecondary"},e.name)))))})))),l.a.createElement(Ue.a,null,l.a.createElement(Ke.a,{onClick:t,color:"primary"},"\u53d6\u6d88")))}var St=t(5799),kt=t(60),_t=t(340),xt=Object(c.a)((function(e){var a;return{root:(a={},Object(m.a)(a,e.breakpoints.up("md"),{marginLeft:100}),Object(m.a)(a,"marginBottom",40),a),content:{padding:e.spacing(2)},container:{overflowX:"auto"},tableContainer:{marginTop:16},header:{display:"flex",justifyContent:"space-between"},headerRight:{}}})),wt=[{id:"#",label:"#",minWidth:50},{id:"name",label:"\u540d\u79f0",minWidth:170},{id:"type",label:"\u7c7b\u578b",minWidth:170},{id:"count",label:"\u4e0b\u5c5e\u6587\u4ef6\u6570",minWidth:50,align:"right"},{id:"size",label:"\u6570\u636e\u91cf",minWidth:100,align:"right"},{id:"action",label:"\u64cd\u4f5c",minWidth:170,align:"right"}];function Pt(){var e=xt(),a=Object(r.useState)(!1),t=Object(n.a)(a,2),c=(t[0],t[1],Object(r.useState)(0)),i=Object(n.a)(c,2),o=(i[0],i[1],Object(r.useState)([])),m=Object(n.a)(o,2),s=m[0],u=m[1],p=Object(r.useState)([]),d=Object(n.a)(p,2),E=d[0],b=d[1],f=Object(r.useState)(1),h=Object(n.a)(f,2),v=h[0],O=h[1],y=Object(r.useState)(10),N=Object(n.a)(y,2),C=N[0],j=N[1],S=Object(r.useState)(0),k=Object(n.a)(S,2),_=k[0],x=k[1],w=Object(r.useState)(!1),P=Object(n.a)(w,2),D=P[0],z=P[1],W=Object(r.useState)("all"),F=Object(n.a)(W,2),I=F[0],q=F[1],R=l.a.useState(null),L=Object(n.a)(R,2),T=L[0],A=L[1],B=l.a.useState(0),M=Object(n.a)(B,2),U=M[0],K=M[1],H=Object($.h)(),J=Object($.g)(),G=new URLSearchParams(Object($.h)().search),Q=function(){A(null)};Object(r.useEffect)((function(){"0"===G.get("code")?Y("top","right","\u6388\u6743\u6210\u529f","success"):G.get("msg")&&""!==G.get("msg")&&Y("top","right",G.get("msg")+", "+G.get("err"),"warning")}),[H]),Object(r.useEffect)((function(){X()}),[v,C,I]);var X=function(){Oe.b.post("/admin/policy/list",{page:v,page_size:C,order_by:"id desc",conditions:"all"===I?{}:{type:I}}).then((function(e){u(e.data.items),b(e.data.statics),x(e.data.total)})).catch((function(e){Y("top","right",e.message,"error")}))},V=Object(Z.c)(),Y=Object(r.useCallback)((function(e,a,t,n){return V(Object(ee.P)(e,a,t,n))}),[V]),ae=Boolean(T);return l.a.createElement("div",null,l.a.createElement(jt,{open:D,onClose:function(){return z(!1)}}),l.a.createElement("div",{className:e.header},l.a.createElement(Ke.a,{color:"primary",onClick:function(){return z(!0)},variant:"contained"},"\u6dfb\u52a0\u5b58\u50a8\u7b56\u7565"),l.a.createElement("div",{className:e.headerRight},l.a.createElement(Ye.a,{style:{marginRight:8},value:I,onChange:function(e){return q(e.target.value)}},l.a.createElement($e.a,{value:"all"},"\u5168\u90e8"),l.a.createElement($e.a,{value:"local"},"\u672c\u673a"),l.a.createElement($e.a,{value:"remote"},"\u4ece\u673a"),l.a.createElement($e.a,{value:"qiniu"},"\u4e03\u725b"),l.a.createElement($e.a,{value:"upyun"},"\u53c8\u62cd\u4e91"),l.a.createElement($e.a,{value:"oss"},"\u963f\u91cc\u4e91 OSS"),l.a.createElement($e.a,{value:"cos"},"\u817e\u8baf\u4e91 COS"),l.a.createElement($e.a,{value:"onedrive"},"OneDrive")),l.a.createElement(Ke.a,{color:"primary",onClick:function(){return X()},variant:"outlined"},"\u5237\u65b0"))),l.a.createElement(fe.a,{square:!0,className:e.tableContainer},l.a.createElement(bt.a,{className:e.container},l.a.createElement(Pa.a,{"aria-label":"sticky table",size:"small"},l.a.createElement(wa.a,null,l.a.createElement(Da.a,{style:{height:52}},wt.map((function(e){return l.a.createElement(za.a,{key:e.id,align:e.align,style:{minWidth:e.minWidth}},e.label)})))),l.a.createElement(Wa.a,null,s.map((function(e){return l.a.createElement(Da.a,{hover:!0,key:e.ID},l.a.createElement(za.a,null,e.ID),l.a.createElement(za.a,null,e.Name),l.a.createElement(za.a,null,void 0!==ft.i[e.Type]&&ft.i[e.Type]),l.a.createElement(za.a,{align:"right"},void 0!==E[e.ID]&&E[e.ID][0].toLocaleString()),l.a.createElement(za.a,{align:"right"},void 0!==E[e.ID]&&Object(Ia.q)(E[e.ID][1])),l.a.createElement(za.a,{align:"right"},l.a.createElement(kt.a,{title:"\u5220\u9664"},l.a.createElement(g.a,{onClick:function(){return a=e.ID,void Oe.b.delete("/admin/policy/"+a).then((function(e){X(),Y("top","right","\u5b58\u50a8\u7b56\u7565\u5df2\u5220\u9664","success")})).catch((function(e){Y("top","right",e.message,"error")}));var a},size:"small"},l.a.createElement(Fa.a,null))),l.a.createElement(kt.a,{title:"\u7f16\u8f91"},l.a.createElement(g.a,{onClick:function(a){K(e.ID),A(a.currentTarget)},size:"small"},l.a.createElement(St.a,null)))))}))))),l.a.createElement(ht.a,{rowsPerPageOptions:[10,25,100],component:"div",count:_,rowsPerPage:C,page:v-1,onChangePage:function(e,a){return O(a+1)},onChangeRowsPerPage:function(e){j(e.target.value),O(1)}})),l.a.createElement(_t.a,{open:ae,anchorEl:T,onClose:Q,keepMounted:!0},l.a.createElement($e.a,{onClick:function(e){Q(),J.push("/admin/policy/edit/pro/"+U)}},"\u4e13\u5bb6\u6a21\u5f0f\u7f16\u8f91"),l.a.createElement($e.a,{onClick:function(e){Q(),J.push("/admin/policy/edit/guide/"+U)}},"\u5411\u5bfc\u6a21\u5f0f\u7f16\u8f91")))}var Dt=t(5810),zt=t(5808),Wt=t(5800),Ft=t(5269),It=t(5289),qt=t(5246),Rt=Object(c.a)((function(e){return{}}));function Lt(e){var a=e.isFile,t=e.open,n=e.onClose,r=e.isSlave;Rt();return l.a.createElement(Ae.a,{open:t,onClose:n,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},l.a.createElement(Te.a,{id:"alert-dialog-title"},a?"\u6587\u4ef6\u540d\u9b54\u6cd5\u53d8\u91cf":"\u8def\u5f84\u9b54\u6cd5\u53d8\u91cf"),l.a.createElement(Be.a,null,l.a.createElement(bt.a,null,l.a.createElement(Pa.a,{size:"small","aria-label":"a dense table"},l.a.createElement(wa.a,null,l.a.createElement(Da.a,null,l.a.createElement(za.a,null,"\u9b54\u6cd5\u53d8\u91cf"),l.a.createElement(za.a,null,"\u63cf\u8ff0"),l.a.createElement(za.a,null,"\u793a\u4f8b"))),l.a.createElement(Wa.a,null,l.a.createElement(Da.a,null,l.a.createElement(za.a,{component:"th",scope:"row"},"{randomkey16}"),l.a.createElement(za.a,null,"16\u4f4d\u968f\u673a\u5b57\u7b26"),l.a.createElement(za.a,null,"N6IimT5XZP324ACK")),l.a.createElement(Da.a,null,l.a.createElement(za.a,{component:"th",scope:"row"},"{randomkey8}"),l.a.createElement(za.a,null,"8\u4f4d\u968f\u673a\u5b57\u7b26"),l.a.createElement(za.a,null,"gWz78q30")),l.a.createElement(Da.a,null,l.a.createElement(za.a,{component:"th",scope:"row"},"{timestamp}"),l.a.createElement(za.a,null,"\u79d2\u7ea7\u65f6\u95f4\u6233"),l.a.createElement(za.a,null,"1582692933")),l.a.createElement(Da.a,null,l.a.createElement(za.a,{component:"th",scope:"row"},"{timestamp_nano}"),l.a.createElement(za.a,null,"\u7eb3\u79d2\u7ea7\u65f6\u95f4\u6233"),l.a.createElement(za.a,null,"1582692933231834600")),!r&&l.a.createElement(Da.a,null,l.a.createElement(za.a,{component:"th",scope:"row"},"{uid}"),l.a.createElement(za.a,null,"\u7528\u6237ID"),l.a.createElement(za.a,null,"1")),a&&l.a.createElement(Da.a,null,l.a.createElement(za.a,{component:"th",scope:"row"},"{originname}"),l.a.createElement(za.a,null,"\u539f\u59cb\u6587\u4ef6\u540d"),l.a.createElement(za.a,null,"MyPico.mp4")),!a&&!r&&l.a.createElement(Da.a,null,l.a.createElement(za.a,{component:"th",scope:"row"},"{path}"),l.a.createElement(za.a,null,"\u7528\u6237\u4e0a\u4f20\u8def\u5f84"),l.a.createElement(za.a,null,"/\u6211\u7684\u6587\u4ef6/\u5b66\u4e60\u8d44\u6599/")),l.a.createElement(Da.a,null,l.a.createElement(za.a,{component:"th",scope:"row"},"{date}"),l.a.createElement(za.a,null,"\u65e5\u671f"),l.a.createElement(za.a,null,"20060102")),l.a.createElement(Da.a,null,l.a.createElement(za.a,{component:"th",scope:"row"},"{datetime}"),l.a.createElement(za.a,null,"\u65e5\u671f\u65f6\u95f4"),l.a.createElement(za.a,null,"20060102150405")),l.a.createElement(Da.a,null,l.a.createElement(za.a,{component:"th",scope:"row"},"{year}"),l.a.createElement(za.a,null,"\u5e74\u4efd"),l.a.createElement(za.a,null,"2006")),l.a.createElement(Da.a,null,l.a.createElement(za.a,{component:"th",scope:"row"},"{month}"),l.a.createElement(za.a,null,"\u6708\u4efd"),l.a.createElement(za.a,null,"01")),l.a.createElement(Da.a,null,l.a.createElement(za.a,{component:"th",scope:"row"},"{day}"),l.a.createElement(za.a,null,"\u65e5"),l.a.createElement(za.a,null,"02")),l.a.createElement(Da.a,null,l.a.createElement(za.a,{component:"th",scope:"row"},"{hour}"),l.a.createElement(za.a,null,"\u5c0f\u65f6"),l.a.createElement(za.a,null,"15")),l.a.createElement(Da.a,null,l.a.createElement(za.a,{component:"th",scope:"row"},"{minute}"),l.a.createElement(za.a,null,"\u5206\u949f"),l.a.createElement(za.a,null,"04")),l.a.createElement(Da.a,null,l.a.createElement(za.a,{component:"th",scope:"row"},"{second}"),l.a.createElement(za.a,null,"\u79d2"),l.a.createElement(za.a,null,"05")))))),l.a.createElement(Ue.a,null,l.a.createElement(Ke.a,{onClick:n,color:"primary"},"\u5173\u95ed")))}function Tt(e){var a=e.onChange,t=e.value,c=e.required,i=e.label,o=Object(r.useState)(""),m=Object(n.a)(o,2),s=m[0],u=m[1],p=Object(r.useState)("https://"),d=Object(n.a)(p,2),E=d[0],b=d[1],f=Object(r.useState)(),h=Object(n.a)(f,2),v=h[0],g=h[1];return Object(r.useState)((function(){t.startsWith("https://")?(u(t.replace("https://","")),b("https://")):""!==t&&(u(t.replace("http://","")),b("http://"))}),[t]),Object(r.useEffect)((function(){"http://"===E&&"https:"===window.location.protocol?g("\u60a8\u5f53\u524d\u7ad9\u70b9\u542f\u7528\u4e86 HTTPS \uff0c\u6b64\u5904\u9009\u62e9 HTTP \u53ef\u80fd\u4f1a\u5bfc\u81f4\u65e0\u6cd5\u8fde\u63a5\u3002"):g("")}),[E]),l.a.createElement(Qe.a,null,l.a.createElement(Ge.a,{htmlFor:"component-helper"},i),l.a.createElement(Xe.a,{error:""!==v,value:s,onChange:function(e){u(e.target.value),a({target:{value:E+e.target.value}})},required:c,startAdornment:l.a.createElement(ba.a,{position:"start"},l.a.createElement(Ye.a,{value:E,onChange:function(e){b(e.target.value),a({target:{value:e.target.value+s}})}},l.a.createElement($e.a,{value:"http://"},"http://"),l.a.createElement($e.a,{value:"https://"},"https://")))}),""!==v&&l.a.createElement(Ve.a,{error:""!==v},v))}function At(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function Bt(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?At(t,!0).forEach((function(a){Object(m.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):At(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var Mt=Object(c.a)((function(e){return{stepContent:{padding:"16px 32px 16px 32px"},form:{maxWidth:400,marginTop:20},formContainer:Object(m.a)({},e.breakpoints.up("md"),{padding:"0px 24px 0 24px"}),subStepContainer:{display:"flex",marginBottom:20,padding:10,transition:e.transitions.create("background-color",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),"&:focus-within":{backgroundColor:e.palette.background.default}},stepNumber:{width:20,height:20,backgroundColor:Object(u.e)(e.palette.secondary.light,.2),color:e.palette.secondary.contrastText,textAlign:"center",borderRadius:" 50%"},stepNumberContainer:{marginRight:10},stepFooter:{marginTop:32},button:{marginRight:e.spacing(1)}}})),Ut=[{title:"\u4e0a\u4f20\u8def\u5f84",optional:!1},{title:"\u76f4\u94fe\u8bbe\u7f6e",optional:!1},{title:"\u4e0a\u4f20\u9650\u5236",optional:!1},{title:"\u5b8c\u6210",optional:!1}];function Kt(e){var a,t=Mt(),c=Object($.g)(),i=Object(r.useState)(0),o=Object(n.a)(i,2),s=o[0],u=o[1],p=Object(r.useState)(!1),d=Object(n.a)(p,2),E=d[0],b=d[1],f=l.a.useState(new Set),v=Object(n.a)(f,2),g=v[0],O=(v[1],Object(r.useState)("")),y=Object(n.a)(O,2),N=y[0],C=y[1],j=Object(r.useState)("false"),S=Object(n.a)(j,2),k=S[0],_=S[1],x=Object(r.useState)(e.policy?e.policy:{Type:"local",Name:"",DirNameRule:"uploads/{uid}/{path}",AutoRename:"true",FileNameRule:"{randomkey8}_{originname}",IsOriginLinkEnable:"false",BaseURL:"",IsPrivate:"true",MaxSize:"0",OptionsSerialized:{file_type:""}}),w=Object(n.a)(x,2),P=w[0],D=w[1],z=function(e){return function(a){D(Bt({},P,Object(m.a)({},e,a.target.value)))}},W=Object(Z.c)(),F=Object(r.useCallback)((function(e,a,t,n){return W(Object(ee.P)(e,a,t,n))}),[W]);return l.a.createElement("div",null,l.a.createElement(h.a,{variant:"h6"},e.policy?"\u4fee\u6539":"\u6dfb\u52a0","\u672c\u673a\u5b58\u50a8\u7b56\u7565"),l.a.createElement(Dt.a,{activeStep:s},Ut.map((function(e,a){var t,n={},r={};return e.optional&&(r.optional=l.a.createElement(h.a,{variant:"caption"},"\u53ef\u9009")),t=a,g.has(t)&&(n.completed=!1),l.a.createElement(Wt.a,Object.assign({key:e.title},n),l.a.createElement(zt.a,r,e.title))}))),0===s&&l.a.createElement("form",{className:t.stepContent,onSubmit:function(e){e.preventDefault(),b(!0),Oe.b.post("/admin/policy/test/path",{path:P.DirNameRule}).then((function(e){u(1)})).catch((function(e){F("top","right",e.message,"error")})).then((function(){b(!1)}))}},l.a.createElement("div",{className:t.subStepContainer},l.a.createElement("div",{className:t.stepNumberContainer},l.a.createElement("div",{className:t.stepNumber},"1")),l.a.createElement("div",{className:t.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u8bf7\u5728\u4e0b\u65b9\u8f93\u5165\u6587\u4ef6\u7684\u5b58\u50a8\u76ee\u5f55\u8def\u5f84\uff0c\u53ef\u4ee5\u4e3a\u7edd\u5bf9\u8def\u5f84\u6216\u76f8\u5bf9\u8def\u5f84\uff08\u76f8\u5bf9\u4e8e Cloudreve\uff09\u3002\u8def\u5f84\u4e2d\u53ef\u4ee5\u4f7f\u7528\u9b54\u6cd5\u53d8\u91cf\uff0c\u6587\u4ef6\u5728\u4e0a\u4f20\u65f6\u4f1a\u81ea\u52a8\u66ff\u6362\u8fd9\u4e9b\u53d8\u91cf\u4e3a\u76f8\u5e94\u503c\uff1b \u53ef\u7528\u9b54\u6cd5\u53d8\u91cf\u53ef\u53c2\u8003"," ",l.a.createElement(ja.a,{color:"secondary",href:"javascript:void()",onClick:function(){return C("path")}},"\u8def\u5f84\u9b54\u6cd5\u53d8\u91cf\u5217\u8868")," ","\u3002"),l.a.createElement("div",{className:t.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u5b58\u50a8\u76ee\u5f55"),l.a.createElement(Xe.a,{required:!0,value:P.DirNameRule,onChange:z("DirNameRule")}))))),l.a.createElement("div",{className:t.subStepContainer},l.a.createElement("div",{className:t.stepNumberContainer},l.a.createElement("div",{className:t.stepNumber},"2")),l.a.createElement("div",{className:t.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u662f\u5426\u9700\u8981\u5bf9\u5b58\u50a8\u7684\u7269\u7406\u6587\u4ef6\u8fdb\u884c\u91cd\u547d\u540d\uff1f\u6b64\u5904\u7684\u91cd\u547d\u540d\u4e0d\u4f1a\u5f71\u54cd\u6700\u7ec8\u5448\u73b0\u7ed9\u7528\u6237\u7684 \u6587\u4ef6\u540d\u3002\u6587\u4ef6\u540d\u4e5f\u53ef\u4f7f\u7528\u9b54\u6cd5\u53d8\u91cf\uff0c \u53ef\u7528\u9b54\u6cd5\u53d8\u91cf\u53ef\u53c2\u8003"," ",l.a.createElement(ja.a,{color:"secondary",href:"javascript:void()",onClick:function(){return C("file")}},"\u6587\u4ef6\u540d\u9b54\u6cd5\u53d8\u91cf\u5217\u8868")," ","\u3002"),l.a.createElement("div",{className:t.form},l.a.createElement(Qe.a,{required:!0,component:"fieldset"},l.a.createElement(Ft.a,{"aria-label":"gender",name:"gender1",value:P.AutoRename,onChange:z("AutoRename"),row:!0},l.a.createElement(ra.a,{value:"true",control:l.a.createElement(It.a,{color:"primary"}),label:"\u5f00\u542f\u91cd\u547d\u540d"}),l.a.createElement(ra.a,{value:"false",control:l.a.createElement(It.a,{color:"primary"}),label:"\u4e0d\u5f00\u542f"})))),l.a.createElement(qt.a,{in:"true"===P.AutoRename},l.a.createElement("div",{className:t.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u547d\u540d\u89c4\u5219"),l.a.createElement(Xe.a,{required:"true"===P.AutoRename,value:P.FileNameRule,onChange:z("FileNameRule")})))))),l.a.createElement("div",{className:t.stepFooter},l.a.createElement(Ke.a,{disabled:E,type:"submit",variant:"contained",color:"primary"},"\u4e0b\u4e00\u6b65"))),1===s&&l.a.createElement("form",{className:t.stepContent,onSubmit:function(e){e.preventDefault(),u(2)}},l.a.createElement("div",{className:t.subStepContainer},l.a.createElement("div",{className:t.stepNumberContainer},l.a.createElement("div",{className:t.stepNumber},"1")),l.a.createElement("div",{className:t.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u662f\u5426\u5141\u8bb8\u83b7\u53d6\u6587\u4ef6\u6c38\u4e45\u76f4\u94fe\uff1f",l.a.createElement("br",null),"\u5f00\u542f\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u8bf7\u6c42\u83b7\u5f97\u80fd\u76f4\u63a5\u8bbf\u95ee\u5230\u6587\u4ef6\u5185\u5bb9\u7684\u76f4\u94fe\uff0c\u9002\u7528\u4e8e\u56fe\u5e8a\u5e94\u7528\u6216\u81ea\u7528\u3002"),l.a.createElement("div",{className:t.form},l.a.createElement(Qe.a,{required:!0,component:"fieldset"},l.a.createElement(Ft.a,{required:!0,value:P.IsOriginLinkEnable,onChange:z("IsOriginLinkEnable"),row:!0},l.a.createElement(ra.a,{value:"true",control:l.a.createElement(It.a,{color:"primary"}),label:"\u5141\u8bb8"}),l.a.createElement(ra.a,{value:"false",control:l.a.createElement(It.a,{color:"primary"}),label:"\u7981\u6b62"})))))),l.a.createElement(qt.a,{in:"true"===P.IsOriginLinkEnable},l.a.createElement("div",{className:t.subStepContainer},l.a.createElement("div",{className:t.stepNumberContainer},l.a.createElement("div",{className:t.stepNumber},"2")),l.a.createElement("div",{className:t.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u662f\u5426\u8981\u5bf9\u4e0b\u8f7d/\u76f4\u94fe\u4f7f\u7528 CDN\uff1f",l.a.createElement("br",null),"\u5f00\u542f\u540e\uff0c\u7528\u6237\u8bbf\u95ee\u6587\u4ef6\u65f6\u7684 URL \u4e2d\u7684\u57df\u540d\u90e8\u5206\u4f1a\u88ab\u66ff\u6362\u4e3a CDN \u57df\u540d\u3002"),l.a.createElement("div",{className:t.form},l.a.createElement(Qe.a,{required:!0,component:"fieldset"},l.a.createElement(Ft.a,{required:!0,value:k,onChange:function(e){"false"===e.target.value&&D(Bt({},P,{BaseURL:""})),_(e.target.value)},row:!0},l.a.createElement(ra.a,{value:"true",control:l.a.createElement(It.a,{color:"primary"}),label:"\u4f7f\u7528"}),l.a.createElement(ra.a,{value:"false",control:l.a.createElement(It.a,{color:"primary"}),label:"\u4e0d\u4f7f\u7528"})))))),l.a.createElement(qt.a,{in:"true"===k},l.a.createElement("div",{className:t.subStepContainer},l.a.createElement("div",{className:t.stepNumberContainer},l.a.createElement("div",{className:t.stepNumber},"3")),l.a.createElement("div",{className:t.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u9009\u62e9\u534f\u8bae\u5e76\u586b\u5199 CDN \u57df\u540d"),l.a.createElement("div",{className:t.form},l.a.createElement(Tt,{value:P.BaseURL,onChange:z("BaseURL"),required:"true"===P.IsOriginLinkEnable&&"true"===k,label:"CDN \u524d\u7f00"})))))),l.a.createElement("div",{className:t.stepFooter},l.a.createElement(Ke.a,{color:"default",className:t.button,onClick:function(){return u(0)}},"\u4e0a\u4e00\u6b65")," ",l.a.createElement(Ke.a,{disabled:E,type:"submit",variant:"contained",color:"primary"},"\u4e0b\u4e00\u6b65"))),2===s&&l.a.createElement("form",{className:t.stepContent,onSubmit:function(e){e.preventDefault(),u(3)}},l.a.createElement("div",{className:t.subStepContainer},l.a.createElement("div",{className:t.stepNumberContainer},l.a.createElement("div",{className:t.stepNumber},"1")),l.a.createElement("div",{className:t.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u662f\u5426\u9650\u5236\u4e0a\u4f20\u7684\u5355\u6587\u4ef6\u5927\u5c0f\uff1f"),l.a.createElement("div",{className:t.form},l.a.createElement(Qe.a,{required:!0,component:"fieldset"},l.a.createElement(Ft.a,{required:!0,value:"0"===P.MaxSize?"false":"true",onChange:function(e){"true"===e.target.value?D(Bt({},P,{MaxSize:"10485760"})):D(Bt({},P,{MaxSize:"0"}))},row:!0},l.a.createElement(ra.a,{value:"true",control:l.a.createElement(It.a,{color:"primary"}),label:"\u9650\u5236"}),l.a.createElement(ra.a,{value:"false",control:l.a.createElement(It.a,{color:"primary"}),label:"\u4e0d\u9650\u5236"})))))),l.a.createElement(qt.a,{in:"0"!==P.MaxSize},l.a.createElement("div",{className:t.subStepContainer},l.a.createElement("div",{className:t.stepNumberContainer},l.a.createElement("div",{className:t.stepNumber},"2")),l.a.createElement("div",{className:t.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u8f93\u5165\u9650\u5236\uff1a"),l.a.createElement("div",{className:t.form},l.a.createElement(ha,{value:P.MaxSize,onChange:z("MaxSize"),min:0,max:0x8000000000000000,label:"\u5355\u6587\u4ef6\u5927\u5c0f\u9650\u5236"}))))),l.a.createElement("div",{className:t.subStepContainer},l.a.createElement("div",{className:t.stepNumberContainer},l.a.createElement("div",{className:t.stepNumber},"0"!==P.MaxSize?"3":"2")),l.a.createElement("div",{className:t.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u662f\u5426\u9650\u5236\u4e0a\u4f20\u6587\u4ef6\u6269\u5c55\u540d\uff1f"),l.a.createElement("div",{className:t.form},l.a.createElement(Qe.a,{required:!0,component:"fieldset"},l.a.createElement(Ft.a,{required:!0,value:""===P.OptionsSerialized.file_type?"false":"true",onChange:function(e){"true"===e.target.value?D(Bt({},P,{OptionsSerialized:Bt({},P.OptionsSerialized,{file_type:"jpg,png,mp4,zip,rar"})})):D(Bt({},P,{OptionsSerialized:Bt({},P.OptionsSerialized,{file_type:""})}))},row:!0},l.a.createElement(ra.a,{value:"true",control:l.a.createElement(It.a,{color:"primary"}),label:"\u9650\u5236"}),l.a.createElement(ra.a,{value:"false",control:l.a.createElement(It.a,{color:"primary"}),label:"\u4e0d\u9650\u5236"})))))),l.a.createElement(qt.a,{in:""!==P.OptionsSerialized.file_type},l.a.createElement("div",{className:t.subStepContainer},l.a.createElement("div",{className:t.stepNumberContainer},l.a.createElement("div",{className:t.stepNumber},"0"!==P.MaxSize?"4":"3")),l.a.createElement("div",{className:t.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u8f93\u5165\u5141\u8bb8\u4e0a\u4f20\u7684\u6587\u4ef6\u6269\u5c55\u540d\uff0c\u591a\u4e2a\u8bf7\u4ee5\u534a\u89d2\u9017\u53f7 , \u9694\u5f00"),l.a.createElement("div",{className:t.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u6269\u5c55\u540d\u5217\u8868"),l.a.createElement(Xe.a,{value:P.OptionsSerialized.file_type,onChange:(a="file_type",function(e){D(Bt({},P,{OptionsSerialized:Bt({},P.OptionsSerialized,Object(m.a)({},a,e.target.value))}))})})))))),l.a.createElement("div",{className:t.stepFooter},l.a.createElement(Ke.a,{color:"default",className:t.button,onClick:function(){return u(1)}},"\u4e0a\u4e00\u6b65")," ",l.a.createElement(Ke.a,{disabled:E,type:"submit",variant:"contained",color:"primary"},"\u4e0b\u4e00\u6b65"))),3===s&&l.a.createElement("form",{className:t.stepContent,onSubmit:function(a){a.preventDefault(),b(!0);var t=Bt({},P);t.OptionsSerialized=Bt({},t.OptionsSerialized),"false"!==k&&"false"!==P.IsOriginLinkEnable||(t.BaseURL=""),t.AutoRename="true"===t.AutoRename,t.IsOriginLinkEnable="true"===t.IsOriginLinkEnable,t.MaxSize=parseInt(t.MaxSize),t.IsPrivate="true"===t.IsPrivate,t.OptionsSerialized.file_type=t.OptionsSerialized.file_type.split(","),1===t.OptionsSerialized.file_type.length&&""===t.OptionsSerialized.file_type[0]&&(t.OptionsSerialized.file_type=[]),Oe.b.post("/admin/policy",{policy:t}).then((function(a){F("top","right","\u5b58\u50a8\u7b56\u7565\u5df2"+(e.policy?"\u4fdd\u5b58":"\u6dfb\u52a0"),"success"),u(4)})).catch((function(e){F("top","right",e.message,"error")})).then((function(){b(!1)})),b(!1)}},l.a.createElement("div",{className:t.subStepContainer},l.a.createElement("div",{className:t.stepNumberContainer}),l.a.createElement("div",{className:t.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u6700\u540e\u4e00\u6b65\uff0c\u4e3a\u6b64\u5b58\u50a8\u7b56\u7565\u547d\u540d\uff1a"),l.a.createElement("div",{className:t.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u5b58\u50a8\u7b56\u7565\u540d"),l.a.createElement(Xe.a,{required:!0,value:P.Name,onChange:z("Name")}))))),l.a.createElement("div",{className:t.stepFooter},l.a.createElement(Ke.a,{color:"default",className:t.button,onClick:function(){return u(2)}},"\u4e0a\u4e00\u6b65")," ",l.a.createElement(Ke.a,{disabled:E,type:"submit",variant:"contained",color:"primary"},"\u5b8c\u6210"))),4===s&&l.a.createElement(l.a.Fragment,null,l.a.createElement("form",{className:t.stepContent},l.a.createElement(h.a,null,"\u5b58\u50a8\u7b56\u7565\u5df2",e.policy?"\u4fdd\u5b58":"\u6dfb\u52a0","\uff01"),l.a.createElement(h.a,{variant:"body2",color:"textSecondary"},"\u8981\u4f7f\u7528\u6b64\u5b58\u50a8\u7b56\u7565\uff0c\u8bf7\u5230\u7528\u6237\u7ec4\u7ba1\u7406\u9875\u9762\uff0c\u4e3a\u76f8\u5e94\u7528\u6237\u7ec4\u7ed1\u5b9a\u6b64\u5b58\u50a8\u7b56\u7565\u3002")),l.a.createElement("div",{className:t.stepFooter},l.a.createElement(Ke.a,{color:"primary",className:t.button,onClick:function(){return c.push("/admin/policy")}},"\u8fd4\u56de\u5b58\u50a8\u7b56\u7565\u5217\u8868"))),l.a.createElement(Lt,{open:"file"===N,isFile:!0,onClose:function(){return C("")}}),l.a.createElement(Lt,{open:"path"===N,onClose:function(){return C("")}}))}function Ht(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function Jt(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?Ht(t,!0).forEach((function(a){Object(m.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ht(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var Gt=Object(c.a)((function(e){return{stepContent:{padding:"16px 32px 16px 32px"},form:{maxWidth:400,marginTop:20},formContainer:Object(m.a)({},e.breakpoints.up("md"),{padding:"0px 24px 0 24px"}),subStepContainer:{display:"flex",marginBottom:20,padding:10,transition:e.transitions.create("background-color",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),"&:focus-within":{backgroundColor:e.palette.background.default}},stepNumber:{width:20,height:20,backgroundColor:Object(u.e)(e.palette.secondary.light,.2),color:e.palette.secondary.contrastText,textAlign:"center",borderRadius:" 50%"},stepNumberContainer:{marginRight:10},stepFooter:{marginTop:32},button:{marginRight:e.spacing(1)},"@global":{code:{color:"rgba(0, 0, 0, 0.87)",display:"inline-block",padding:"2px 6px",fontSize:"14px",fontFamily:' Consolas, "Liberation Mono", Menlo, Courier, monospace',borderRadius:"2px",backgroundColor:"rgba(255,229,100,0.1)"},pre:{margin:"24px 0",padding:"12px 18px",overflow:"auto",direction:"ltr",borderRadius:"4px",backgroundColor:"#272c34",color:"#fff"}}}})),Qt=[{title:"\u5b58\u50a8\u7aef\u914d\u7f6e",optional:!1},{title:"\u4e0a\u4f20\u8def\u5f84",optional:!1},{title:"\u76f4\u94fe\u8bbe\u7f6e",optional:!1},{title:"\u4e0a\u4f20\u9650\u5236",optional:!1},{title:"\u5b8c\u6210",optional:!1}];function Xt(e){var a,t=Gt(),c=Object($.g)(),i=Object(r.useState)(0),o=Object(n.a)(i,2),s=o[0],u=o[1],p=Object(r.useState)(!1),d=Object(n.a)(p,2),E=d[0],b=d[1],f=l.a.useState(new Set),v=Object(n.a)(f,2),g=v[0],O=(v[1],Object(r.useState)("")),y=Object(n.a)(O,2),N=y[0],C=y[1],j=Object(r.useState)("false"),S=Object(n.a)(j,2),k=S[0],_=S[1],x=Object(r.useState)(e.policy?e.policy:{Type:"remote",Name:"",Server:"https://example.com:5212",SecretKey:Object(Ia.n)(64),DirNameRule:"uploads/{year}/{month}/{day}",AutoRename:"true",FileNameRule:"{randomkey8}_{originname}",IsOriginLinkEnable:"false",BaseURL:"",IsPrivate:"true",MaxSize:"0",OptionsSerialized:{file_type:""}}),w=Object(n.a)(x,2),P=w[0],D=w[1],z=function(e){return function(a){D(Jt({},P,Object(m.a)({},e,a.target.value)))}},W=Object(Z.c)(),F=Object(r.useCallback)((function(e,a,t,n){return W(Object(ee.P)(e,a,t,n))}),[W]);return l.a.createElement("div",null,l.a.createElement(h.a,{variant:"h6"},e.policy?"\u4fee\u6539":"\u6dfb\u52a0","\u4ece\u673a\u5b58\u50a8\u7b56\u7565"),l.a.createElement(Dt.a,{activeStep:s},Qt.map((function(e,a){var t,n={},r={};return e.optional&&(r.optional=l.a.createElement(h.a,{variant:"caption"},"\u53ef\u9009")),t=a,g.has(t)&&(n.completed=!1),l.a.createElement(Wt.a,Object.assign({key:e.title},n),l.a.createElement(zt.a,r,e.title))}))),0===s&&l.a.createElement("form",{className:t.stepContent,onSubmit:function(e){e.preventDefault(),u(1)}},l.a.createElement(ca.a,{severity:"info",style:{marginBottom:10}},"\u4ece\u673a\u5b58\u50a8\u7b56\u7565\u5141\u8bb8\u4f60\u4f7f\u7528\u540c\u6837\u8fd0\u884c\u4e86 Cloudreve \u7684\u670d\u52a1\u5668\u4f5c\u4e3a\u5b58\u50a8\u7aef\uff0c \u7528\u6237\u4e0a\u4f20\u4e0b\u8f7d\u6d41\u91cf\u901a\u8fc7 HTTP \u76f4\u4f20\u3002"),l.a.createElement("div",{className:t.subStepContainer},l.a.createElement("div",{className:t.stepNumberContainer},l.a.createElement("div",{className:t.stepNumber},"1")),l.a.createElement("div",{className:t.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u5c06\u548c\u4e3b\u7ad9\u76f8\u540c\u7248\u672c\u7684 Cloudreve \u7a0b\u5e8f\u62f7\u8d1d\u81f3\u8981\u4f5c\u4e3a\u4ece\u673a\u7684\u670d\u52a1\u5668\u4e0a\u3002"))),l.a.createElement("div",{className:t.subStepContainer},l.a.createElement("div",{className:t.stepNumberContainer},l.a.createElement("div",{className:t.stepNumber},"2")),l.a.createElement("div",{className:t.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u4e0b\u65b9\u4e3a\u7cfb\u7edf\u4e3a\u60a8\u968f\u673a\u751f\u6210\u7684\u4ece\u673a\u7aef\u5bc6\u94a5\uff0c\u4e00\u822c\u65e0\u9700\u6539\u52a8\uff0c\u5982\u679c\u6709\u81ea\u5b9a\u4e49\u9700\u6c42\uff0c \u53ef\u5c06\u60a8\u7684\u5bc6\u94a5\u586b\u5165\u4e0b\u65b9\uff1a"),l.a.createElement("div",{className:t.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u4ece\u673a\u5bc6\u94a5"),l.a.createElement(Xe.a,{required:!0,inputProps:{minlength:64},value:P.SecretKey,onChange:z("SecretKey")}))))),l.a.createElement("div",{className:t.subStepContainer},l.a.createElement("div",{className:t.stepNumberContainer},l.a.createElement("div",{className:t.stepNumber},"3")),l.a.createElement("div",{className:t.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u4fee\u6539\u4ece\u673a\u914d\u7f6e\u6587\u4ef6\u3002",l.a.createElement("br",null),"\u5728\u4ece\u673a\u7aef Cloudreve \u7684\u540c\u7ea7\u76ee\u5f55\u4e0b\u65b0\u5efa",l.a.createElement("code",null,"conf.ini"),"\u6587\u4ef6\uff0c\u586b\u5165\u4ece\u673a\u914d\u7f6e\uff0c\u542f\u52a8/\u91cd\u542f\u4ece\u673a\u7aef Cloudreve\u3002 \u4ee5\u4e0b\u4e3a\u4e00\u4e2a\u53ef\u4f9b\u53c2\u8003\u7684\u914d\u7f6e\u4f8b\u5b50\uff0c\u5176\u4e2d\u5bc6\u94a5\u90e8\u5206\u5df2\u5e2e\u60a8\u586b\u5199\u4e3a\u4e0a\u4e00\u6b65\u6240\u751f\u6210\u7684\u3002"),l.a.createElement("pre",null,"[System]",l.a.createElement("br",null),"Mode = slave",l.a.createElement("br",null),"Listen = :5212",l.a.createElement("br",null),l.a.createElement("br",null),"[Slave]",l.a.createElement("br",null),"Secret = ",P.SecretKey,l.a.createElement("br",null),l.a.createElement("br",null),"[CORS]",l.a.createElement("br",null),"AllowOrigins = *",l.a.createElement("br",null),"AllowMethods = OPTIONS,GET,POST",l.a.createElement("br",null),"AllowHeaders = *",l.a.createElement("br",null)),l.a.createElement(h.a,{variant:"body2"},"\u4ece\u673a\u7aef\u914d\u7f6e\u6587\u4ef6\u683c\u5f0f\u5927\u81f4\u4e0e\u4e3b\u7ad9\u7aef\u76f8\u540c\uff0c\u533a\u522b\u5728\u4e8e\uff1a",l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("code",null,"System"),"\u5206\u533a\u4e0b\u7684",l.a.createElement("code",null,"mode"),"\u5b57\u6bb5\u5fc5\u987b\u66f4\u6539\u4e3a",l.a.createElement("code",null,"slave")),l.a.createElement("li",null,"\u5fc5\u987b\u6307\u5b9a",l.a.createElement("code",null,"Slave"),"\u5206\u533a\u4e0b\u7684",l.a.createElement("code",null,"Secret"),"\u5b57\u6bb5\uff0c\u5176\u503c\u4e3a\u7b2c\u4e8c\u6b65\u91cc\u586b\u5199\u6216\u751f\u6210\u7684\u5bc6\u94a5\u3002"),l.a.createElement("li",null,"\u5fc5\u987b\u542f\u52a8\u8de8\u57df\u914d\u7f6e\uff0c\u5373",l.a.createElement("code",null,"CORS"),"\u5b57\u6bb5\u7684\u5185\u5bb9\uff0c \u5177\u4f53\u53ef\u53c2\u8003\u4e0a\u6587\u8303\u4f8b\u6216\u5b98\u65b9\u6587\u6863\u3002\u5982\u679c\u914d\u7f6e\u4e0d\u6b63\u786e\uff0c\u7528\u6237\u5c06\u65e0\u6cd5\u901a\u8fc7 Web \u7aef\u5411\u4ece\u673a\u4e0a\u4f20\u6587\u4ef6\u3002"))))),l.a.createElement("div",{className:t.subStepContainer},l.a.createElement("div",{className:t.stepNumberContainer},l.a.createElement("div",{className:t.stepNumber},"4")),l.a.createElement("div",{className:t.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u586b\u5199\u4ece\u673a\u5730\u5740\u3002",l.a.createElement("br",null),"\u5982\u679c\u4e3b\u7ad9\u542f\u7528\u4e86 HTTPS\uff0c\u4ece\u673a\u4e5f\u9700\u8981\u542f\u7528\uff0c\u5e76\u5728\u4e0b\u65b9\u586b\u5165 HTTPS \u534f\u8bae\u7684\u5730\u5740\u3002"),l.a.createElement("div",{className:t.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u4ece\u673a\u5730\u5740"),l.a.createElement(Xe.a,{fullWidth:!0,required:!0,type:"url",value:P.Server,onChange:z("Server")}))))),l.a.createElement("div",{className:t.subStepContainer},l.a.createElement("div",{className:t.stepNumberContainer},l.a.createElement("div",{className:t.stepNumber},"5")),l.a.createElement("div",{className:t.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u5b8c\u6210\u4ee5\u4e0a\u6b65\u9aa4\u540e\uff0c\u4f60\u53ef\u4ee5\u70b9\u51fb\u4e0b\u65b9\u7684\u6d4b\u8bd5\u6309\u94ae\u6d4b\u8bd5\u901a\u4fe1\u662f\u5426\u6b63\u5e38\u3002"),l.a.createElement("div",{className:t.form},l.a.createElement(Ke.a,{disabled:E,onClick:function(){return b(!0),void Oe.b.post("/admin/policy/test/slave",{server:P.Server,secret:P.SecretKey}).then((function(e){F("top","right","\u901a\u4fe1\u6b63\u5e38","success")})).catch((function(e){F("top","right",e.message,"error")})).then((function(){b(!1)}))},variant:"outlined",color:"primary"},"\u6d4b\u8bd5\u4ece\u673a\u901a\u4fe1")))),l.a.createElement("div",{className:t.stepFooter},l.a.createElement(Ke.a,{disabled:E,type:"submit",variant:"contained",color:"primary"},"\u4e0b\u4e00\u6b65"))),1===s&&l.a.createElement("form",{className:t.stepContent,onSubmit:function(e){e.preventDefault(),u(2)}},l.a.createElement("div",{className:t.subStepContainer},l.a.createElement("div",{className:t.stepNumberContainer},l.a.createElement("div",{className:t.stepNumber},"1")),l.a.createElement("div",{className:t.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u8bf7\u5728\u4e0b\u65b9\u8f93\u5165\u6587\u4ef6\u7684\u5b58\u50a8\u76ee\u5f55\u8def\u5f84\uff0c\u53ef\u4ee5\u4e3a\u7edd\u5bf9\u8def\u5f84\u6216\u76f8\u5bf9\u8def\u5f84\uff08\u76f8\u5bf9\u4e8e \u4ece\u673a\u7684 Cloudreve\uff09\u3002\u8def\u5f84\u4e2d\u53ef\u4ee5\u4f7f\u7528\u9b54\u6cd5\u53d8\u91cf\uff0c\u6587\u4ef6\u5728\u4e0a\u4f20\u65f6\u4f1a\u81ea\u52a8\u66ff\u6362\u8fd9\u4e9b\u53d8\u91cf\u4e3a\u76f8\u5e94\u503c\uff1b \u53ef\u7528\u9b54\u6cd5\u53d8\u91cf\u53ef\u53c2\u8003"," ",l.a.createElement(ja.a,{color:"secondary",href:"javascript:void()",onClick:function(){return C("path")}},"\u8def\u5f84\u9b54\u6cd5\u53d8\u91cf\u5217\u8868")," ","\u3002"),l.a.createElement("div",{className:t.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u5b58\u50a8\u76ee\u5f55"),l.a.createElement(Xe.a,{required:!0,value:P.DirNameRule,onChange:z("DirNameRule")}))))),l.a.createElement("div",{className:t.subStepContainer},l.a.createElement("div",{className:t.stepNumberContainer},l.a.createElement("div",{className:t.stepNumber},"2")),l.a.createElement("div",{className:t.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u662f\u5426\u9700\u8981\u5bf9\u5b58\u50a8\u7684\u7269\u7406\u6587\u4ef6\u8fdb\u884c\u91cd\u547d\u540d\uff1f\u6b64\u5904\u7684\u91cd\u547d\u540d\u4e0d\u4f1a\u5f71\u54cd\u6700\u7ec8\u5448\u73b0\u7ed9\u7528\u6237\u7684 \u6587\u4ef6\u540d\u3002\u6587\u4ef6\u540d\u4e5f\u53ef\u4f7f\u7528\u9b54\u6cd5\u53d8\u91cf\uff0c \u53ef\u7528\u9b54\u6cd5\u53d8\u91cf\u53ef\u53c2\u8003"," ",l.a.createElement(ja.a,{color:"secondary",href:"javascript:void()",onClick:function(){return C("file")}},"\u6587\u4ef6\u540d\u9b54\u6cd5\u53d8\u91cf\u5217\u8868")," ","\u3002"),l.a.createElement("div",{className:t.form},l.a.createElement(Qe.a,{required:!0,component:"fieldset"},l.a.createElement(Ft.a,{"aria-label":"gender",name:"gender1",value:P.AutoRename,onChange:z("AutoRename"),row:!0},l.a.createElement(ra.a,{value:"true",control:l.a.createElement(It.a,{color:"primary"}),label:"\u5f00\u542f\u91cd\u547d\u540d"}),l.a.createElement(ra.a,{value:"false",control:l.a.createElement(It.a,{color:"primary"}),label:"\u4e0d\u5f00\u542f"})))),l.a.createElement(qt.a,{in:"true"===P.AutoRename},l.a.createElement("div",{className:t.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u547d\u540d\u89c4\u5219"),l.a.createElement(Xe.a,{required:"true"===P.AutoRename,value:P.FileNameRule,onChange:z("FileNameRule")})))))),l.a.createElement("div",{className:t.stepFooter},l.a.createElement(Ke.a,{color:"default",className:t.button,onClick:function(){return u(0)}},"\u4e0a\u4e00\u6b65"),l.a.createElement(Ke.a,{disabled:E,type:"submit",variant:"contained",color:"primary"},"\u4e0b\u4e00\u6b65"))),2===s&&l.a.createElement("form",{className:t.stepContent,onSubmit:function(e){e.preventDefault(),u(3)}},l.a.createElement("div",{className:t.subStepContainer},l.a.createElement("div",{className:t.stepNumberContainer},l.a.createElement("div",{className:t.stepNumber},"1")),l.a.createElement("div",{className:t.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u662f\u5426\u5141\u8bb8\u83b7\u53d6\u6587\u4ef6\u6c38\u4e45\u76f4\u94fe\uff1f",l.a.createElement("br",null),"\u5f00\u542f\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u8bf7\u6c42\u83b7\u5f97\u80fd\u76f4\u63a5\u8bbf\u95ee\u5230\u6587\u4ef6\u5185\u5bb9\u7684\u76f4\u94fe\uff0c\u9002\u7528\u4e8e\u56fe\u5e8a\u5e94\u7528\u6216\u81ea\u7528\u3002"),l.a.createElement("div",{className:t.form},l.a.createElement(Qe.a,{required:!0,component:"fieldset"},l.a.createElement(Ft.a,{required:!0,value:P.IsOriginLinkEnable,onChange:z("IsOriginLinkEnable"),row:!0},l.a.createElement(ra.a,{value:"true",control:l.a.createElement(It.a,{color:"primary"}),label:"\u5141\u8bb8"}),l.a.createElement(ra.a,{value:"false",control:l.a.createElement(It.a,{color:"primary"}),label:"\u7981\u6b62"})))))),l.a.createElement(qt.a,{in:"true"===P.IsOriginLinkEnable},l.a.createElement("div",{className:t.subStepContainer},l.a.createElement("div",{className:t.stepNumberContainer},l.a.createElement("div",{className:t.stepNumber},"2")),l.a.createElement("div",{className:t.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u662f\u5426\u8981\u5bf9\u4e0b\u8f7d/\u76f4\u94fe\u4f7f\u7528 CDN\uff1f",l.a.createElement("br",null),"\u5f00\u542f\u540e\uff0c\u7528\u6237\u8bbf\u95ee\u6587\u4ef6\u65f6\u7684 URL \u4e2d\u7684\u57df\u540d\u90e8\u5206\u4f1a\u88ab\u66ff\u6362\u4e3a CDN \u57df\u540d\u3002"),l.a.createElement("div",{className:t.form},l.a.createElement(Qe.a,{required:!0,component:"fieldset"},l.a.createElement(Ft.a,{required:!0,value:k,onChange:function(e){"false"===e.target.value&&D(Jt({},P,{BaseURL:""})),_(e.target.value)},row:!0},l.a.createElement(ra.a,{value:"true",control:l.a.createElement(It.a,{color:"primary"}),label:"\u4f7f\u7528"}),l.a.createElement(ra.a,{value:"false",control:l.a.createElement(It.a,{color:"primary"}),label:"\u4e0d\u4f7f\u7528"})))))),l.a.createElement(qt.a,{in:"true"===k},l.a.createElement("div",{className:t.subStepContainer},l.a.createElement("div",{className:t.stepNumberContainer},l.a.createElement("div",{className:t.stepNumber},"3")),l.a.createElement("div",{className:t.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u9009\u62e9\u534f\u8bae\u5e76\u586b\u5199 CDN \u57df\u540d"),l.a.createElement("div",{className:t.form},l.a.createElement(Tt,{value:P.BaseURL,onChange:z("BaseURL"),required:"true"===P.IsOriginLinkEnable&&"true"===k,label:"CDN \u524d\u7f00"})))))),l.a.createElement("div",{className:t.stepFooter},l.a.createElement(Ke.a,{color:"default",className:t.button,onClick:function(){return u(1)}},"\u4e0a\u4e00\u6b65")," ",l.a.createElement(Ke.a,{disabled:E,type:"submit",variant:"contained",color:"primary"},"\u4e0b\u4e00\u6b65"))),3===s&&l.a.createElement("form",{className:t.stepContent,onSubmit:function(e){e.preventDefault(),u(4)}},l.a.createElement("div",{className:t.subStepContainer},l.a.createElement("div",{className:t.stepNumberContainer},l.a.createElement("div",{className:t.stepNumber},"1")),l.a.createElement("div",{className:t.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u662f\u5426\u9650\u5236\u4e0a\u4f20\u7684\u5355\u6587\u4ef6\u5927\u5c0f\uff1f"),l.a.createElement("div",{className:t.form},l.a.createElement(Qe.a,{required:!0,component:"fieldset"},l.a.createElement(Ft.a,{required:!0,value:"0"===P.MaxSize?"false":"true",onChange:function(e){"true"===e.target.value?D(Jt({},P,{MaxSize:"10485760"})):D(Jt({},P,{MaxSize:"0"}))},row:!0},l.a.createElement(ra.a,{value:"true",control:l.a.createElement(It.a,{color:"primary"}),label:"\u9650\u5236"}),l.a.createElement(ra.a,{value:"false",control:l.a.createElement(It.a,{color:"primary"}),label:"\u4e0d\u9650\u5236"})))))),l.a.createElement(qt.a,{in:"0"!==P.MaxSize},l.a.createElement("div",{className:t.subStepContainer},l.a.createElement("div",{className:t.stepNumberContainer},l.a.createElement("div",{className:t.stepNumber},"2")),l.a.createElement("div",{className:t.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u8f93\u5165\u9650\u5236\uff1a"),l.a.createElement("div",{className:t.form},l.a.createElement(ha,{value:P.MaxSize,onChange:z("MaxSize"),min:0,max:0x8000000000000000,label:"\u5355\u6587\u4ef6\u5927\u5c0f\u9650\u5236"}))))),l.a.createElement("div",{className:t.subStepContainer},l.a.createElement("div",{className:t.stepNumberContainer},l.a.createElement("div",{className:t.stepNumber},"0"!==P.MaxSize?"3":"2")),l.a.createElement("div",{className:t.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u662f\u5426\u9650\u5236\u4e0a\u4f20\u6587\u4ef6\u6269\u5c55\u540d\uff1f"),l.a.createElement("div",{className:t.form},l.a.createElement(Qe.a,{required:!0,component:"fieldset"},l.a.createElement(Ft.a,{required:!0,value:""===P.OptionsSerialized.file_type?"false":"true",onChange:function(e){"true"===e.target.value?D(Jt({},P,{OptionsSerialized:Jt({},P.OptionsSerialized,{file_type:"jpg,png,mp4,zip,rar"})})):D(Jt({},P,{OptionsSerialized:Jt({},P.OptionsSerialized,{file_type:""})}))},row:!0},l.a.createElement(ra.a,{value:"true",control:l.a.createElement(It.a,{color:"primary"}),label:"\u9650\u5236"}),l.a.createElement(ra.a,{value:"false",control:l.a.createElement(It.a,{color:"primary"}),label:"\u4e0d\u9650\u5236"})))))),l.a.createElement(qt.a,{in:""!==P.OptionsSerialized.file_type},l.a.createElement("div",{className:t.subStepContainer},l.a.createElement("div",{className:t.stepNumberContainer},l.a.createElement("div",{className:t.stepNumber},"0"!==P.MaxSize?"4":"3")),l.a.createElement("div",{className:t.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u8f93\u5165\u5141\u8bb8\u4e0a\u4f20\u7684\u6587\u4ef6\u6269\u5c55\u540d\uff0c\u591a\u4e2a\u8bf7\u4ee5\u534a\u89d2\u9017\u53f7 , \u9694\u5f00"),l.a.createElement("div",{className:t.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u6269\u5c55\u540d\u5217\u8868"),l.a.createElement(Xe.a,{value:P.OptionsSerialized.file_type,onChange:(a="file_type",function(e){D(Jt({},P,{OptionsSerialized:Jt({},P.OptionsSerialized,Object(m.a)({},a,e.target.value))}))})})))))),l.a.createElement("div",{className:t.stepFooter},l.a.createElement(Ke.a,{color:"default",className:t.button,onClick:function(){return u(2)}},"\u4e0a\u4e00\u6b65")," ",l.a.createElement(Ke.a,{disabled:E,type:"submit",variant:"contained",color:"primary"},"\u4e0b\u4e00\u6b65"))),4===s&&l.a.createElement("form",{className:t.stepContent,onSubmit:function(a){a.preventDefault(),b(!0);var t=Jt({},P);t.OptionsSerialized=Jt({},t.OptionsSerialized),"false"!==k&&"false"!==P.IsOriginLinkEnable||(t.BaseURL=""),t.AutoRename="true"===t.AutoRename,t.IsOriginLinkEnable="true"===t.IsOriginLinkEnable,t.MaxSize=parseInt(t.MaxSize),t.IsPrivate="true"===t.IsPrivate,t.OptionsSerialized.file_type=t.OptionsSerialized.file_type.split(","),1===t.OptionsSerialized.file_type.length&&""===t.OptionsSerialized.file_type[0]&&(t.OptionsSerialized.file_type=[]),Oe.b.post("/admin/policy",{policy:t}).then((function(a){F("top","right","\u5b58\u50a8\u7b56\u7565\u5df2"+(e.policy?"\u4fdd\u5b58":"\u6dfb\u52a0"),"success"),u(5)})).catch((function(e){F("top","right",e.message,"error")})).then((function(){b(!1)})),b(!1)}},l.a.createElement("div",{className:t.subStepContainer},l.a.createElement("div",{className:t.stepNumberContainer}),l.a.createElement("div",{className:t.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u6700\u540e\u4e00\u6b65\uff0c\u4e3a\u6b64\u5b58\u50a8\u7b56\u7565\u547d\u540d\uff1a"),l.a.createElement("div",{className:t.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u5b58\u50a8\u7b56\u7565\u540d"),l.a.createElement(Xe.a,{required:!0,value:P.Name,onChange:z("Name")}))))),l.a.createElement("div",{className:t.stepFooter},l.a.createElement(Ke.a,{color:"default",className:t.button,onClick:function(){return u(3)}},"\u4e0a\u4e00\u6b65")," ",l.a.createElement(Ke.a,{disabled:E,type:"submit",variant:"contained",color:"primary"},"\u5b8c\u6210"))),5===s&&l.a.createElement(l.a.Fragment,null,l.a.createElement("form",{className:t.stepContent},l.a.createElement(h.a,null,"\u5b58\u50a8\u7b56\u7565\u5df2",e.policy?"\u4fdd\u5b58":"\u6dfb\u52a0","\uff01"),l.a.createElement(h.a,{variant:"body2",color:"textSecondary"},"\u8981\u4f7f\u7528\u6b64\u5b58\u50a8\u7b56\u7565\uff0c\u8bf7\u5230\u7528\u6237\u7ec4\u7ba1\u7406\u9875\u9762\uff0c\u4e3a\u76f8\u5e94\u7528\u6237\u7ec4\u7ed1\u5b9a\u6b64\u5b58\u50a8\u7b56\u7565\u3002")),l.a.createElement("div",{className:t.stepFooter},l.a.createElement(Ke.a,{color:"primary",className:t.button,onClick:function(){return c.push("/admin/policy")}},"\u8fd4\u56de\u5b58\u50a8\u7b56\u7565\u5217\u8868"))),l.a.createElement(Lt,{open:"file"===N,isFile:!0,isSlave:!0,onClose:function(){return C("")}}),l.a.createElement(Lt,{open:"path"===N,isSlave:!0,onClose:function(){return C("")}}))}function Vt(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function Yt(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?Vt(t,!0).forEach((function(a){Object(m.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Vt(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var $t=Object(c.a)((function(e){return{stepContent:{padding:"16px 32px 16px 32px"},form:{maxWidth:400,marginTop:20},formContainer:Object(m.a)({},e.breakpoints.up("md"),{padding:"0px 24px 0 24px"}),subStepContainer:{display:"flex",marginBottom:20,padding:10,transition:e.transitions.create("background-color",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),"&:focus-within":{backgroundColor:e.palette.background.default}},stepNumber:{width:20,height:20,backgroundColor:Object(u.e)(e.palette.secondary.light,.2),color:e.palette.secondary.contrastText,textAlign:"center",borderRadius:" 50%"},stepNumberContainer:{marginRight:10},stepFooter:{marginTop:32},button:{marginRight:e.spacing(1)}}})),Zt=[{title:"\u5b58\u50a8\u7a7a\u95f4",optional:!1},{title:"\u4e0a\u4f20\u8def\u5f84",optional:!1},{title:"\u76f4\u94fe\u8bbe\u7f6e",optional:!1},{title:"\u4e0a\u4f20\u9650\u5236",optional:!1},{title:"\u5b8c\u6210",optional:!1}];function en(e){var a=$t(),t=Object($.g)(),c=Object(r.useState)(0),i=Object(n.a)(c,2),o=i[0],s=i[1],u=Object(r.useState)(!1),p=Object(n.a)(u,2),d=p[0],E=p[1],b=l.a.useState(new Set),f=Object(n.a)(b,2),v=f[0],g=(f[1],Object(r.useState)("")),O=Object(n.a)(g,2),y=O[0],N=O[1],C=Object(r.useState)("false"),j=Object(n.a)(C,2),S=(j[0],j[1],Object(r.useState)(e.policy?e.policy:{Type:"qiniu",Name:"",SecretKey:"",AccessKey:"",BaseURL:"",IsPrivate:"true",DirNameRule:"uploads/{year}/{month}/{day}",AutoRename:"true",FileNameRule:"{randomkey8}_{originname}",IsOriginLinkEnable:"false",MaxSize:"0",OptionsSerialized:{file_type:"",mimetype:""}})),k=Object(n.a)(S,2),_=k[0],x=k[1],w=function(e){return function(a){x(Yt({},_,Object(m.a)({},e,a.target.value)))}},P=function(e){return function(a){x(Yt({},_,{OptionsSerialized:Yt({},_.OptionsSerialized,Object(m.a)({},e,a.target.value))}))}},D=Object(Z.c)(),z=Object(r.useCallback)((function(e,a,t,n){return D(Object(ee.P)(e,a,t,n))}),[D]);return l.a.createElement("div",null,l.a.createElement(h.a,{variant:"h6"},e.policy?"\u4fee\u6539":"\u6dfb\u52a0"," \u4e03\u725b \u5b58\u50a8\u7b56\u7565"),l.a.createElement(Dt.a,{activeStep:o},Zt.map((function(e,a){var t,n={},r={};return e.optional&&(r.optional=l.a.createElement(h.a,{variant:"caption"},"\u53ef\u9009")),t=a,v.has(t)&&(n.completed=!1),l.a.createElement(Wt.a,Object.assign({key:e.title},n),l.a.createElement(zt.a,r,e.title))}))),0===o&&l.a.createElement("form",{className:a.stepContent,onSubmit:function(e){e.preventDefault(),s(1)}},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"0")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u5728\u4f7f\u7528\u4e03\u725b\u5b58\u50a8\u7b56\u7565\u524d\uff0c\u8bf7\u786e\u4fdd\u60a8\u5728 \u53c2\u6570\u8bbe\u7f6e - \u7ad9\u70b9\u4fe1\u606f - \u7ad9\u70b9URL \u4e2d\u586b\u5199\u7684 \u5730\u5740\u4e0e\u5b9e\u9645\u76f8\u7b26\uff0c\u5e76\u4e14",l.a.createElement("strong",null,"\u80fd\u591f\u88ab\u5916\u7f51\u6b63\u5e38\u8bbf\u95ee"),"\u3002"))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"1")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u524d\u5f80",l.a.createElement(ja.a,{href:"https://portal.qiniu.com/create",target:"_blank"},"\u4e03\u725b\u63a7\u5236\u9762\u677f"),"\u521b\u5efa\u5bf9\u8c61\u5b58\u50a8\u8d44\u6e90\u3002"))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"2")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u5728\u4e0b\u65b9\u586b\u5199\u60a8\u5728\u4e03\u725b\u521b\u5efa\u5b58\u50a8\u7a7a\u95f4\u65f6\u6307\u5b9a\u7684\u201c\u5b58\u50a8\u7a7a\u95f4\u540d\u79f0\u201d\uff1a"),l.a.createElement("div",{className:a.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u5b58\u50a8\u7a7a\u95f4\u540d\u79f0"),l.a.createElement(Xe.a,{required:!0,value:_.BucketName,onChange:w("BucketName")}))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"3")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u5728\u4e0b\u65b9\u9009\u62e9\u60a8\u521b\u5efa\u7684\u7a7a\u95f4\u7c7b\u578b\uff0c\u63a8\u8350\u9009\u62e9\u201c\u79c1\u6709\u7a7a\u95f4\u201d\u4ee5\u83b7\u5f97\u66f4\u9ad8\u7684\u5b89\u5168\u6027\uff0c\u79c1\u6709\u7a7a\u95f4\u65e0\u6cd5\u5f00\u542f\u201c\u83b7\u53d6\u76f4\u94fe\u201d\u529f\u80fd\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(Qe.a,{required:!0,component:"fieldset"},l.a.createElement(Ft.a,{required:!0,value:_.IsPrivate,onChange:w("IsPrivate"),row:!0},l.a.createElement(ra.a,{value:"true",control:l.a.createElement(It.a,{color:"primary"}),label:"\u79c1\u6709"}),l.a.createElement(ra.a,{value:"false",control:l.a.createElement(It.a,{color:"primary"}),label:"\u516c\u6709"})))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"4")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u586b\u5199\u60a8\u4e3a\u5b58\u50a8\u7a7a\u95f4\u7ed1\u5b9a\u7684 CDN \u52a0\u901f\u57df\u540d\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(Tt,{value:_.BaseURL,onChange:w("BaseURL"),required:!0,label:"CDN \u52a0\u901f\u57df\u540d"})))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"5")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u5728\u4e03\u725b\u63a7\u5236\u9762\u677f\u8fdb\u5165 \u4e2a\u4eba\u4e2d\u5fc3 - \u5bc6\u94a5\u7ba1\u7406\uff0c\u5728\u4e0b\u65b9\u586b\u5199\u83b7\u5f97\u5230\u7684 AK\u3001SK\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"AK"),l.a.createElement(Xe.a,{required:!0,value:_.AccessKey,onChange:w("AccessKey")}))),l.a.createElement("div",{className:a.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"SK"),l.a.createElement(Xe.a,{required:!0,value:_.SecretKey,onChange:w("SecretKey")}))))),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(Ke.a,{disabled:d,type:"submit",variant:"contained",color:"primary"},"\u4e0b\u4e00\u6b65"))),1===o&&l.a.createElement("form",{className:a.stepContent,onSubmit:function(e){e.preventDefault(),s(2)}},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"1")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u8bf7\u5728\u4e0b\u65b9\u8f93\u5165\u6587\u4ef6\u7684\u5b58\u50a8\u76ee\u5f55\u8def\u5f84\uff0c\u53ef\u4ee5\u4e3a\u7edd\u5bf9\u8def\u5f84\u6216\u76f8\u5bf9\u8def\u5f84\uff08\u76f8\u5bf9\u4e8e \u4ece\u673a\u7684 Cloudreve\uff09\u3002\u8def\u5f84\u4e2d\u53ef\u4ee5\u4f7f\u7528\u9b54\u6cd5\u53d8\u91cf\uff0c\u6587\u4ef6\u5728\u4e0a\u4f20\u65f6\u4f1a\u81ea\u52a8\u66ff\u6362\u8fd9\u4e9b\u53d8\u91cf\u4e3a\u76f8\u5e94\u503c\uff1b \u53ef\u7528\u9b54\u6cd5\u53d8\u91cf\u53ef\u53c2\u8003"," ",l.a.createElement(ja.a,{color:"secondary",href:"javascript:void()",onClick:function(){return N("path")}},"\u8def\u5f84\u9b54\u6cd5\u53d8\u91cf\u5217\u8868")," ","\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u5b58\u50a8\u76ee\u5f55"),l.a.createElement(Xe.a,{required:!0,value:_.DirNameRule,onChange:w("DirNameRule")}))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"2")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u662f\u5426\u9700\u8981\u5bf9\u5b58\u50a8\u7684\u7269\u7406\u6587\u4ef6\u8fdb\u884c\u91cd\u547d\u540d\uff1f\u6b64\u5904\u7684\u91cd\u547d\u540d\u4e0d\u4f1a\u5f71\u54cd\u6700\u7ec8\u5448\u73b0\u7ed9\u7528\u6237\u7684 \u6587\u4ef6\u540d\u3002\u6587\u4ef6\u540d\u4e5f\u53ef\u4f7f\u7528\u9b54\u6cd5\u53d8\u91cf\uff0c \u53ef\u7528\u9b54\u6cd5\u53d8\u91cf\u53ef\u53c2\u8003"," ",l.a.createElement(ja.a,{color:"secondary",href:"javascript:void()",onClick:function(){return N("file")}},"\u6587\u4ef6\u540d\u9b54\u6cd5\u53d8\u91cf\u5217\u8868")," ","\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(Qe.a,{required:!0,component:"fieldset"},l.a.createElement(Ft.a,{"aria-label":"gender",name:"gender1",value:_.AutoRename,onChange:w("AutoRename"),row:!0},l.a.createElement(ra.a,{value:"true",control:l.a.createElement(It.a,{color:"primary"}),label:"\u5f00\u542f\u91cd\u547d\u540d"}),l.a.createElement(ra.a,{value:"false",control:l.a.createElement(It.a,{color:"primary"}),label:"\u4e0d\u5f00\u542f"})))),l.a.createElement(qt.a,{in:"true"===_.AutoRename},l.a.createElement("div",{className:a.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u547d\u540d\u89c4\u5219"),l.a.createElement(Xe.a,{required:"true"===_.AutoRename,value:_.FileNameRule,onChange:w("FileNameRule")})))))),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(Ke.a,{color:"default",className:a.button,onClick:function(){return s(0)}},"\u4e0a\u4e00\u6b65"),l.a.createElement(Ke.a,{disabled:d,type:"submit",variant:"contained",color:"primary"},"\u4e0b\u4e00\u6b65"))),2===o&&l.a.createElement("form",{className:a.stepContent,onSubmit:function(e){e.preventDefault(),s(3)}},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"1")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u662f\u5426\u5141\u8bb8\u83b7\u53d6\u6587\u4ef6\u6c38\u4e45\u76f4\u94fe\uff1f",l.a.createElement("br",null),"\u5f00\u542f\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u8bf7\u6c42\u83b7\u5f97\u80fd\u76f4\u63a5\u8bbf\u95ee\u5230\u6587\u4ef6\u5185\u5bb9\u7684\u76f4\u94fe\uff0c\u9002\u7528\u4e8e\u56fe\u5e8a\u5e94\u7528\u6216\u81ea\u7528\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(Qe.a,{required:!0,component:"fieldset"},l.a.createElement(Ft.a,{required:!0,value:_.IsOriginLinkEnable,onChange:function(e){"true"!==_.IsPrivate||"true"!==e.target.value?w("IsOriginLinkEnable")(e):z("top","right","\u79c1\u6709\u7a7a\u95f4\u65e0\u6cd5\u5f00\u542f\u6b64\u529f\u80fd","warning")},row:!0},l.a.createElement(ra.a,{value:"true",control:l.a.createElement(It.a,{color:"primary"}),label:"\u5141\u8bb8"}),l.a.createElement(ra.a,{value:"false",control:l.a.createElement(It.a,{color:"primary"}),label:"\u7981\u6b62"})))))),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(Ke.a,{color:"default",className:a.button,onClick:function(){return s(1)}},"\u4e0a\u4e00\u6b65")," ",l.a.createElement(Ke.a,{disabled:d,type:"submit",variant:"contained",color:"primary"},"\u4e0b\u4e00\u6b65"))),3===o&&l.a.createElement("form",{className:a.stepContent,onSubmit:function(e){e.preventDefault(),s(4)}},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"1")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u662f\u5426\u9650\u5236\u4e0a\u4f20\u7684\u5355\u6587\u4ef6\u5927\u5c0f\uff1f"),l.a.createElement("div",{className:a.form},l.a.createElement(Qe.a,{required:!0,component:"fieldset"},l.a.createElement(Ft.a,{required:!0,value:"0"===_.MaxSize?"false":"true",onChange:function(e){"true"===e.target.value?x(Yt({},_,{MaxSize:"10485760"})):x(Yt({},_,{MaxSize:"0"}))},row:!0},l.a.createElement(ra.a,{value:"true",control:l.a.createElement(It.a,{color:"primary"}),label:"\u9650\u5236"}),l.a.createElement(ra.a,{value:"false",control:l.a.createElement(It.a,{color:"primary"}),label:"\u4e0d\u9650\u5236"})))))),l.a.createElement(qt.a,{in:"0"!==_.MaxSize},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"2")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u8f93\u5165\u9650\u5236\uff1a"),l.a.createElement("div",{className:a.form},l.a.createElement(ha,{value:_.MaxSize,onChange:w("MaxSize"),min:0,max:0x8000000000000000,label:"\u5355\u6587\u4ef6\u5927\u5c0f\u9650\u5236"}))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"0"!==_.MaxSize?"3":"2")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u662f\u5426\u9650\u5236\u4e0a\u4f20\u6587\u4ef6\u6269\u5c55\u540d\uff1f"),l.a.createElement("div",{className:a.form},l.a.createElement(Qe.a,{required:!0,component:"fieldset"},l.a.createElement(Ft.a,{required:!0,value:""===_.OptionsSerialized.file_type?"false":"true",onChange:function(e){"true"===e.target.value?x(Yt({},_,{OptionsSerialized:Yt({},_.OptionsSerialized,{file_type:"jpg,png,mp4,zip,rar"})})):x(Yt({},_,{OptionsSerialized:Yt({},_.OptionsSerialized,{file_type:""})}))},row:!0},l.a.createElement(ra.a,{value:"true",control:l.a.createElement(It.a,{color:"primary"}),label:"\u9650\u5236"}),l.a.createElement(ra.a,{value:"false",control:l.a.createElement(It.a,{color:"primary"}),label:"\u4e0d\u9650\u5236"})))))),l.a.createElement(qt.a,{in:""!==_.OptionsSerialized.file_type},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"0"!==_.MaxSize?"4":"3")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u8f93\u5165\u5141\u8bb8\u4e0a\u4f20\u7684\u6587\u4ef6\u6269\u5c55\u540d\uff0c\u591a\u4e2a\u8bf7\u4ee5\u534a\u89d2\u9017\u53f7 , \u9694\u5f00"),l.a.createElement("div",{className:a.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u6269\u5c55\u540d\u5217\u8868"),l.a.createElement(Xe.a,{value:_.OptionsSerialized.file_type,onChange:P("file_type")})))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},Object(Ia.j)(3,["0"!==_.MaxSize,""!==_.OptionsSerialized.file_type]))),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u662f\u5426\u9650\u5236\u4e0a\u4f20\u6587\u4ef6 MimeType\uff1f"),l.a.createElement("div",{className:a.form},l.a.createElement(Qe.a,{required:!0,component:"fieldset"},l.a.createElement(Ft.a,{required:!0,value:""===_.OptionsSerialized.mimetype?"false":"true",onChange:function(e){"true"===e.target.value?x(Yt({},_,{OptionsSerialized:Yt({},_.OptionsSerialized,{mimetype:"image/*"})})):x(Yt({},_,{OptionsSerialized:Yt({},_.OptionsSerialized,{mimetype:""})}))},row:!0},l.a.createElement(ra.a,{value:"true",control:l.a.createElement(It.a,{color:"primary"}),label:"\u9650\u5236"}),l.a.createElement(ra.a,{value:"false",control:l.a.createElement(It.a,{color:"primary"}),label:"\u4e0d\u9650\u5236"})))))),l.a.createElement(qt.a,{in:""!==_.OptionsSerialized.mimetype},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},Object(Ia.j)(4,["0"!==_.MaxSize,""!==_.OptionsSerialized.file_type]))),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u8f93\u5165\u5141\u8bb8\u4e0a\u4f20\u7684 MimeType\uff0c\u591a\u4e2a\u8bf7\u4ee5\u534a\u89d2\u9017\u53f7 , \u9694\u5f00\u3002\u4e03\u725b\u670d\u52a1\u5668\u4f1a\u4fa6\u6d4b\u6587\u4ef6\u5185\u5bb9\u4ee5\u5224\u65ad MimeType\uff0c\u518d\u7528\u5224\u65ad\u503c\u8ddf\u6307\u5b9a\u503c\u8fdb\u884c\u5339\u914d\uff0c\u5339\u914d\u6210\u529f\u5219\u5141\u8bb8\u4e0a\u4f20"),l.a.createElement("div",{className:a.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"MimeType \u5217\u8868"),l.a.createElement(Xe.a,{value:_.OptionsSerialized.mimetype,onChange:P("mimetype")})))))),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(Ke.a,{color:"default",className:a.button,onClick:function(){return s(2)}},"\u4e0a\u4e00\u6b65")," ",l.a.createElement(Ke.a,{disabled:d,type:"submit",variant:"contained",color:"primary"},"\u4e0b\u4e00\u6b65"))),4===o&&l.a.createElement("form",{className:a.stepContent,onSubmit:function(a){a.preventDefault(),E(!0);var t=Yt({},_);t.OptionsSerialized=Yt({},t.OptionsSerialized),t.AutoRename="true"===t.AutoRename,t.IsOriginLinkEnable="true"===t.IsOriginLinkEnable,t.IsPrivate="true"===t.IsPrivate,t.MaxSize=parseInt(t.MaxSize),t.OptionsSerialized.file_type=t.OptionsSerialized.file_type.split(","),1===t.OptionsSerialized.file_type.length&&""===t.OptionsSerialized.file_type[0]&&(t.OptionsSerialized.file_type=[]),Oe.b.post("/admin/policy",{policy:t}).then((function(a){z("top","right","\u5b58\u50a8\u7b56\u7565\u5df2"+(e.policy?"\u4fdd\u5b58":"\u6dfb\u52a0"),"success"),s(5)})).catch((function(e){z("top","right",e.message,"error")})).then((function(){E(!1)})),E(!1)}},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer}),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u6700\u540e\u4e00\u6b65\uff0c\u4e3a\u6b64\u5b58\u50a8\u7b56\u7565\u547d\u540d\uff1a"),l.a.createElement("div",{className:a.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u5b58\u50a8\u7b56\u7565\u540d"),l.a.createElement(Xe.a,{required:!0,value:_.Name,onChange:w("Name")}))))),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(Ke.a,{color:"default",className:a.button,onClick:function(){return s(3)}},"\u4e0a\u4e00\u6b65")," ",l.a.createElement(Ke.a,{disabled:d,type:"submit",variant:"contained",color:"primary"},"\u5b8c\u6210"))),5===o&&l.a.createElement(l.a.Fragment,null,l.a.createElement("form",{className:a.stepContent},l.a.createElement(h.a,null,"\u5b58\u50a8\u7b56\u7565\u5df2",e.policy?"\u4fdd\u5b58":"\u6dfb\u52a0","\uff01"),l.a.createElement(h.a,{variant:"body2",color:"textSecondary"},"\u8981\u4f7f\u7528\u6b64\u5b58\u50a8\u7b56\u7565\uff0c\u8bf7\u5230\u7528\u6237\u7ec4\u7ba1\u7406\u9875\u9762\uff0c\u4e3a\u76f8\u5e94\u7528\u6237\u7ec4\u7ed1\u5b9a\u6b64\u5b58\u50a8\u7b56\u7565\u3002")),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(Ke.a,{color:"primary",className:a.button,onClick:function(){return t.push("/admin/policy")}},"\u8fd4\u56de\u5b58\u50a8\u7b56\u7565\u5217\u8868"))),l.a.createElement(Lt,{open:"file"===y,isFile:!0,onClose:function(){return N("")}}),l.a.createElement(Lt,{open:"path"===y,onClose:function(){return N("")}}))}function an(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function tn(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?an(t,!0).forEach((function(a){Object(m.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):an(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var nn=Object(c.a)((function(e){return{stepContent:{padding:"16px 32px 16px 32px"},form:{maxWidth:400,marginTop:20},formContainer:Object(m.a)({},e.breakpoints.up("md"),{padding:"0px 24px 0 24px"}),subStepContainer:{display:"flex",marginBottom:20,padding:10,transition:e.transitions.create("background-color",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),"&:focus-within":{backgroundColor:e.palette.background.default}},stepNumber:{width:20,height:20,backgroundColor:Object(u.e)(e.palette.secondary.light,.2),color:e.palette.secondary.contrastText,textAlign:"center",borderRadius:" 50%"},stepNumberContainer:{marginRight:10},stepFooter:{marginTop:32},button:{marginRight:e.spacing(1)},viewButtonLabel:{textTransform:"none"},"@global":{code:{color:"rgba(0, 0, 0, 0.87)",display:"inline-block",padding:"2px 6px",fontFamily:' Consolas, "Liberation Mono", Menlo, Courier, monospace',borderRadius:"2px",backgroundColor:"rgba(255,229,100,0.1)"}}}})),rn=[{title:"\u5b58\u50a8\u7a7a\u95f4",optional:!1},{title:"\u4e0a\u4f20\u8def\u5f84",optional:!1},{title:"\u76f4\u94fe\u8bbe\u7f6e",optional:!1},{title:"\u4e0a\u4f20\u9650\u5236",optional:!1},{title:"\u8de8\u57df\u7b56\u7565",optional:!0},{title:"\u5b8c\u6210",optional:!1}];function ln(e){var a,t=nn(),c=Object($.g)(),i=Object(r.useState)(0),o=Object(n.a)(i,2),s=o[0],u=o[1],p=Object(r.useState)(!1),d=Object(n.a)(p,2),E=d[0],b=d[1],f=l.a.useState(new Set),v=Object(n.a)(f,2),g=v[0],O=v[1],y=Object(r.useState)(""),N=Object(n.a)(y,2),C=N[0],j=N[1],S=Object(r.useState)("false"),k=Object(n.a)(S,2),_=k[0],x=k[1],w=Object(r.useState)(e.policy?e.policy:{Type:"oss",Name:"",SecretKey:"",AccessKey:"",BaseURL:"",Server:"",IsPrivate:"true",DirNameRule:"uploads/{year}/{month}/{day}",AutoRename:"true",FileNameRule:"{randomkey8}_{originname}",IsOriginLinkEnable:"false",MaxSize:"0",OptionsSerialized:{file_type:""}}),P=Object(n.a)(w,2),D=P[0],z=P[1],W=Object(r.useState)(e.policy?e.policy.ID:0),F=Object(n.a)(W,2),I=F[0],q=F[1],R=function(e){return function(a){z(tn({},D,Object(m.a)({},e,a.target.value)))}},L=Object(Z.c)(),T=Object(r.useCallback)((function(e,a,t,n){return L(Object(ee.P)(e,a,t,n))}),[L]),A=function(a){a.preventDefault(),b(!0);var t=tn({},D);t.OptionsSerialized=tn({},t.OptionsSerialized),"false"===_&&(t.BaseURL=""),t.AutoRename="true"===t.AutoRename,t.IsOriginLinkEnable="true"===t.IsOriginLinkEnable,t.IsPrivate="true"===t.IsPrivate,t.MaxSize=parseInt(t.MaxSize),t.OptionsSerialized.file_type=t.OptionsSerialized.file_type.split(","),1===t.OptionsSerialized.file_type.length&&""===t.OptionsSerialized.file_type[0]&&(t.OptionsSerialized.file_type=[]),Oe.b.post("/admin/policy",{policy:t}).then((function(a){T("top","right","\u5b58\u50a8\u7b56\u7565\u5df2"+(e.policy?"\u4fdd\u5b58":"\u6dfb\u52a0"),"success"),u(4),q(a.data)})).catch((function(e){T("top","right",e.message,"error")})).then((function(){b(!1)})),b(!1)};return l.a.createElement("div",null,l.a.createElement(h.a,{variant:"h6"},e.policy?"\u4fee\u6539":"\u6dfb\u52a0"," \u963f\u91cc\u4e91 OSS \u5b58\u50a8\u7b56\u7565"),l.a.createElement(Dt.a,{activeStep:s},rn.map((function(e,a){var t,n={},r={};return e.optional&&(r.optional=l.a.createElement(h.a,{variant:"caption"},"\u53ef\u9009")),t=a,g.has(t)&&(n.completed=!1),l.a.createElement(Wt.a,Object.assign({key:e.title},n),l.a.createElement(zt.a,r,e.title))}))),0===s&&l.a.createElement("form",{className:t.stepContent,onSubmit:function(e){e.preventDefault(),u(1)}},l.a.createElement("div",{className:t.subStepContainer},l.a.createElement("div",{className:t.stepNumberContainer},l.a.createElement("div",{className:t.stepNumber},"0")),l.a.createElement("div",{className:t.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u5728\u4f7f\u7528 \u963f\u91cc\u4e91 OSS \u50a8\u7b56\u7565\u524d\uff0c\u8bf7\u786e\u4fdd\u60a8\u5728 \u53c2\u6570\u8bbe\u7f6e - \u7ad9\u70b9\u4fe1\u606f - \u7ad9\u70b9URL \u4e2d\u586b\u5199\u7684 \u5730\u5740\u4e0e\u5b9e\u9645\u76f8\u7b26\uff0c\u5e76\u4e14",l.a.createElement("strong",null,"\u80fd\u591f\u88ab\u5916\u7f51\u6b63\u5e38\u8bbf\u95ee"),"\u3002"))),l.a.createElement("div",{className:t.subStepContainer},l.a.createElement("div",{className:t.stepNumberContainer},l.a.createElement("div",{className:t.stepNumber},"1")),l.a.createElement("div",{className:t.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u524d\u5f80",l.a.createElement(ja.a,{href:"https://oss.console.aliyun.com/overview",target:"_blank"},"OSS \u7ba1\u7406\u63a7\u5236\u53f0"),"\u521b\u5efa Bucket\u3002\u6ce8\u610f\uff1a\u521b\u5efa\u7a7a\u95f4\u7c7b\u578b\u53ea\u80fd\u9009\u62e9",l.a.createElement("code",null,"\u6807\u51c6\u5b58\u50a8"),"\u6216",l.a.createElement("code",null,"\u4f4e\u9891\u8bbf\u95ee"),"\uff0c\u6682\u4e0d\u652f\u6301",l.a.createElement("code",null,"\u5f52\u6863\u5b58\u50a8")))),l.a.createElement("div",{className:t.subStepContainer},l.a.createElement("div",{className:t.stepNumberContainer},l.a.createElement("div",{className:t.stepNumber},"2")),l.a.createElement("div",{className:t.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u5728\u4e0b\u65b9\u586b\u5199\u60a8\u521b\u5efa Bucket \u65f6\u6307\u5b9a\u7684",l.a.createElement("code",null,"Bucket \u540d\u79f0"),"\uff1a"),l.a.createElement("div",{className:t.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"Bucket \u540d\u79f0"),l.a.createElement(Xe.a,{required:!0,value:D.BucketName,onChange:R("BucketName")}))))),l.a.createElement("div",{className:t.subStepContainer},l.a.createElement("div",{className:t.stepNumberContainer},l.a.createElement("div",{className:t.stepNumber},"3")),l.a.createElement("div",{className:t.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u5728\u4e0b\u65b9\u9009\u62e9\u60a8\u521b\u5efa\u7684\u7a7a\u95f4\u7684\u8bfb\u5199\u6743\u9650\u7c7b\u578b\uff0c\u63a8\u8350\u9009\u62e9\u201c\u79c1\u6709\u201d\u4ee5\u83b7\u5f97\u66f4\u9ad8\u7684\u5b89\u5168\u6027\uff0c\u79c1\u6709\u7a7a\u95f4\u65e0\u6cd5\u5f00\u542f\u201c\u83b7\u53d6\u76f4\u94fe\u201d\u529f\u80fd\u3002"),l.a.createElement("div",{className:t.form},l.a.createElement(Qe.a,{required:!0,component:"fieldset"},l.a.createElement(Ft.a,{required:!0,value:D.IsPrivate,onChange:R("IsPrivate"),row:!0},l.a.createElement(ra.a,{value:"true",control:l.a.createElement(It.a,{color:"primary"}),label:"\u79c1\u6709"}),l.a.createElement(ra.a,{value:"false",control:l.a.createElement(It.a,{color:"primary"}),label:"\u516c\u5171\u8bfb"})))))),l.a.createElement("div",{className:t.subStepContainer},l.a.createElement("div",{className:t.stepNumberContainer},l.a.createElement("div",{className:t.stepNumber},"4")),l.a.createElement("div",{className:t.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u8f6c\u5230\u6240\u521b\u5efa Bucket \u7684\u6982\u89c8\u9875\u9762\uff0c\u586b\u5199",l.a.createElement("code",null,"\u8bbf\u95ee\u57df\u540d"),"\u680f\u76ee\u4e0b",l.a.createElement("code",null,"\u5916\u7f51\u8bbf\u95ee")," \u4e00\u884c\u4e2d\u95f4\u7684 ",l.a.createElement("code",null,"EndPoint\uff08\u5730\u57df\u8282\u70b9\uff09")),l.a.createElement("div",{className:t.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"EndPoint"),l.a.createElement(Xe.a,{required:!0,value:D.Server,onChange:R("Server"),inputProps:{pattern:"(?:(?:(?<thld>[\\w\\-]*)(?:\\.))?(?<sld>[\\w\\-]*))\\.(?<tld>[\\w\\-]*)",title:"\u683c\u5f0f\u4e0d\u5408\u6cd5\uff0c\u53ea\u9700\u8f93\u5165\u57df\u540d\u90e8\u5206\u5373\u53ef"}}))))),l.a.createElement("div",{className:t.subStepContainer},l.a.createElement("div",{className:t.stepNumberContainer},l.a.createElement("div",{className:t.stepNumber},"5")),l.a.createElement("div",{className:t.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u662f\u5426\u8981\u4f7f\u7528\u914d\u5957\u7684 \u963f\u91cc\u4e91CDN \u52a0\u901f OSS \u8bbf\u95ee\uff1f"),l.a.createElement("div",{className:t.form},l.a.createElement(Qe.a,{required:!0,component:"fieldset"},l.a.createElement(Ft.a,{required:!0,value:_,onChange:function(e){x(e.target.value)},row:!0},l.a.createElement(ra.a,{value:"true",control:l.a.createElement(It.a,{color:"primary"}),label:"\u4f7f\u7528"}),l.a.createElement(ra.a,{value:"false",control:l.a.createElement(It.a,{color:"primary"}),label:"\u4e0d\u4f7f\u7528"})))))),l.a.createElement(qt.a,{in:"true"===_},l.a.createElement("div",{className:t.subStepContainer},l.a.createElement("div",{className:t.stepNumberContainer},l.a.createElement("div",{className:t.stepNumber},"6")),l.a.createElement("div",{className:t.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u524d\u5f80",l.a.createElement(ja.a,{href:"https://cdn.console.aliyun.com/domain/list",target:"_blank"},"\u963f\u91cc\u4e91 CDN \u7ba1\u7406\u63a7\u5236\u53f0"),"\u521b\u5efa CDN \u52a0\u901f\u57df\u540d\uff0c\u5e76\u8bbe\u5b9a\u6e90\u7ad9\u4e3a\u521a\u521b\u5efa\u7684 OSS Bucket\u3002\u5728\u4e0b\u65b9\u586b\u5199 CDN \u52a0\u901f\u57df\u540d\uff0c\u5e76\u9009\u62e9\u662f\u5426\u4f7f\u7528 HTTPS\uff1a"),l.a.createElement("div",{className:t.form},l.a.createElement(Tt,{value:D.BaseURL,onChange:R("BaseURL"),required:"true"===_,label:"CDN \u52a0\u901f\u57df\u540d"}))))),l.a.createElement("div",{className:t.subStepContainer},l.a.createElement("div",{className:t.stepNumberContainer},l.a.createElement("div",{className:t.stepNumber},Object(Ia.j)(6,["true"===_]))),l.a.createElement("div",{className:t.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u5728\u963f\u91cc\u4e91",l.a.createElement(ja.a,{href:"https://usercenter.console.aliyun.com/#/manage/ak",target:"_blank"},"\u5b89\u5168\u4fe1\u606f\u7ba1\u7406"),"\u9875\u9762\u83b7\u53d6 \u7528\u6237 AccessKey\uff0c\u5e76\u586b\u5199\u5728\u4e0b\u65b9\u3002"),l.a.createElement("div",{className:t.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"AccessKey ID"),l.a.createElement(Xe.a,{required:!0,inputProps:{pattern:"\\S+",title:"\u4e0d\u80fd\u542b\u6709\u7a7a\u683c"},value:D.AccessKey,onChange:R("AccessKey")}))),l.a.createElement("div",{className:t.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"Access Key Secret"),l.a.createElement(Xe.a,{required:!0,inputProps:{pattern:"\\S+",title:"\u4e0d\u80fd\u542b\u6709\u7a7a\u683c"},value:D.SecretKey,onChange:R("SecretKey")}))))),l.a.createElement("div",{className:t.subStepContainer},l.a.createElement("div",{className:t.stepNumberContainer},l.a.createElement("div",{className:t.stepNumber},Object(Ia.j)(7,["true"===_]))),l.a.createElement("div",{className:t.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u4e3a\u6b64\u5b58\u50a8\u7b56\u7565\u547d\u540d\uff1a"),l.a.createElement("div",{className:t.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u5b58\u50a8\u7b56\u7565\u540d"),l.a.createElement(Xe.a,{required:!0,value:D.Name,onChange:R("Name")}))))),l.a.createElement("div",{className:t.stepFooter},l.a.createElement(Ke.a,{disabled:E,type:"submit",variant:"contained",color:"primary"},"\u4e0b\u4e00\u6b65"))),1===s&&l.a.createElement("form",{className:t.stepContent,onSubmit:function(e){e.preventDefault(),u(2)}},l.a.createElement("div",{className:t.subStepContainer},l.a.createElement("div",{className:t.stepNumberContainer},l.a.createElement("div",{className:t.stepNumber},"1")),l.a.createElement("div",{className:t.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u8bf7\u5728\u4e0b\u65b9\u8f93\u5165\u6587\u4ef6\u7684\u5b58\u50a8\u76ee\u5f55\u8def\u5f84\uff0c\u53ef\u4ee5\u4e3a\u7edd\u5bf9\u8def\u5f84\u6216\u76f8\u5bf9\u8def\u5f84\uff08\u76f8\u5bf9\u4e8e \u4ece\u673a\u7684 Cloudreve\uff09\u3002\u8def\u5f84\u4e2d\u53ef\u4ee5\u4f7f\u7528\u9b54\u6cd5\u53d8\u91cf\uff0c\u6587\u4ef6\u5728\u4e0a\u4f20\u65f6\u4f1a\u81ea\u52a8\u66ff\u6362\u8fd9\u4e9b\u53d8\u91cf\u4e3a\u76f8\u5e94\u503c\uff1b \u53ef\u7528\u9b54\u6cd5\u53d8\u91cf\u53ef\u53c2\u8003"," ",l.a.createElement(ja.a,{color:"secondary",href:"javascript:void()",onClick:function(){return j("path")}},"\u8def\u5f84\u9b54\u6cd5\u53d8\u91cf\u5217\u8868")," ","\u3002"),l.a.createElement("div",{className:t.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u5b58\u50a8\u76ee\u5f55"),l.a.createElement(Xe.a,{required:!0,value:D.DirNameRule,onChange:R("DirNameRule")}))))),l.a.createElement("div",{className:t.subStepContainer},l.a.createElement("div",{className:t.stepNumberContainer},l.a.createElement("div",{className:t.stepNumber},"2")),l.a.createElement("div",{className:t.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u662f\u5426\u9700\u8981\u5bf9\u5b58\u50a8\u7684\u7269\u7406\u6587\u4ef6\u8fdb\u884c\u91cd\u547d\u540d\uff1f\u6b64\u5904\u7684\u91cd\u547d\u540d\u4e0d\u4f1a\u5f71\u54cd\u6700\u7ec8\u5448\u73b0\u7ed9\u7528\u6237\u7684 \u6587\u4ef6\u540d\u3002\u6587\u4ef6\u540d\u4e5f\u53ef\u4f7f\u7528\u9b54\u6cd5\u53d8\u91cf\uff0c \u53ef\u7528\u9b54\u6cd5\u53d8\u91cf\u53ef\u53c2\u8003"," ",l.a.createElement(ja.a,{color:"secondary",href:"javascript:void()",onClick:function(){return j("file")}},"\u6587\u4ef6\u540d\u9b54\u6cd5\u53d8\u91cf\u5217\u8868")," ","\u3002"),l.a.createElement("div",{className:t.form},l.a.createElement(Qe.a,{required:!0,component:"fieldset"},l.a.createElement(Ft.a,{"aria-label":"gender",name:"gender1",value:D.AutoRename,onChange:R("AutoRename"),row:!0},l.a.createElement(ra.a,{value:"true",control:l.a.createElement(It.a,{color:"primary"}),label:"\u5f00\u542f\u91cd\u547d\u540d"}),l.a.createElement(ra.a,{value:"false",control:l.a.createElement(It.a,{color:"primary"}),label:"\u4e0d\u5f00\u542f"})))),l.a.createElement(qt.a,{in:"true"===D.AutoRename},l.a.createElement("div",{className:t.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u547d\u540d\u89c4\u5219"),l.a.createElement(Xe.a,{required:"true"===D.AutoRename,value:D.FileNameRule,onChange:R("FileNameRule")})))))),l.a.createElement("div",{className:t.stepFooter},l.a.createElement(Ke.a,{color:"default",className:t.button,onClick:function(){return u(0)}},"\u4e0a\u4e00\u6b65"),l.a.createElement(Ke.a,{disabled:E,type:"submit",variant:"contained",color:"primary"},"\u4e0b\u4e00\u6b65"))),2===s&&l.a.createElement("form",{className:t.stepContent,onSubmit:function(e){e.preventDefault(),u(3)}},l.a.createElement("div",{className:t.subStepContainer},l.a.createElement("div",{className:t.stepNumberContainer},l.a.createElement("div",{className:t.stepNumber},"1")),l.a.createElement("div",{className:t.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u662f\u5426\u5141\u8bb8\u83b7\u53d6\u6587\u4ef6\u6c38\u4e45\u76f4\u94fe\uff1f",l.a.createElement("br",null),"\u5f00\u542f\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u8bf7\u6c42\u83b7\u5f97\u80fd\u76f4\u63a5\u8bbf\u95ee\u5230\u6587\u4ef6\u5185\u5bb9\u7684\u76f4\u94fe\uff0c\u9002\u7528\u4e8e\u56fe\u5e8a\u5e94\u7528\u6216\u81ea\u7528\u3002"),l.a.createElement("div",{className:t.form},l.a.createElement(Qe.a,{required:!0,component:"fieldset"},l.a.createElement(Ft.a,{required:!0,value:D.IsOriginLinkEnable,onChange:function(e){"true"!==D.IsPrivate||"true"!==e.target.value?R("IsOriginLinkEnable")(e):T("top","right","\u79c1\u6709\u7a7a\u95f4\u65e0\u6cd5\u5f00\u542f\u6b64\u529f\u80fd","warning")},row:!0},l.a.createElement(ra.a,{value:"true",control:l.a.createElement(It.a,{color:"primary"}),label:"\u5141\u8bb8"}),l.a.createElement(ra.a,{value:"false",control:l.a.createElement(It.a,{color:"primary"}),label:"\u7981\u6b62"})))))),l.a.createElement("div",{className:t.stepFooter},l.a.createElement(Ke.a,{color:"default",className:t.button,onClick:function(){return u(1)}},"\u4e0a\u4e00\u6b65")," ",l.a.createElement(Ke.a,{disabled:E,type:"submit",variant:"contained",color:"primary"},"\u4e0b\u4e00\u6b65"))),3===s&&l.a.createElement("form",{className:t.stepContent,onSubmit:A},l.a.createElement("div",{className:t.subStepContainer},l.a.createElement("div",{className:t.stepNumberContainer},l.a.createElement("div",{className:t.stepNumber},"1")),l.a.createElement("div",{className:t.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u662f\u5426\u9650\u5236\u4e0a\u4f20\u7684\u5355\u6587\u4ef6\u5927\u5c0f\uff1f"),l.a.createElement("div",{className:t.form},l.a.createElement(Qe.a,{required:!0,component:"fieldset"},l.a.createElement(Ft.a,{required:!0,value:"0"===D.MaxSize?"false":"true",onChange:function(e){"true"===e.target.value?z(tn({},D,{MaxSize:"10485760"})):z(tn({},D,{MaxSize:"0"}))},row:!0},l.a.createElement(ra.a,{value:"true",control:l.a.createElement(It.a,{color:"primary"}),label:"\u9650\u5236"}),l.a.createElement(ra.a,{value:"false",control:l.a.createElement(It.a,{color:"primary"}),label:"\u4e0d\u9650\u5236"})))))),l.a.createElement(qt.a,{in:"0"!==D.MaxSize},l.a.createElement("div",{className:t.subStepContainer},l.a.createElement("div",{className:t.stepNumberContainer},l.a.createElement("div",{className:t.stepNumber},"2")),l.a.createElement("div",{className:t.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u8f93\u5165\u9650\u5236\uff1a"),l.a.createElement("div",{className:t.form},l.a.createElement(ha,{value:D.MaxSize,onChange:R("MaxSize"),min:0,max:0x8000000000000000,label:"\u5355\u6587\u4ef6\u5927\u5c0f\u9650\u5236"}))))),l.a.createElement("div",{className:t.subStepContainer},l.a.createElement("div",{className:t.stepNumberContainer},l.a.createElement("div",{className:t.stepNumber},"0"!==D.MaxSize?"3":"2")),l.a.createElement("div",{className:t.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u662f\u5426\u9650\u5236\u4e0a\u4f20\u6587\u4ef6\u6269\u5c55\u540d\uff1f"),l.a.createElement("div",{className:t.form},l.a.createElement(Qe.a,{required:!0,component:"fieldset"},l.a.createElement(Ft.a,{required:!0,value:""===D.OptionsSerialized.file_type?"false":"true",onChange:function(e){"true"===e.target.value?z(tn({},D,{OptionsSerialized:tn({},D.OptionsSerialized,{file_type:"jpg,png,mp4,zip,rar"})})):z(tn({},D,{OptionsSerialized:tn({},D.OptionsSerialized,{file_type:""})}))},row:!0},l.a.createElement(ra.a,{value:"true",control:l.a.createElement(It.a,{color:"primary"}),label:"\u9650\u5236"}),l.a.createElement(ra.a,{value:"false",control:l.a.createElement(It.a,{color:"primary"}),label:"\u4e0d\u9650\u5236"})))))),l.a.createElement(qt.a,{in:""!==D.OptionsSerialized.file_type},l.a.createElement("div",{className:t.subStepContainer},l.a.createElement("div",{className:t.stepNumberContainer},l.a.createElement("div",{className:t.stepNumber},"0"!==D.MaxSize?"4":"3")),l.a.createElement("div",{className:t.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u8f93\u5165\u5141\u8bb8\u4e0a\u4f20\u7684\u6587\u4ef6\u6269\u5c55\u540d\uff0c\u591a\u4e2a\u8bf7\u4ee5\u534a\u89d2\u9017\u53f7 , \u9694\u5f00"),l.a.createElement("div",{className:t.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u6269\u5c55\u540d\u5217\u8868"),l.a.createElement(Xe.a,{value:D.OptionsSerialized.file_type,onChange:(a="file_type",function(e){z(tn({},D,{OptionsSerialized:tn({},D.OptionsSerialized,Object(m.a)({},a,e.target.value))}))})})))))),l.a.createElement("div",{className:t.stepFooter},l.a.createElement(Ke.a,{color:"default",className:t.button,onClick:function(){return u(2)}},"\u4e0a\u4e00\u6b65")," ",l.a.createElement(Ke.a,{disabled:E,type:"submit",variant:"contained",color:"primary"},"\u4e0b\u4e00\u6b65"))),4===s&&l.a.createElement("form",{className:t.stepContent,onSubmit:A},l.a.createElement("div",{className:t.subStepContainer},l.a.createElement("div",{className:t.stepNumberContainer}),l.a.createElement("div",{className:t.subStepContent},l.a.createElement(h.a,{variant:"body2"},"OSS Bucket \u9700\u8981\u6b63\u786e\u914d\u7f6e\u8de8\u57df\u7b56\u7565\u540e\u624d\u80fd\u4f7f\u7528 Web \u7aef\u4e0a\u4f20\u6587\u4ef6\uff0cCloudreve \u53ef\u4ee5\u5e2e\u60a8\u81ea\u52a8\u8bbe\u7f6e\uff0c\u60a8\u4e5f\u53ef\u4ee5\u53c2\u8003\u6587\u6863\u6b65\u9aa4\u624b\u52a8\u8bbe\u7f6e\u3002\u5982\u679c\u60a8\u5df2\u8bbe\u7f6e\u8fc7\u6b64 Bucket \u7684\u8de8\u57df\u7b56\u7565\uff0c\u6b64\u6b65\u9aa4\u53ef\u4ee5\u8df3\u8fc7\u3002"),l.a.createElement("div",{className:t.form},l.a.createElement(Ke.a,{disabled:E,color:"secondary",variant:"contained",className:t.button,onClick:function(){return b(!0),void Oe.b.post("/admin/policy/cors",{id:I}).then((function(e){T("top","right","\u8de8\u57df\u7b56\u7565\u5df2\u6dfb\u52a0","success"),u(5)})).catch((function(e){T("top","right",e.message,"error")})).then((function(){b(!1)}))},classes:{label:t.viewButtonLabel}},"\u8ba9 Cloudreve \u5e2e\u6211\u8bbe\u7f6e")))),l.a.createElement("div",{className:t.stepFooter},l.a.createElement(Ke.a,{color:"default",className:t.button,onClick:function(){u((function(e){return e+1})),O((function(e){var a=new Set(e.values());return a.add(s),a}))}},"\u8df3\u8fc7")," ")),5===s&&l.a.createElement(l.a.Fragment,null,l.a.createElement("form",{className:t.stepContent},l.a.createElement(h.a,null,"\u5b58\u50a8\u7b56\u7565\u5df2",e.policy?"\u4fdd\u5b58":"\u6dfb\u52a0","\uff01"),l.a.createElement(h.a,{variant:"body2",color:"textSecondary"},"\u8981\u4f7f\u7528\u6b64\u5b58\u50a8\u7b56\u7565\uff0c\u8bf7\u5230\u7528\u6237\u7ec4\u7ba1\u7406\u9875\u9762\uff0c\u4e3a\u76f8\u5e94\u7528\u6237\u7ec4\u7ed1\u5b9a\u6b64\u5b58\u50a8\u7b56\u7565\u3002")),l.a.createElement("div",{className:t.stepFooter},l.a.createElement(Ke.a,{color:"primary",className:t.button,onClick:function(){return c.push("/admin/policy")}},"\u8fd4\u56de\u5b58\u50a8\u7b56\u7565\u5217\u8868"))),l.a.createElement(Lt,{open:"file"===C,isFile:!0,onClose:function(){return j("")}}),l.a.createElement(Lt,{open:"path"===C,onClose:function(){return j("")}}))}function cn(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function on(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?cn(t,!0).forEach((function(a){Object(m.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):cn(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var mn=Object(c.a)((function(e){return{stepContent:{padding:"16px 32px 16px 32px"},form:{maxWidth:400,marginTop:20},formContainer:Object(m.a)({},e.breakpoints.up("md"),{padding:"0px 24px 0 24px"}),subStepContainer:{display:"flex",marginBottom:20,padding:10,transition:e.transitions.create("background-color",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),"&:focus-within":{backgroundColor:e.palette.background.default}},stepNumber:{width:20,height:20,backgroundColor:Object(u.e)(e.palette.secondary.light,.2),color:e.palette.secondary.contrastText,textAlign:"center",borderRadius:" 50%"},stepNumberContainer:{marginRight:10},stepFooter:{marginTop:32},button:{marginRight:e.spacing(1)}}})),sn=[{title:"\u5b58\u50a8\u7a7a\u95f4",optional:!1},{title:"\u4e0a\u4f20\u8def\u5f84",optional:!1},{title:"\u76f4\u94fe\u8bbe\u7f6e",optional:!1},{title:"\u4e0a\u4f20\u9650\u5236",optional:!1},{title:"\u5b8c\u6210",optional:!1}];function un(e){var a=mn(),t=Object($.g)(),c=Object(r.useState)(0),i=Object(n.a)(c,2),o=i[0],s=i[1],u=Object(r.useState)(!1),p=Object(n.a)(u,2),d=p[0],E=p[1],b=l.a.useState(new Set),f=Object(n.a)(b,2),v=f[0],g=(f[1],Object(r.useState)("")),O=Object(n.a)(g,2),y=O[0],N=O[1],C=Object(r.useState)(e.policy?e.policy:{Type:"upyun",Name:"",SecretKey:"",AccessKey:"",BaseURL:"",IsPrivate:"false",DirNameRule:"uploads/{year}/{month}/{day}",AutoRename:"true",FileNameRule:"{randomkey8}_{originname}",IsOriginLinkEnable:"false",MaxSize:"0",OptionsSerialized:{file_type:"",token:""}}),j=Object(n.a)(C,2),S=j[0],k=j[1],_=function(e){return function(a){k(on({},S,Object(m.a)({},e,a.target.value)))}},x=function(e){return function(a){k(on({},S,{OptionsSerialized:on({},S.OptionsSerialized,Object(m.a)({},e,a.target.value))}))}},w=Object(Z.c)(),P=Object(r.useCallback)((function(e,a,t,n){return w(Object(ee.P)(e,a,t,n))}),[w]);return l.a.createElement("div",null,l.a.createElement(h.a,{variant:"h6"},e.policy?"\u4fee\u6539":"\u6dfb\u52a0"," \u53c8\u62cd\u4e91 \u5b58\u50a8\u7b56\u7565"),l.a.createElement(Dt.a,{activeStep:o},sn.map((function(e,a){var t,n={},r={};return e.optional&&(r.optional=l.a.createElement(h.a,{variant:"caption"},"\u53ef\u9009")),t=a,v.has(t)&&(n.completed=!1),l.a.createElement(Wt.a,Object.assign({key:e.title},n),l.a.createElement(zt.a,r,e.title))}))),0===o&&l.a.createElement("form",{className:a.stepContent,onSubmit:function(e){e.preventDefault(),s(1)}},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"0")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u5728\u4f7f\u7528\u53c8\u62cd\u4e91\u5b58\u50a8\u7b56\u7565\u524d\uff0c\u8bf7\u786e\u4fdd\u60a8\u5728 \u53c2\u6570\u8bbe\u7f6e - \u7ad9\u70b9\u4fe1\u606f - \u7ad9\u70b9URL \u4e2d\u586b\u5199\u7684 \u5730\u5740\u4e0e\u5b9e\u9645\u76f8\u7b26\uff0c\u5e76\u4e14",l.a.createElement("strong",null,"\u80fd\u591f\u88ab\u5916\u7f51\u6b63\u5e38\u8bbf\u95ee"),"\u3002"))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"1")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u524d\u5f80",l.a.createElement(ja.a,{href:"https://console.upyun.com/services/create/file/",target:"_blank"},"\u53c8\u62cd\u4e91\u9762\u677f"),"\u521b\u5efa\u4e91\u5b58\u50a8\u670d\u52a1\u3002"))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"2")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u5728\u4e0b\u65b9\u586b\u5199\u6240\u521b\u5efa\u7684\u670d\u52a1\u540d\u79f0\uff1a"),l.a.createElement("div",{className:a.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u670d\u52a1\u540d\u79f0"),l.a.createElement(Xe.a,{required:!0,value:S.BucketName,onChange:_("BucketName")}))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"3")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u4e3a\u6b64\u670d\u52a1\u521b\u5efa\u6216\u6388\u6743\u6709\u8bfb\u53d6\u3001\u5199\u5165\u3001\u5220\u9664\u6743\u9650\u7684\u64cd\u4f5c\u5458\uff0c\u7136\u540e\u5c06\u64cd\u4f5c\u5458\u4fe1\u606f\u586b\u5199\u5728\u4e0b\u65b9\uff1a"),l.a.createElement("div",{className:a.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u64cd\u4f5c\u5458\u540d"),l.a.createElement(Xe.a,{required:!0,value:S.AccessKey,onChange:_("AccessKey")}))),l.a.createElement("div",{className:a.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u64cd\u4f5c\u5458\u5bc6\u7801"),l.a.createElement(Xe.a,{required:!0,value:S.SecretKey,onChange:_("SecretKey")}))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"4")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u586b\u5199\u4e3a\u4e91\u5b58\u50a8\u670d\u52a1\u7ed1\u5b9a\u7684\u57df\u540d\uff0c\u5e76\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u9009\u62e9\u662f\u5426\u4f7f\u7528 HTTPS\uff1a"),l.a.createElement("div",{className:a.form},l.a.createElement(Tt,{value:S.BaseURL,onChange:_("BaseURL"),required:!0,label:"\u52a0\u901f\u57df\u540d"})))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"5")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u6b64\u6b65\u9aa4\u53ef\u4fdd\u6301\u9ed8\u8ba4\u5e76\u8df3\u8fc7\uff0c\u4f46\u662f\u5f3a\u70c8\u5efa\u8bae\u60a8\u8ddf\u968f\u6b64\u6b65\u9aa4\u64cd\u4f5c\u3002",l.a.createElement("br",null),"\u524d\u5f80\u6240\u521b\u5efa\u4e91\u5b58\u50a8\u670d\u52a1\u7684 \u529f\u80fd\u914d\u7f6e \u9762\u677f\uff0c\u8f6c\u5230 \u8bbf\u95ee\u914d\u7f6e \u9009\u9879\u5361\uff0c\u5f00\u542f Token \u9632\u76d7\u94fe\u5e76\u8bbe\u5b9a\u5bc6\u7801\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(Qe.a,{required:!0,component:"fieldset"},l.a.createElement(Ft.a,{required:!0,value:S.IsPrivate,onChange:_("IsPrivate"),row:!0},l.a.createElement(ra.a,{value:"true",control:l.a.createElement(It.a,{color:"primary"}),label:"\u5df2\u5f00\u542f Token \u9632\u76d7\u94fe"}),l.a.createElement(ra.a,{value:"false",control:l.a.createElement(It.a,{color:"primary"}),label:"\u672a\u5f00\u542f Token \u9632\u76d7\u94fe"})))))),l.a.createElement(qt.a,{in:"true"===S.IsPrivate},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"6")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u586b\u5199\u60a8\u6240\u8bbe\u7f6e\u7684 Token \u9632\u76d7\u94fe \u5bc6\u94a5"),l.a.createElement("div",{className:a.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"Token \u9632\u76d7\u94fe \u5bc6\u94a5"),l.a.createElement(Xe.a,{value:S.OptionsSerialized.token,onChange:x("token"),required:"true"===S.IsPrivate})))))),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(Ke.a,{disabled:d,type:"submit",variant:"contained",color:"primary"},"\u4e0b\u4e00\u6b65"))),1===o&&l.a.createElement("form",{className:a.stepContent,onSubmit:function(e){e.preventDefault(),s(2)}},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"1")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u8bf7\u5728\u4e0b\u65b9\u8f93\u5165\u6587\u4ef6\u7684\u5b58\u50a8\u76ee\u5f55\u8def\u5f84\uff0c\u53ef\u4ee5\u4e3a\u7edd\u5bf9\u8def\u5f84\u6216\u76f8\u5bf9\u8def\u5f84\uff08\u76f8\u5bf9\u4e8e \u4ece\u673a\u7684 Cloudreve\uff09\u3002\u8def\u5f84\u4e2d\u53ef\u4ee5\u4f7f\u7528\u9b54\u6cd5\u53d8\u91cf\uff0c\u6587\u4ef6\u5728\u4e0a\u4f20\u65f6\u4f1a\u81ea\u52a8\u66ff\u6362\u8fd9\u4e9b\u53d8\u91cf\u4e3a\u76f8\u5e94\u503c\uff1b \u53ef\u7528\u9b54\u6cd5\u53d8\u91cf\u53ef\u53c2\u8003"," ",l.a.createElement(ja.a,{color:"secondary",href:"javascript:void()",onClick:function(){return N("path")}},"\u8def\u5f84\u9b54\u6cd5\u53d8\u91cf\u5217\u8868")," ","\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u5b58\u50a8\u76ee\u5f55"),l.a.createElement(Xe.a,{required:!0,value:S.DirNameRule,onChange:_("DirNameRule")}))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"2")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u662f\u5426\u9700\u8981\u5bf9\u5b58\u50a8\u7684\u7269\u7406\u6587\u4ef6\u8fdb\u884c\u91cd\u547d\u540d\uff1f\u6b64\u5904\u7684\u91cd\u547d\u540d\u4e0d\u4f1a\u5f71\u54cd\u6700\u7ec8\u5448\u73b0\u7ed9\u7528\u6237\u7684 \u6587\u4ef6\u540d\u3002\u6587\u4ef6\u540d\u4e5f\u53ef\u4f7f\u7528\u9b54\u6cd5\u53d8\u91cf\uff0c \u53ef\u7528\u9b54\u6cd5\u53d8\u91cf\u53ef\u53c2\u8003"," ",l.a.createElement(ja.a,{color:"secondary",href:"javascript:void()",onClick:function(){return N("file")}},"\u6587\u4ef6\u540d\u9b54\u6cd5\u53d8\u91cf\u5217\u8868")," ","\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(Qe.a,{required:!0,component:"fieldset"},l.a.createElement(Ft.a,{"aria-label":"gender",name:"gender1",value:S.AutoRename,onChange:_("AutoRename"),row:!0},l.a.createElement(ra.a,{value:"true",control:l.a.createElement(It.a,{color:"primary"}),label:"\u5f00\u542f\u91cd\u547d\u540d"}),l.a.createElement(ra.a,{value:"false",control:l.a.createElement(It.a,{color:"primary"}),label:"\u4e0d\u5f00\u542f"})))),l.a.createElement(qt.a,{in:"true"===S.AutoRename},l.a.createElement("div",{className:a.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u547d\u540d\u89c4\u5219"),l.a.createElement(Xe.a,{required:"true"===S.AutoRename,value:S.FileNameRule,onChange:_("FileNameRule")})))))),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(Ke.a,{color:"default",className:a.button,onClick:function(){return s(0)}},"\u4e0a\u4e00\u6b65"),l.a.createElement(Ke.a,{disabled:d,type:"submit",variant:"contained",color:"primary"},"\u4e0b\u4e00\u6b65"))),2===o&&l.a.createElement("form",{className:a.stepContent,onSubmit:function(e){e.preventDefault(),s(3)}},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"1")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u662f\u5426\u5141\u8bb8\u83b7\u53d6\u6587\u4ef6\u6c38\u4e45\u76f4\u94fe\uff1f",l.a.createElement("br",null),"\u5f00\u542f\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u8bf7\u6c42\u83b7\u5f97\u80fd\u76f4\u63a5\u8bbf\u95ee\u5230\u6587\u4ef6\u5185\u5bb9\u7684\u76f4\u94fe\uff0c\u9002\u7528\u4e8e\u56fe\u5e8a\u5e94\u7528\u6216\u81ea\u7528\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(Qe.a,{required:!0,component:"fieldset"},l.a.createElement(Ft.a,{required:!0,value:S.IsOriginLinkEnable,onChange:function(e){"true"!==S.IsPrivate||"true"!==e.target.value?_("IsOriginLinkEnable")(e):P("top","right","\u5f00\u542f Token \u9632\u76d7\u94fe\u540e\u65e0\u6cd5\u4f7f\u7528\u76f4\u94fe\u529f\u80fd","warning")},row:!0},l.a.createElement(ra.a,{value:"true",control:l.a.createElement(It.a,{color:"primary"}),label:"\u5141\u8bb8"}),l.a.createElement(ra.a,{value:"false",control:l.a.createElement(It.a,{color:"primary"}),label:"\u7981\u6b62"})))))),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(Ke.a,{color:"default",className:a.button,onClick:function(){return s(1)}},"\u4e0a\u4e00\u6b65")," ",l.a.createElement(Ke.a,{disabled:d,type:"submit",variant:"contained",color:"primary"},"\u4e0b\u4e00\u6b65"))),3===o&&l.a.createElement("form",{className:a.stepContent,onSubmit:function(e){e.preventDefault(),s(4)}},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"1")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u662f\u5426\u9650\u5236\u4e0a\u4f20\u7684\u5355\u6587\u4ef6\u5927\u5c0f\uff1f"),l.a.createElement("div",{className:a.form},l.a.createElement(Qe.a,{required:!0,component:"fieldset"},l.a.createElement(Ft.a,{required:!0,value:"0"===S.MaxSize?"false":"true",onChange:function(e){"true"===e.target.value?k(on({},S,{MaxSize:"10485760"})):k(on({},S,{MaxSize:"0"}))},row:!0},l.a.createElement(ra.a,{value:"true",control:l.a.createElement(It.a,{color:"primary"}),label:"\u9650\u5236"}),l.a.createElement(ra.a,{value:"false",control:l.a.createElement(It.a,{color:"primary"}),label:"\u4e0d\u9650\u5236"})))))),l.a.createElement(qt.a,{in:"0"!==S.MaxSize},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"2")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u8f93\u5165\u9650\u5236\uff1a"),l.a.createElement("div",{className:a.form},l.a.createElement(ha,{value:S.MaxSize,onChange:_("MaxSize"),min:0,max:0x8000000000000000,label:"\u5355\u6587\u4ef6\u5927\u5c0f\u9650\u5236"}))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"0"!==S.MaxSize?"3":"2")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u662f\u5426\u9650\u5236\u4e0a\u4f20\u6587\u4ef6\u6269\u5c55\u540d\uff1f"),l.a.createElement("div",{className:a.form},l.a.createElement(Qe.a,{required:!0,component:"fieldset"},l.a.createElement(Ft.a,{required:!0,value:""===S.OptionsSerialized.file_type?"false":"true",onChange:function(e){"true"===e.target.value?k(on({},S,{OptionsSerialized:on({},S.OptionsSerialized,{file_type:"jpg,png,mp4,zip,rar"})})):k(on({},S,{OptionsSerialized:on({},S.OptionsSerialized,{file_type:""})}))},row:!0},l.a.createElement(ra.a,{value:"true",control:l.a.createElement(It.a,{color:"primary"}),label:"\u9650\u5236"}),l.a.createElement(ra.a,{value:"false",control:l.a.createElement(It.a,{color:"primary"}),label:"\u4e0d\u9650\u5236"})))))),l.a.createElement(qt.a,{in:""!==S.OptionsSerialized.file_type},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"0"!==S.MaxSize?"4":"3")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u8f93\u5165\u5141\u8bb8\u4e0a\u4f20\u7684\u6587\u4ef6\u6269\u5c55\u540d\uff0c\u591a\u4e2a\u8bf7\u4ee5\u534a\u89d2\u9017\u53f7 , \u9694\u5f00"),l.a.createElement("div",{className:a.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u6269\u5c55\u540d\u5217\u8868"),l.a.createElement(Xe.a,{value:S.OptionsSerialized.file_type,onChange:x("file_type")})))))),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(Ke.a,{color:"default",className:a.button,onClick:function(){return s(2)}},"\u4e0a\u4e00\u6b65")," ",l.a.createElement(Ke.a,{disabled:d,type:"submit",variant:"contained",color:"primary"},"\u4e0b\u4e00\u6b65"))),4===o&&l.a.createElement("form",{className:a.stepContent,onSubmit:function(a){a.preventDefault(),E(!0);var t=on({},S);t.OptionsSerialized=on({},t.OptionsSerialized),t.AutoRename="true"===t.AutoRename,t.IsOriginLinkEnable="true"===t.IsOriginLinkEnable,t.IsPrivate="true"===t.IsPrivate,t.MaxSize=parseInt(t.MaxSize),t.OptionsSerialized.file_type=t.OptionsSerialized.file_type.split(","),1===t.OptionsSerialized.file_type.length&&""===t.OptionsSerialized.file_type[0]&&(t.OptionsSerialized.file_type=[]),Oe.b.post("/admin/policy",{policy:t}).then((function(a){P("top","right","\u5b58\u50a8\u7b56\u7565\u5df2"+(e.policy?"\u4fdd\u5b58":"\u6dfb\u52a0"),"success"),s(5)})).catch((function(e){P("top","right",e.message,"error")})).then((function(){E(!1)})),E(!1)}},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer}),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u6700\u540e\u4e00\u6b65\uff0c\u4e3a\u6b64\u5b58\u50a8\u7b56\u7565\u547d\u540d\uff1a"),l.a.createElement("div",{className:a.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u5b58\u50a8\u7b56\u7565\u540d"),l.a.createElement(Xe.a,{required:!0,value:S.Name,onChange:_("Name")}))))),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(Ke.a,{color:"default",className:a.button,onClick:function(){return s(3)}},"\u4e0a\u4e00\u6b65")," ",l.a.createElement(Ke.a,{disabled:d,type:"submit",variant:"contained",color:"primary"},"\u5b8c\u6210"))),5===o&&l.a.createElement(l.a.Fragment,null,l.a.createElement("form",{className:a.stepContent},l.a.createElement(h.a,null,"\u5b58\u50a8\u7b56\u7565\u5df2",e.policy?"\u4fdd\u5b58":"\u6dfb\u52a0","\uff01"),l.a.createElement(h.a,{variant:"body2",color:"textSecondary"},"\u8981\u4f7f\u7528\u6b64\u5b58\u50a8\u7b56\u7565\uff0c\u8bf7\u5230\u7528\u6237\u7ec4\u7ba1\u7406\u9875\u9762\uff0c\u4e3a\u76f8\u5e94\u7528\u6237\u7ec4\u7ed1\u5b9a\u6b64\u5b58\u50a8\u7b56\u7565\u3002")),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(Ke.a,{color:"primary",className:a.button,onClick:function(){return t.push("/admin/policy")}},"\u8fd4\u56de\u5b58\u50a8\u7b56\u7565\u5217\u8868"))),l.a.createElement(Lt,{open:"file"===y,isFile:!0,onClose:function(){return N("")}}),l.a.createElement(Lt,{open:"path"===y,onClose:function(){return N("")}}))}function pn(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function dn(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?pn(t,!0).forEach((function(a){Object(m.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):pn(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var En=Object(c.a)((function(e){return{stepContent:{padding:"16px 32px 16px 32px"},form:{maxWidth:400,marginTop:20},formContainer:Object(m.a)({},e.breakpoints.up("md"),{padding:"0px 24px 0 24px"}),subStepContainer:{display:"flex",marginBottom:20,padding:10,transition:e.transitions.create("background-color",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),"&:focus-within":{backgroundColor:e.palette.background.default}},stepNumber:{width:20,height:20,backgroundColor:Object(u.e)(e.palette.secondary.light,.2),color:e.palette.secondary.contrastText,textAlign:"center",borderRadius:" 50%"},stepNumberContainer:{marginRight:10},stepFooter:{marginTop:32},button:{marginRight:e.spacing(1)},viewButtonLabel:{textTransform:"none"},"@global":{code:{color:"rgba(0, 0, 0, 0.87)",display:"inline-block",padding:"2px 6px",fontFamily:' Consolas, "Liberation Mono", Menlo, Courier, monospace',borderRadius:"2px",backgroundColor:"rgba(255,229,100,0.1)"}}}})),bn=[{title:"\u5b58\u50a8\u7a7a\u95f4",optional:!1},{title:"\u4e0a\u4f20\u8def\u5f84",optional:!1},{title:"\u76f4\u94fe\u8bbe\u7f6e",optional:!1},{title:"\u4e0a\u4f20\u9650\u5236",optional:!1},{title:"\u8de8\u57df\u7b56\u7565",optional:!0},{title:"\u4e91\u51fd\u6570\u56de\u8c03",optional:!0},{title:"\u5b8c\u6210",optional:!1}];function fn(e){var a,t=En(),c=Object($.g)(),i=Object(r.useState)(0),o=Object(n.a)(i,2),s=o[0],u=o[1],p=Object(r.useState)(!1),d=Object(n.a)(p,2),E=d[0],b=d[1],f=l.a.useState(new Set),v=Object(n.a)(f,2),g=v[0],O=v[1],y=Object(r.useState)(""),N=Object(n.a)(y,2),C=N[0],j=N[1],S=Object(r.useState)("false"),k=Object(n.a)(S,2),_=k[0],x=k[1],w=Object(r.useState)(e.policy?e.policy:{Type:"cos",Name:"",SecretKey:"",AccessKey:"",BaseURL:"",Server:"",IsPrivate:"true",DirNameRule:"uploads/{year}/{month}/{day}",AutoRename:"true",FileNameRule:"{randomkey8}_{originname}",IsOriginLinkEnable:"false",MaxSize:"0",OptionsSerialized:{file_type:""}}),P=Object(n.a)(w,2),D=P[0],z=P[1],W=Object(r.useState)(e.policy?e.policy.ID:0),F=Object(n.a)(W,2),I=F[0],q=F[1],R=Object(r.useState)("ap-chengdu"),L=Object(n.a)(R,2),T=L[0],A=L[1],B=function(e){return function(a){z(dn({},D,Object(m.a)({},e,a.target.value)))}},M=Object(Z.c)(),U=Object(r.useCallback)((function(e,a,t,n){return M(Object(ee.P)(e,a,t,n))}),[M]);return l.a.createElement("div",null,l.a.createElement(h.a,{variant:"h6"},e.policy?"\u4fee\u6539":"\u6dfb\u52a0"," \u817e\u8baf\u4e91 COS \u5b58\u50a8\u7b56\u7565"),l.a.createElement(Dt.a,{activeStep:s},bn.map((function(e,a){var t,n={},r={};return e.optional&&(r.optional=l.a.createElement(h.a,{variant:"caption"},"\u53ef\u9009")),t=a,g.has(t)&&(n.completed=!1),l.a.createElement(Wt.a,Object.assign({key:e.title},n),l.a.createElement(zt.a,r,e.title))}))),0===s&&l.a.createElement("form",{className:t.stepContent,onSubmit:function(e){e.preventDefault(),u(1)}},l.a.createElement("div",{className:t.subStepContainer},l.a.createElement("div",{className:t.stepNumberContainer},l.a.createElement("div",{className:t.stepNumber},"0")),l.a.createElement("div",{className:t.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u5728\u4f7f\u7528 \u817e\u8baf\u4e91 COS \u50a8\u7b56\u7565\u524d\uff0c\u8bf7\u786e\u4fdd\u60a8\u5728 \u53c2\u6570\u8bbe\u7f6e - \u7ad9\u70b9\u4fe1\u606f - \u7ad9\u70b9URL \u4e2d\u586b\u5199\u7684 \u5730\u5740\u4e0e\u5b9e\u9645\u76f8\u7b26\uff0c\u5e76\u4e14",l.a.createElement("strong",null,"\u80fd\u591f\u88ab\u5916\u7f51\u6b63\u5e38\u8bbf\u95ee"),"\u3002"))),l.a.createElement("div",{className:t.subStepContainer},l.a.createElement("div",{className:t.stepNumberContainer},l.a.createElement("div",{className:t.stepNumber},"1")),l.a.createElement("div",{className:t.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u524d\u5f80",l.a.createElement(ja.a,{href:"https://console.cloud.tencent.com/cos5",target:"_blank"},"COS \u7ba1\u7406\u63a7\u5236\u53f0"),"\u521b\u5efa\u5b58\u50a8\u6876\u3002"))),l.a.createElement("div",{className:t.subStepContainer},l.a.createElement("div",{className:t.stepNumberContainer},l.a.createElement("div",{className:t.stepNumber},"2")),l.a.createElement("div",{className:t.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u8f6c\u5230\u6240\u521b\u5efa\u5b58\u50a8\u6876\u7684\u57fa\u7840\u914d\u7f6e\u9875\u9762\uff0c\u5c06",l.a.createElement("code",null,"\u7a7a\u95f4\u540d\u79f0"),"\u586b\u5199\u5728\u4e0b\u65b9\uff1a"),l.a.createElement("div",{className:t.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u7a7a\u95f4\u540d\u79f0"),l.a.createElement(Xe.a,{inputProps:{pattern:"[a-z0-9-]+-[0-9]+",title:"\u7a7a\u95f4\u540d\u683c\u5f0f\u4e0d\u6b63\u786e, \u4e3e\u4f8b\uff1accc-1252109809"},required:!0,value:D.BucketName,onChange:B("BucketName")}))))),l.a.createElement("div",{className:t.subStepContainer},l.a.createElement("div",{className:t.stepNumberContainer},l.a.createElement("div",{className:t.stepNumber},"3")),l.a.createElement("div",{className:t.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u5728\u4e0b\u65b9\u9009\u62e9\u60a8\u521b\u5efa\u7684\u7a7a\u95f4\u7684\u8bbf\u95ee\u6743\u9650\u7c7b\u578b\uff0c\u63a8\u8350\u9009\u62e9",l.a.createElement("code",null,"\u79c1\u6709\u8bfb\u5199"),"\u4ee5\u83b7\u5f97\u66f4\u9ad8\u7684\u5b89\u5168\u6027\uff0c\u79c1\u6709\u7a7a\u95f4\u65e0\u6cd5\u5f00\u542f\u201c\u83b7\u53d6\u76f4\u94fe\u201d\u529f\u80fd\u3002"),l.a.createElement("div",{className:t.form},l.a.createElement(Qe.a,{required:!0,component:"fieldset"},l.a.createElement(Ft.a,{required:!0,value:D.IsPrivate,onChange:B("IsPrivate"),row:!0},l.a.createElement(ra.a,{value:"true",control:l.a.createElement(It.a,{color:"primary"}),label:"\u79c1\u6709\u8bfb\u5199"}),l.a.createElement(ra.a,{value:"false",control:l.a.createElement(It.a,{color:"primary"}),label:"\u516c\u5171\u8bfb\u79c1\u6709\u5199"})))))),l.a.createElement("div",{className:t.subStepContainer},l.a.createElement("div",{className:t.stepNumberContainer},l.a.createElement("div",{className:t.stepNumber},"4")),l.a.createElement("div",{className:t.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u8f6c\u5230\u6240\u521b\u5efa Bucket \u7684\u57fa\u7840\u914d\u7f6e\uff0c\u586b\u5199",l.a.createElement("code",null,"\u57fa\u672c\u4fe1\u606f"),"\u680f\u76ee\u4e0b \u7ed9\u51fa\u7684 ",l.a.createElement("code",null,"\u8bbf\u95ee\u57df\u540d")),l.a.createElement("div",{className:t.form},l.a.createElement(Tt,{value:D.Server,onChange:B("Server"),required:!0,label:"\u8bbf\u95ee\u57df\u540d"})))),l.a.createElement("div",{className:t.subStepContainer},l.a.createElement("div",{className:t.stepNumberContainer},l.a.createElement("div",{className:t.stepNumber},"5")),l.a.createElement("div",{className:t.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u662f\u5426\u8981\u4f7f\u7528\u914d\u5957\u7684 \u817e\u8baf\u4e91CDN \u52a0\u901f COS \u8bbf\u95ee\uff1f"),l.a.createElement("div",{className:t.form},l.a.createElement(Qe.a,{required:!0,component:"fieldset"},l.a.createElement(Ft.a,{required:!0,value:_,onChange:function(e){x(e.target.value)},row:!0},l.a.createElement(ra.a,{value:"true",control:l.a.createElement(It.a,{color:"primary"}),label:"\u4f7f\u7528"}),l.a.createElement(ra.a,{value:"false",control:l.a.createElement(It.a,{color:"primary"}),label:"\u4e0d\u4f7f\u7528"})))))),l.a.createElement(qt.a,{in:"true"===_},l.a.createElement("div",{className:t.subStepContainer},l.a.createElement("div",{className:t.stepNumberContainer},l.a.createElement("div",{className:t.stepNumber},"6")),l.a.createElement("div",{className:t.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u524d\u5f80",l.a.createElement(ja.a,{href:"https://console.cloud.tencent.com/cdn/access/guid",target:"_blank"},"\u817e\u8baf\u4e91 CDN \u7ba1\u7406\u63a7\u5236\u53f0"),"\u521b\u5efa CDN \u52a0\u901f\u57df\u540d\uff0c\u5e76\u8bbe\u5b9a\u6e90\u7ad9\u4e3a\u521a\u521b\u5efa\u7684 COS \u5b58\u50a8\u6876\u3002\u5728\u4e0b\u65b9\u586b\u5199 CDN \u52a0\u901f\u57df\u540d\uff0c\u5e76\u9009\u62e9\u662f\u5426\u4f7f\u7528 HTTPS\uff1a"),l.a.createElement("div",{className:t.form},l.a.createElement(Tt,{value:D.BaseURL,onChange:B("BaseURL"),required:"true"===_,label:"CDN \u52a0\u901f\u57df\u540d"}))))),l.a.createElement("div",{className:t.subStepContainer},l.a.createElement("div",{className:t.stepNumberContainer},l.a.createElement("div",{className:t.stepNumber},Object(Ia.j)(6,["true"===_]))),l.a.createElement("div",{className:t.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u5728\u817e\u8baf\u4e91",l.a.createElement(ja.a,{href:"https://console.cloud.tencent.com/cam/capi",target:"_blank"},"\u8bbf\u95ee\u5bc6\u94a5"),"\u9875\u9762\u83b7\u53d6 \u4e00\u5bf9\u8bbf\u95ee\u5bc6\u94a5\uff0c\u5e76\u586b\u5199\u5728\u4e0b\u65b9\u3002\u8bf7\u786e\u4fdd\u8fd9\u5bf9\u5bc6\u94a5\u62e5\u6709 COS \u548c SCF \u670d\u52a1\u7684\u8bbf\u95ee\u6743\u9650\u3002"),l.a.createElement("div",{className:t.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"SecretId"),l.a.createElement(Xe.a,{required:!0,inputProps:{pattern:"\\S+",title:"\u4e0d\u80fd\u542b\u6709\u7a7a\u683c"},value:D.AccessKey,onChange:B("AccessKey")}))),l.a.createElement("div",{className:t.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"SecretKey"),l.a.createElement(Xe.a,{required:!0,inputProps:{pattern:"\\S+",title:"\u4e0d\u80fd\u542b\u6709\u7a7a\u683c"},value:D.SecretKey,onChange:B("SecretKey")}))))),l.a.createElement("div",{className:t.subStepContainer},l.a.createElement("div",{className:t.stepNumberContainer},l.a.createElement("div",{className:t.stepNumber},Object(Ia.j)(7,["true"===_]))),l.a.createElement("div",{className:t.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u4e3a\u6b64\u5b58\u50a8\u7b56\u7565\u547d\u540d\uff1a"),l.a.createElement("div",{className:t.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u5b58\u50a8\u7b56\u7565\u540d"),l.a.createElement(Xe.a,{required:!0,value:D.Name,onChange:B("Name")}))))),l.a.createElement("div",{className:t.stepFooter},l.a.createElement(Ke.a,{disabled:E,type:"submit",variant:"contained",color:"primary"},"\u4e0b\u4e00\u6b65"))),1===s&&l.a.createElement("form",{className:t.stepContent,onSubmit:function(e){e.preventDefault(),u(2)}},l.a.createElement("div",{className:t.subStepContainer},l.a.createElement("div",{className:t.stepNumberContainer},l.a.createElement("div",{className:t.stepNumber},"1")),l.a.createElement("div",{className:t.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u8bf7\u5728\u4e0b\u65b9\u8f93\u5165\u6587\u4ef6\u7684\u5b58\u50a8\u76ee\u5f55\u8def\u5f84\uff0c\u53ef\u4ee5\u4e3a\u7edd\u5bf9\u8def\u5f84\u6216\u76f8\u5bf9\u8def\u5f84\uff08\u76f8\u5bf9\u4e8e \u4ece\u673a\u7684 Cloudreve\uff09\u3002\u8def\u5f84\u4e2d\u53ef\u4ee5\u4f7f\u7528\u9b54\u6cd5\u53d8\u91cf\uff0c\u6587\u4ef6\u5728\u4e0a\u4f20\u65f6\u4f1a\u81ea\u52a8\u66ff\u6362\u8fd9\u4e9b\u53d8\u91cf\u4e3a\u76f8\u5e94\u503c\uff1b \u53ef\u7528\u9b54\u6cd5\u53d8\u91cf\u53ef\u53c2\u8003"," ",l.a.createElement(ja.a,{color:"secondary",href:"javascript:void()",onClick:function(){return j("path")}},"\u8def\u5f84\u9b54\u6cd5\u53d8\u91cf\u5217\u8868")," ","\u3002"),l.a.createElement("div",{className:t.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u5b58\u50a8\u76ee\u5f55"),l.a.createElement(Xe.a,{required:!0,value:D.DirNameRule,onChange:B("DirNameRule")}))))),l.a.createElement("div",{className:t.subStepContainer},l.a.createElement("div",{className:t.stepNumberContainer},l.a.createElement("div",{className:t.stepNumber},"2")),l.a.createElement("div",{className:t.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u662f\u5426\u9700\u8981\u5bf9\u5b58\u50a8\u7684\u7269\u7406\u6587\u4ef6\u8fdb\u884c\u91cd\u547d\u540d\uff1f\u6b64\u5904\u7684\u91cd\u547d\u540d\u4e0d\u4f1a\u5f71\u54cd\u6700\u7ec8\u5448\u73b0\u7ed9\u7528\u6237\u7684 \u6587\u4ef6\u540d\u3002\u6587\u4ef6\u540d\u4e5f\u53ef\u4f7f\u7528\u9b54\u6cd5\u53d8\u91cf\uff0c \u53ef\u7528\u9b54\u6cd5\u53d8\u91cf\u53ef\u53c2\u8003"," ",l.a.createElement(ja.a,{color:"secondary",href:"javascript:void()",onClick:function(){return j("file")}},"\u6587\u4ef6\u540d\u9b54\u6cd5\u53d8\u91cf\u5217\u8868")," ","\u3002"),l.a.createElement("div",{className:t.form},l.a.createElement(Qe.a,{required:!0,component:"fieldset"},l.a.createElement(Ft.a,{"aria-label":"gender",name:"gender1",value:D.AutoRename,onChange:B("AutoRename"),row:!0},l.a.createElement(ra.a,{value:"true",control:l.a.createElement(It.a,{color:"primary"}),label:"\u5f00\u542f\u91cd\u547d\u540d"}),l.a.createElement(ra.a,{value:"false",control:l.a.createElement(It.a,{color:"primary"}),label:"\u4e0d\u5f00\u542f"})))),l.a.createElement(qt.a,{in:"true"===D.AutoRename},l.a.createElement("div",{className:t.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u547d\u540d\u89c4\u5219"),l.a.createElement(Xe.a,{required:"true"===D.AutoRename,value:D.FileNameRule,onChange:B("FileNameRule")})))))),l.a.createElement("div",{className:t.stepFooter},l.a.createElement(Ke.a,{color:"default",className:t.button,onClick:function(){return u(0)}},"\u4e0a\u4e00\u6b65"),l.a.createElement(Ke.a,{disabled:E,type:"submit",variant:"contained",color:"primary"},"\u4e0b\u4e00\u6b65"))),2===s&&l.a.createElement("form",{className:t.stepContent,onSubmit:function(e){e.preventDefault(),u(3)}},l.a.createElement("div",{className:t.subStepContainer},l.a.createElement("div",{className:t.stepNumberContainer},l.a.createElement("div",{className:t.stepNumber},"1")),l.a.createElement("div",{className:t.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u662f\u5426\u5141\u8bb8\u83b7\u53d6\u6587\u4ef6\u6c38\u4e45\u76f4\u94fe\uff1f",l.a.createElement("br",null),"\u5f00\u542f\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u8bf7\u6c42\u83b7\u5f97\u80fd\u76f4\u63a5\u8bbf\u95ee\u5230\u6587\u4ef6\u5185\u5bb9\u7684\u76f4\u94fe\uff0c\u9002\u7528\u4e8e\u56fe\u5e8a\u5e94\u7528\u6216\u81ea\u7528\u3002"),l.a.createElement("div",{className:t.form},l.a.createElement(Qe.a,{required:!0,component:"fieldset"},l.a.createElement(Ft.a,{required:!0,value:D.IsOriginLinkEnable,onChange:function(e){"true"!==D.IsPrivate||"true"!==e.target.value?B("IsOriginLinkEnable")(e):U("top","right","\u79c1\u6709\u7a7a\u95f4\u65e0\u6cd5\u5f00\u542f\u6b64\u529f\u80fd","warning")},row:!0},l.a.createElement(ra.a,{value:"true",control:l.a.createElement(It.a,{color:"primary"}),label:"\u5141\u8bb8"}),l.a.createElement(ra.a,{value:"false",control:l.a.createElement(It.a,{color:"primary"}),label:"\u7981\u6b62"})))))),l.a.createElement("div",{className:t.stepFooter},l.a.createElement(Ke.a,{color:"default",className:t.button,onClick:function(){return u(1)}},"\u4e0a\u4e00\u6b65")," ",l.a.createElement(Ke.a,{disabled:E,type:"submit",variant:"contained",color:"primary"},"\u4e0b\u4e00\u6b65"))),3===s&&l.a.createElement("form",{className:t.stepContent,onSubmit:function(a){a.preventDefault(),b(!0);var t=dn({},D);t.OptionsSerialized=dn({},t.OptionsSerialized),"false"===_&&(t.BaseURL=D.Server),t.AutoRename="true"===t.AutoRename,t.IsOriginLinkEnable="true"===t.IsOriginLinkEnable,t.IsPrivate="true"===t.IsPrivate,t.MaxSize=parseInt(t.MaxSize),t.OptionsSerialized.file_type=t.OptionsSerialized.file_type.split(","),1===t.OptionsSerialized.file_type.length&&""===t.OptionsSerialized.file_type[0]&&(t.OptionsSerialized.file_type=[]),Oe.b.post("/admin/policy",{policy:t}).then((function(a){U("top","right","\u5b58\u50a8\u7b56\u7565\u5df2"+(e.policy?"\u4fdd\u5b58":"\u6dfb\u52a0"),"success"),u(4),q(a.data)})).catch((function(e){U("top","right",e.message,"error")})).then((function(){b(!1)})),b(!1)}},l.a.createElement("div",{className:t.subStepContainer},l.a.createElement("div",{className:t.stepNumberContainer},l.a.createElement("div",{className:t.stepNumber},"1")),l.a.createElement("div",{className:t.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u662f\u5426\u9650\u5236\u4e0a\u4f20\u7684\u5355\u6587\u4ef6\u5927\u5c0f\uff1f"),l.a.createElement("div",{className:t.form},l.a.createElement(Qe.a,{required:!0,component:"fieldset"},l.a.createElement(Ft.a,{required:!0,value:"0"===D.MaxSize?"false":"true",onChange:function(e){"true"===e.target.value?z(dn({},D,{MaxSize:"10485760"})):z(dn({},D,{MaxSize:"0"}))},row:!0},l.a.createElement(ra.a,{value:"true",control:l.a.createElement(It.a,{color:"primary"}),label:"\u9650\u5236"}),l.a.createElement(ra.a,{value:"false",control:l.a.createElement(It.a,{color:"primary"}),label:"\u4e0d\u9650\u5236"})))))),l.a.createElement(qt.a,{in:"0"!==D.MaxSize},l.a.createElement("div",{className:t.subStepContainer},l.a.createElement("div",{className:t.stepNumberContainer},l.a.createElement("div",{className:t.stepNumber},"2")),l.a.createElement("div",{className:t.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u8f93\u5165\u9650\u5236\uff1a"),l.a.createElement("div",{className:t.form},l.a.createElement(ha,{value:D.MaxSize,onChange:B("MaxSize"),min:0,max:0x8000000000000000,label:"\u5355\u6587\u4ef6\u5927\u5c0f\u9650\u5236"}))))),l.a.createElement("div",{className:t.subStepContainer},l.a.createElement("div",{className:t.stepNumberContainer},l.a.createElement("div",{className:t.stepNumber},"0"!==D.MaxSize?"3":"2")),l.a.createElement("div",{className:t.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u662f\u5426\u9650\u5236\u4e0a\u4f20\u6587\u4ef6\u6269\u5c55\u540d\uff1f"),l.a.createElement("div",{className:t.form},l.a.createElement(Qe.a,{required:!0,component:"fieldset"},l.a.createElement(Ft.a,{required:!0,value:""===D.OptionsSerialized.file_type?"false":"true",onChange:function(e){"true"===e.target.value?z(dn({},D,{OptionsSerialized:dn({},D.OptionsSerialized,{file_type:"jpg,png,mp4,zip,rar"})})):z(dn({},D,{OptionsSerialized:dn({},D.OptionsSerialized,{file_type:""})}))},row:!0},l.a.createElement(ra.a,{value:"true",control:l.a.createElement(It.a,{color:"primary"}),label:"\u9650\u5236"}),l.a.createElement(ra.a,{value:"false",control:l.a.createElement(It.a,{color:"primary"}),label:"\u4e0d\u9650\u5236"})))))),l.a.createElement(qt.a,{in:""!==D.OptionsSerialized.file_type},l.a.createElement("div",{className:t.subStepContainer},l.a.createElement("div",{className:t.stepNumberContainer},l.a.createElement("div",{className:t.stepNumber},"0"!==D.MaxSize?"4":"3")),l.a.createElement("div",{className:t.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u8f93\u5165\u5141\u8bb8\u4e0a\u4f20\u7684\u6587\u4ef6\u6269\u5c55\u540d\uff0c\u591a\u4e2a\u8bf7\u4ee5\u534a\u89d2\u9017\u53f7 , \u9694\u5f00"),l.a.createElement("div",{className:t.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u6269\u5c55\u540d\u5217\u8868"),l.a.createElement(Xe.a,{value:D.OptionsSerialized.file_type,onChange:(a="file_type",function(e){z(dn({},D,{OptionsSerialized:dn({},D.OptionsSerialized,Object(m.a)({},a,e.target.value))}))})})))))),l.a.createElement("div",{className:t.stepFooter},l.a.createElement(Ke.a,{color:"default",className:t.button,onClick:function(){return u(2)}},"\u4e0a\u4e00\u6b65")," ",l.a.createElement(Ke.a,{disabled:E,type:"submit",variant:"contained",color:"primary"},"\u4e0b\u4e00\u6b65"))),4===s&&l.a.createElement("form",{className:t.stepContent},l.a.createElement("div",{className:t.subStepContainer},l.a.createElement("div",{className:t.stepNumberContainer}),l.a.createElement("div",{className:t.subStepContent},l.a.createElement(h.a,{variant:"body2"},"COS \u5b58\u50a8\u6876 \u9700\u8981\u6b63\u786e\u914d\u7f6e\u8de8\u57df\u7b56\u7565\u540e\u624d\u80fd\u4f7f\u7528 Web \u7aef\u4e0a\u4f20\u6587\u4ef6\uff0cCloudreve \u53ef\u4ee5\u5e2e\u60a8\u81ea\u52a8\u8bbe\u7f6e\uff0c\u60a8\u4e5f\u53ef\u4ee5\u53c2\u8003\u6587\u6863\u6b65\u9aa4\u624b\u52a8\u8bbe\u7f6e\u3002\u5982\u679c\u60a8\u5df2\u8bbe\u7f6e\u8fc7\u6b64 Bucket \u7684\u8de8\u57df\u7b56\u7565\uff0c\u6b64\u6b65\u9aa4\u53ef\u4ee5\u8df3\u8fc7\u3002"),l.a.createElement("div",{className:t.form},l.a.createElement(Ke.a,{disabled:E,color:"secondary",variant:"contained",className:t.button,onClick:function(){return b(!0),void Oe.b.post("/admin/policy/cors",{id:I}).then((function(e){U("top","right","\u8de8\u57df\u7b56\u7565\u5df2\u6dfb\u52a0","success"),u(5)})).catch((function(e){U("top","right",e.message,"error")})).then((function(){b(!1)}))},classes:{label:t.viewButtonLabel}},"\u8ba9 Cloudreve \u5e2e\u6211\u8bbe\u7f6e")))),l.a.createElement("div",{className:t.stepFooter},l.a.createElement(Ke.a,{color:"default",className:t.button,onClick:function(){u((function(e){return e+1})),O((function(e){var a=new Set(e.values());return a.add(s),a}))}},"\u8df3\u8fc7")," ")),5===s&&l.a.createElement("form",{className:t.stepContent},l.a.createElement("div",{className:t.subStepContainer},l.a.createElement("div",{className:t.stepNumberContainer}),l.a.createElement("div",{className:t.subStepContent},l.a.createElement(h.a,{variant:"body2"},"COS \u5b58\u50a8\u6876 \u5ba2\u6237\u7aef\u76f4\u4f20\u9700\u8981\u501f\u52a9\u817e\u8baf\u4e91\u7684",l.a.createElement(ja.a,{href:"https://console.cloud.tencent.com/scf/index?rid=16",target:"_blank"},"\u4e91\u51fd\u6570"),"\u4ea7\u54c1\u4ee5\u786e\u4fdd\u4e0a\u4f20\u56de\u8c03\u53ef\u63a7\u3002\u5982\u679c\u60a8\u6253\u7b97\u5c06\u6b64\u5b58\u50a8\u7b56\u7565\u81ea\u7528\uff0c\u6216\u8005\u5206\u914d\u7ed9\u53ef\u4fe1\u8d56\u7528\u6237\u7ec4\uff0c\u6b64\u6b65\u9aa4\u53ef\u4ee5\u8df3\u8fc7\u3002 \u5982\u679c\u662f\u4f5c\u4e3a\u516c\u6709\u4f7f\u7528\uff0c\u8bf7\u52a1\u5fc5\u521b\u5efa\u56de\u8c03\u4e91\u51fd\u6570\u3002",l.a.createElement("br",null),l.a.createElement("br",null)),l.a.createElement(h.a,{variant:"body2"},"Cloudreve \u53ef\u4ee5\u5c1d\u8bd5\u5e2e\u4f60\u81ea\u52a8\u521b\u5efa\u56de\u8c03\u4e91\u51fd\u6570\uff0c\u8bf7\u9009\u62e9 COS \u5b58\u50a8\u6876 \u6240\u5728\u5730\u57df\u540e\u7ee7\u7eed\u3002 \u521b\u5efa\u53ef\u80fd\u4f1a\u82b1\u8d39\u6570\u79d2\u949f\uff0c\u8bf7\u8010\u5fc3\u7b49\u5f85\u3002\u521b\u5efa\u524d\u8bf7\u786e\u4fdd\u60a8\u7684\u817e\u8baf\u4e91\u8d26\u53f7\u5df2\u5f00\u542f\u4e91\u51fd\u6570\u670d\u52a1\u3002"),l.a.createElement("div",{className:t.form},l.a.createElement(Qe.a,null,l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u5b58\u50a8\u6876\u6240\u5728\u5730\u533a"),l.a.createElement(Ye.a,{value:T,onChange:function(e){return A(e.target.value)},required:!0},l.a.createElement($e.a,{value:"ap-beijing"},"\u534e\u5317\u5730\u533a(\u5317\u4eac)"),l.a.createElement($e.a,{value:"ap-chengdu"},"\u897f\u5357\u5730\u533a(\u6210\u90fd)"),l.a.createElement($e.a,{value:"ap-guangzhou"},"\u534e\u5357\u5730\u533a(\u5e7f\u5dde)"),l.a.createElement($e.a,{value:"ap-guangzhou-open"},"\u534e\u5357\u5730\u533a(\u5e7f\u5ddeOpen)"),l.a.createElement($e.a,{value:"ap-hongkong"},"\u6e2f\u6fb3\u53f0\u5730\u533a(\u4e2d\u56fd\u9999\u6e2f)"),l.a.createElement($e.a,{value:"ap-mumbai"},"\u4e9a\u592a\u5357\u90e8(\u5b5f\u4e70)"),l.a.createElement($e.a,{value:"ap-shanghai"},"\u534e\u4e1c\u5730\u533a(\u4e0a\u6d77)"),l.a.createElement($e.a,{value:"ap-singapore"},"\u4e9a\u592a\u4e1c\u5357(\u65b0\u52a0\u5761)"),l.a.createElement($e.a,{value:"na-siliconvalley"},"\u7f8e\u56fd\u897f\u90e8(\u7845\u8c37)"),l.a.createElement($e.a,{value:"na-toronto"},"\u5317\u7f8e\u5730\u533a(\u591a\u4f26\u591a)")))),l.a.createElement("div",{className:t.form},l.a.createElement(Ke.a,{disabled:E,color:"secondary",variant:"contained",className:t.button,onClick:function(){return b(!0),void Oe.b.post("/admin/policy/scf",{id:I,region:T}).then((function(e){U("top","right","\u56de\u8c03\u4e91\u51fd\u6570\u5df2\u6dfb\u52a0","success"),u(6)})).catch((function(e){U("top","right",e.message,"error")})).then((function(){b(!1)}))},classes:{label:t.viewButtonLabel}},"\u8ba9 Cloudreve \u5e2e\u6211\u521b\u5efa")))),l.a.createElement("div",{className:t.stepFooter},l.a.createElement(Ke.a,{color:"default",className:t.button,onClick:function(){u((function(e){return e+1})),O((function(e){var a=new Set(e.values());return a.add(s),a}))}},"\u8df3\u8fc7")," ")),6===s&&l.a.createElement(l.a.Fragment,null,l.a.createElement("form",{className:t.stepContent},l.a.createElement(h.a,null,"\u5b58\u50a8\u7b56\u7565\u5df2",e.policy?"\u4fdd\u5b58":"\u6dfb\u52a0","\uff01"),l.a.createElement(h.a,{variant:"body2",color:"textSecondary"},"\u8981\u4f7f\u7528\u6b64\u5b58\u50a8\u7b56\u7565\uff0c\u8bf7\u5230\u7528\u6237\u7ec4\u7ba1\u7406\u9875\u9762\uff0c\u4e3a\u76f8\u5e94\u7528\u6237\u7ec4\u7ed1\u5b9a\u6b64\u5b58\u50a8\u7b56\u7565\u3002")),l.a.createElement("div",{className:t.stepFooter},l.a.createElement(Ke.a,{color:"primary",className:t.button,onClick:function(){return c.push("/admin/policy")}},"\u8fd4\u56de\u5b58\u50a8\u7b56\u7565\u5217\u8868"))),l.a.createElement(Lt,{open:"file"===C,isFile:!0,onClose:function(){return j("")}}),l.a.createElement(Lt,{open:"path"===C,onClose:function(){return j("")}}))}function hn(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function vn(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?hn(t,!0).forEach((function(a){Object(m.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):hn(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var gn=Object(c.a)((function(e){return{stepContent:{padding:"16px 32px 16px 32px"},form:{maxWidth:400,marginTop:20},formContainer:Object(m.a)({},e.breakpoints.up("md"),{padding:"0px 24px 0 24px"}),subStepContainer:{display:"flex",marginBottom:20,padding:10,transition:e.transitions.create("background-color",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),"&:focus-within":{backgroundColor:e.palette.background.default}},stepNumber:{width:20,height:20,backgroundColor:Object(u.e)(e.palette.secondary.light,.2),color:e.palette.secondary.contrastText,textAlign:"center",borderRadius:" 50%"},stepNumberContainer:{marginRight:10},stepFooter:{marginTop:32},button:{marginRight:e.spacing(1)},viewButtonLabel:{textTransform:"none"},"@global":{code:{color:"rgba(0, 0, 0, 0.87)",display:"inline-block",padding:"2px 6px",fontFamily:' Consolas, "Liberation Mono", Menlo, Courier, monospace',borderRadius:"2px",backgroundColor:"rgba(255,229,100,0.1)"}}}})),On=[{title:"\u5e94\u7528\u6388\u6743",optional:!1},{title:"\u4e0a\u4f20\u8def\u5f84",optional:!1},{title:"\u4e0a\u4f20\u9650\u5236",optional:!1},{title:"\u8d26\u53f7\u6388\u6743",optional:!1},{title:"\u5b8c\u6210",optional:!1}];function yn(e){var a=gn(),t=Object($.g)(),c=Object(r.useState)(0),i=Object(n.a)(c,2),o=i[0],s=i[1],u=Object(r.useState)(!1),p=Object(n.a)(u,2),d=p[0],E=p[1],b=l.a.useState(new Set),f=Object(n.a)(b,2),v=f[0],g=(f[1],Object(r.useState)("")),O=Object(n.a)(g,2),y=O[0],N=O[1],C=Object(r.useState)(e.policy?e.policy:{Type:"onedrive",Name:"",BucketName:"",SecretKey:"",AccessKey:"",BaseURL:"",Server:"https://graph.microsoft.com/v1.0",IsPrivate:"true",DirNameRule:"uploads/{year}/{month}/{day}",AutoRename:"true",FileNameRule:"{randomkey8}_{originname}",IsOriginLinkEnable:"false",MaxSize:"0",OptionsSerialized:{file_type:"",od_redirect:""}}),j=Object(n.a)(C,2),S=j[0],k=j[1],_=Object(r.useState)(e.policy?e.policy.ID:0),x=Object(n.a)(_,2),w=x[0],P=x[1],D=Object(r.useState)(!1),z=Object(n.a)(D,2),W=z[0],F=z[1],I=function(e){return function(a){k(vn({},S,Object(m.a)({},e,a.target.value)))}},q=Object(Z.c)(),R=Object(r.useCallback)((function(e,a,t,n){return q(Object(ee.P)(e,a,t,n))}),[q]);Object(r.useEffect)((function(){Oe.b.post("/admin/setting",{keys:["siteURL"]}).then((function(e){e.data.siteURL.startsWith("https://")||F(!0),""===S.OptionsSerialized.od_redirect&&k(vn({},S,{OptionsSerialized:vn({},S.OptionsSerialized,{od_redirect:new URL("/api/v3/callback/onedrive/auth",e.data.siteURL).toString()})}))})).catch((function(e){R("top","right",e.message,"error")}))}),[]);var L;return l.a.createElement("div",null,l.a.createElement(la,{open:W,onClose:function(){return F(!1)},title:"\u8b66\u544a",msg:"\u60a8\u5fc5\u987b\u542f\u7528 HTTPS \u624d\u80fd\u4f7f\u7528 OneDrive \u5b58\u50a8\u7b56\u7565\uff1b\u542f\u7528\u540e\u540c\u6b65\u66f4\u6539 \u53c2\u6570\u8bbe\u7f6e - \u7ad9\u70b9\u4fe1\u606f - \u7ad9\u70b9URL\u3002"}),l.a.createElement(h.a,{variant:"h6"},e.policy?"\u4fee\u6539":"\u6dfb\u52a0"," OneDrive \u5b58\u50a8\u7b56\u7565"),l.a.createElement(Dt.a,{activeStep:o},On.map((function(e,a){var t,n={},r={};return e.optional&&(r.optional=l.a.createElement(h.a,{variant:"caption"},"\u53ef\u9009")),t=a,v.has(t)&&(n.completed=!1),l.a.createElement(Wt.a,Object.assign({key:e.title},n),l.a.createElement(zt.a,r,e.title))}))),0===o&&l.a.createElement("form",{className:a.stepContent,onSubmit:function(e){e.preventDefault(),s(1)}},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"1")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u524d\u5f80",l.a.createElement(ja.a,{href:"https://portal.azure.com/#blade/Microsoft_AAD_IAM/ActiveDirectoryMenuBlade/Overview",target:"_blank"},"Azure Active Directory \u63a7\u5236\u53f0 (\u56fd\u9645\u7248\u8d26\u53f7)")," ","\u6216\u8005"," ",l.a.createElement(ja.a,{href:"https://portal.azure.cn/#blade/Microsoft_AAD_IAM/ActiveDirectoryMenuBlade/Overview",target:"_blank"},"Azure Active Directory \u63a7\u5236\u53f0 (\u4e16\u7eaa\u4e92\u8054\u8d26\u53f7)"),"\u5e76\u767b\u5f55\uff0c\u767b\u5f55\u540e\u8fdb\u5165",l.a.createElement("code",null,"Azure Active Directory"),"\u7ba1\u7406\u9762\u677f\u3002"))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"2")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u8fdb\u5165\u5de6\u4fa7 ",l.a.createElement("code",null,"\u5e94\u7528\u6ce8\u518c")," \u83dc\u5355\uff0c\u5e76\u70b9\u51fb ",l.a.createElement("code",null,"\u65b0\u6ce8\u518c")," \u6309\u94ae\u3002"))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"3")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u586b\u5199\u5e94\u7528\u6ce8\u518c\u8868\u5355\u3002\u5176\u4e2d\uff0c\u540d\u79f0\u53ef\u4efb\u53d6\uff1b",l.a.createElement("code",null,"\u91cd\u5b9a\u5411 URI (\u53ef\u9009)"),"\u8bf7\u9009\u62e9",l.a.createElement("code",null,"Web"),"\uff0c\u5e76\u586b\u5199",l.a.createElement("code",null,S.OptionsSerialized.od_redirect),"\uff1b \u5176\u4ed6\u4fdd\u6301\u9ed8\u8ba4\u5373\u53ef"))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"4")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u521b\u5efa\u5b8c\u6210\u540e\u8fdb\u5165\u5e94\u7528\u7ba1\u7406\u7684",l.a.createElement("code",null,"\u6982\u89c8"),"\u9875\u9762\uff0c\u590d\u5236",l.a.createElement("code",null,"\u5e94\u7528\u7a0b\u5e8f(\u5ba2\u6237\u7aef) ID"),"\u5e76\u586b\u5199\u5728\u4e0b\u65b9\uff1a"),l.a.createElement("div",{className:a.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u5e94\u7528\u7a0b\u5e8f(\u5ba2\u6237\u7aef) ID"),l.a.createElement(Xe.a,{required:!0,value:S.BucketName,onChange:I("BucketName")}))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"5")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u8fdb\u5165\u5e94\u7528\u7ba1\u7406\u9875\u9762\u5de6\u4fa7\u7684",l.a.createElement("code",null,"\u8bc1\u4e66\u548c\u5bc6\u7801"),"\u83dc\u5355\uff0c\u70b9\u51fb",l.a.createElement("code",null,"\u65b0\u5efa\u5ba2\u6237\u7aef\u5bc6\u7801"),"\u6309\u94ae\uff0c",l.a.createElement("code",null,"\u622a\u6b62\u671f\u9650"),"\u9009\u62e9\u4e3a",l.a.createElement("code",null,"\u4ece\u4e0d"),"\u3002\u521b\u5efa\u5b8c\u6210\u540e\u5c06\u5ba2\u6237\u7aef\u5bc6\u7801\u7684\u503c\u586b\u5199\u5728\u4e0b\u65b9\uff1a"),l.a.createElement("div",{className:a.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u5ba2\u6237\u7aef\u5bc6\u7801"),l.a.createElement(Xe.a,{required:!0,value:S.SecretKey,onChange:I("SecretKey")}))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"6")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u9009\u62e9\u60a8\u7684 OneDrive \u8d26\u53f7\u7c7b\u578b\uff1a"),l.a.createElement("div",{className:a.form},l.a.createElement(Qe.a,{required:!0,component:"fieldset"},l.a.createElement(Ft.a,{required:!0,value:S.Server,onChange:I("Server"),row:!0},l.a.createElement(ra.a,{value:"https://graph.microsoft.com/v1.0",control:l.a.createElement(It.a,{color:"primary"}),label:"\u56fd\u9645\u7248"}),l.a.createElement(ra.a,{value:"https://microsoftgraph.chinacloudapi.cn/v1.0",control:l.a.createElement(It.a,{color:"primary"}),label:"\u4e16\u7eaa\u4e92\u8054\u7248"})))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"7")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u4e3a\u6b64\u5b58\u50a8\u7b56\u7565\u547d\u540d\uff1a"),l.a.createElement("div",{className:a.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u5b58\u50a8\u7b56\u7565\u540d"),l.a.createElement(Xe.a,{required:!0,value:S.Name,onChange:I("Name")}))))),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(Ke.a,{disabled:d,type:"submit",variant:"contained",color:"primary"},"\u4e0b\u4e00\u6b65"))),1===o&&l.a.createElement("form",{className:a.stepContent,onSubmit:function(e){e.preventDefault(),s(2)}},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"1")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u8bf7\u5728\u4e0b\u65b9\u8f93\u5165\u6587\u4ef6\u7684\u5b58\u50a8\u76ee\u5f55\u8def\u5f84\uff0c\u53ef\u4ee5\u4e3a\u7edd\u5bf9\u8def\u5f84\u6216\u76f8\u5bf9\u8def\u5f84\uff08\u76f8\u5bf9\u4e8e \u4ece\u673a\u7684 Cloudreve\uff09\u3002\u8def\u5f84\u4e2d\u53ef\u4ee5\u4f7f\u7528\u9b54\u6cd5\u53d8\u91cf\uff0c\u6587\u4ef6\u5728\u4e0a\u4f20\u65f6\u4f1a\u81ea\u52a8\u66ff\u6362\u8fd9\u4e9b\u53d8\u91cf\u4e3a\u76f8\u5e94\u503c\uff1b \u53ef\u7528\u9b54\u6cd5\u53d8\u91cf\u53ef\u53c2\u8003"," ",l.a.createElement(ja.a,{color:"secondary",href:"javascript:void()",onClick:function(){return N("path")}},"\u8def\u5f84\u9b54\u6cd5\u53d8\u91cf\u5217\u8868")," ","\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u5b58\u50a8\u76ee\u5f55"),l.a.createElement(Xe.a,{required:!0,value:S.DirNameRule,onChange:I("DirNameRule")}))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"2")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u662f\u5426\u9700\u8981\u5bf9\u5b58\u50a8\u7684\u7269\u7406\u6587\u4ef6\u8fdb\u884c\u91cd\u547d\u540d\uff1f\u6b64\u5904\u7684\u91cd\u547d\u540d\u4e0d\u4f1a\u5f71\u54cd\u6700\u7ec8\u5448\u73b0\u7ed9\u7528\u6237\u7684 \u6587\u4ef6\u540d\u3002\u6587\u4ef6\u540d\u4e5f\u53ef\u4f7f\u7528\u9b54\u6cd5\u53d8\u91cf\uff0c \u53ef\u7528\u9b54\u6cd5\u53d8\u91cf\u53ef\u53c2\u8003"," ",l.a.createElement(ja.a,{color:"secondary",href:"javascript:void()",onClick:function(){return N("file")}},"\u6587\u4ef6\u540d\u9b54\u6cd5\u53d8\u91cf\u5217\u8868")," ","\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(Qe.a,{required:!0,component:"fieldset"},l.a.createElement(Ft.a,{"aria-label":"gender",name:"gender1",value:S.AutoRename,onChange:I("AutoRename"),row:!0},l.a.createElement(ra.a,{value:"true",control:l.a.createElement(It.a,{color:"primary"}),label:"\u5f00\u542f\u91cd\u547d\u540d"}),l.a.createElement(ra.a,{value:"false",control:l.a.createElement(It.a,{color:"primary"}),label:"\u4e0d\u5f00\u542f"})))),l.a.createElement(qt.a,{in:"true"===S.AutoRename},l.a.createElement("div",{className:a.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u547d\u540d\u89c4\u5219"),l.a.createElement(Xe.a,{required:"true"===S.AutoRename,value:S.FileNameRule,onChange:I("FileNameRule")})))))),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(Ke.a,{color:"default",className:a.button,onClick:function(){return s(0)}},"\u4e0a\u4e00\u6b65"),l.a.createElement(Ke.a,{disabled:d,type:"submit",variant:"contained",color:"primary"},"\u4e0b\u4e00\u6b65"))),2===o&&l.a.createElement("form",{className:a.stepContent,onSubmit:function(a){a.preventDefault(),E(!0);var t=vn({},S);t.OptionsSerialized=vn({},t.OptionsSerialized),"https://graph.microsoft.com/v1.0"===t.Server?t.BaseURL="https://login.microsoftonline.com/common/oauth2/v2.0":t.BaseURL="https://login.chinacloudapi.cn/common/oauth2",t.AutoRename="true"===t.AutoRename,t.IsOriginLinkEnable="true"===t.IsOriginLinkEnable,t.IsPrivate="true"===t.IsPrivate,t.MaxSize=parseInt(t.MaxSize),t.OptionsSerialized.file_type=t.OptionsSerialized.file_type.split(","),1===t.OptionsSerialized.file_type.length&&""===t.OptionsSerialized.file_type[0]&&(t.OptionsSerialized.file_type=[]),Oe.b.post("/admin/policy",{policy:t}).then((function(a){R("top","right","\u5b58\u50a8\u7b56\u7565\u5df2"+(e.policy?"\u4fdd\u5b58":"\u6dfb\u52a0"),"success"),s(3),P(a.data)})).catch((function(e){R("top","right",e.message,"error")})).then((function(){E(!1)})),E(!1)}},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"1")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u662f\u5426\u9650\u5236\u4e0a\u4f20\u7684\u5355\u6587\u4ef6\u5927\u5c0f\uff1f"),l.a.createElement("div",{className:a.form},l.a.createElement(Qe.a,{required:!0,component:"fieldset"},l.a.createElement(Ft.a,{required:!0,value:"0"===S.MaxSize?"false":"true",onChange:function(e){"true"===e.target.value?k(vn({},S,{MaxSize:"10485760"})):k(vn({},S,{MaxSize:"0"}))},row:!0},l.a.createElement(ra.a,{value:"true",control:l.a.createElement(It.a,{color:"primary"}),label:"\u9650\u5236"}),l.a.createElement(ra.a,{value:"false",control:l.a.createElement(It.a,{color:"primary"}),label:"\u4e0d\u9650\u5236"})))))),l.a.createElement(qt.a,{in:"0"!==S.MaxSize},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"2")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u8f93\u5165\u9650\u5236\uff1a"),l.a.createElement("div",{className:a.form},l.a.createElement(ha,{value:S.MaxSize,onChange:I("MaxSize"),min:0,max:0x8000000000000000,label:"\u5355\u6587\u4ef6\u5927\u5c0f\u9650\u5236"}))))),l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"0"!==S.MaxSize?"3":"2")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u662f\u5426\u9650\u5236\u4e0a\u4f20\u6587\u4ef6\u6269\u5c55\u540d\uff1f"),l.a.createElement("div",{className:a.form},l.a.createElement(Qe.a,{required:!0,component:"fieldset"},l.a.createElement(Ft.a,{required:!0,value:""===S.OptionsSerialized.file_type?"false":"true",onChange:function(e){"true"===e.target.value?k(vn({},S,{OptionsSerialized:vn({},S.OptionsSerialized,{file_type:"jpg,png,mp4,zip,rar"})})):k(vn({},S,{OptionsSerialized:vn({},S.OptionsSerialized,{file_type:""})}))},row:!0},l.a.createElement(ra.a,{value:"true",control:l.a.createElement(It.a,{color:"primary"}),label:"\u9650\u5236"}),l.a.createElement(ra.a,{value:"false",control:l.a.createElement(It.a,{color:"primary"}),label:"\u4e0d\u9650\u5236"})))))),l.a.createElement(qt.a,{in:""!==S.OptionsSerialized.file_type},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer},l.a.createElement("div",{className:a.stepNumber},"0"!==S.MaxSize?"4":"3")),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u8f93\u5165\u5141\u8bb8\u4e0a\u4f20\u7684\u6587\u4ef6\u6269\u5c55\u540d\uff0c\u591a\u4e2a\u8bf7\u4ee5\u534a\u89d2\u9017\u53f7 , \u9694\u5f00"),l.a.createElement("div",{className:a.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u6269\u5c55\u540d\u5217\u8868"),l.a.createElement(Xe.a,{value:S.OptionsSerialized.file_type,onChange:(L="file_type",function(e){k(vn({},S,{OptionsSerialized:vn({},S.OptionsSerialized,Object(m.a)({},L,e.target.value))}))})})))))),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(Ke.a,{color:"default",className:a.button,onClick:function(){return s(1)}},"\u4e0a\u4e00\u6b65")," ",l.a.createElement(Ke.a,{disabled:d,type:"submit",variant:"contained",color:"primary"},"\u4e0b\u4e00\u6b65"))),3===o&&l.a.createElement("form",{className:a.stepContent},l.a.createElement("div",{className:a.subStepContainer},l.a.createElement("div",{className:a.stepNumberContainer}),l.a.createElement("div",{className:a.subStepContent},l.a.createElement(h.a,{variant:"body2"},"\u5b58\u50a8\u7b56\u7565\u5df2",e.policy?"\u4fdd\u5b58":"\u6dfb\u52a0","\uff0c\u4f46\u662f\u4f60\u9700\u8981\u70b9\u51fb\u4e0b\u65b9\u6309\u94ae\uff0c\u5e76\u4f7f\u7528 OneDrive \u767b\u5f55\u6388\u6743\u4ee5\u5b8c\u6210\u521d\u59cb\u5316\u540e\u624d\u80fd\u4f7f\u7528\u3002 \u65e5\u540e\u4f60\u53ef\u4ee5\u5728\u5b58\u50a8\u7b56\u7565\u5217\u8868\u9875\u9762\u91cd\u65b0\u8fdb\u884c\u6388\u6743\u3002"),l.a.createElement("div",{className:a.form},l.a.createElement(Ke.a,{disabled:d,color:"secondary",variant:"contained",className:a.button,onClick:function(e){E(!0),Oe.b.get("/admin/policy/"+w+"/oauth").then((function(e){window.location.href=e.data})).catch((function(e){R("top","right",e.message,"error"),E(!1)}))},classes:{label:a.viewButtonLabel}},"\u8f6c\u5230\u6388\u6743\u9875\u9762")))),l.a.createElement("div",{className:a.stepFooter})),5===o&&l.a.createElement(l.a.Fragment,null,l.a.createElement("form",{className:a.stepContent},l.a.createElement(h.a,null,"\u5b58\u50a8\u7b56\u7565\u5df2\u6dfb\u52a0\uff01"),l.a.createElement(h.a,{variant:"body2",color:"textSecondary"},"\u8981\u4f7f\u7528\u6b64\u5b58\u50a8\u7b56\u7565\uff0c\u8bf7\u5230\u7528\u6237\u7ec4\u7ba1\u7406\u9875\u9762\uff0c\u4e3a\u76f8\u5e94\u7528\u6237\u7ec4\u7ed1\u5b9a\u6b64\u5b58\u50a8\u7b56\u7565\u3002")),l.a.createElement("div",{className:a.stepFooter},l.a.createElement(Ke.a,{color:"primary",className:a.button,onClick:function(){return t.push("/admin/policy")}},"\u8fd4\u56de\u5b58\u50a8\u7b56\u7565\u5217\u8868"))),l.a.createElement(Lt,{open:"file"===y,isFile:!0,onClose:function(){return N("")}}),l.a.createElement(Lt,{open:"path"===y,onClose:function(){return N("")}}))}var Nn=Object(c.a)((function(e){var a;return{root:(a={},Object(m.a)(a,e.breakpoints.up("md"),{marginLeft:100}),Object(m.a)(a,"marginBottom",40),a),content:{padding:e.spacing(2)}}}));function Cn(){var e=Nn(),a=Object(r.useState)(!1),t=Object(n.a)(a,2),c=(t[0],t[1],Object($.i)().type);return l.a.createElement("div",null,l.a.createElement(fe.a,{square:!0,className:e.content},"local"===c&&l.a.createElement(Kt,null),"remote"===c&&l.a.createElement(Xt,null),"qiniu"===c&&l.a.createElement(en,null),"oss"===c&&l.a.createElement(ln,null),"upyun"===c&&l.a.createElement(un,null),"cos"===c&&l.a.createElement(fn,null),"onedrive"===c&&l.a.createElement(yn,null)))}function jn(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function Sn(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?jn(t,!0).forEach((function(a){Object(m.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):jn(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var kn=Object(c.a)((function(e){return{stepContent:{padding:"16px 32px 16px 32px"},form:{maxWidth:400,marginTop:20},formContainer:Object(m.a)({},e.breakpoints.up("md"),{padding:"0px 24px 0 24px"}),subStepContainer:{display:"flex",marginBottom:20,padding:10,transition:e.transitions.create("background-color",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),"&:focus-within":{backgroundColor:e.palette.background.default}},stepNumber:{width:20,height:20,backgroundColor:Object(u.e)(e.palette.secondary.light,.2),color:e.palette.secondary.contrastText,textAlign:"center",borderRadius:" 50%"},stepNumberContainer:{marginRight:10},stepFooter:{marginTop:32},button:{marginRight:e.spacing(1)}}}));function _n(e){kn(),Object($.g)();var a=Object(r.useState)(!1),t=Object(n.a)(a,2),c=(t[0],t[1]),i=Object(r.useState)(e.policy),o=Object(n.a)(i,2),s=o[0],u=o[1],p=function(e){return function(a){u(Sn({},s,Object(m.a)({},e,a.target.value)))}},d=function(e){return function(a){u(Sn({},s,{OptionsSerialized:Sn({},s.OptionsSerialized,Object(m.a)({},e,a.target.value))}))}},E=Object(Z.c)(),b=Object(r.useCallback)((function(e,a,t,n){return E(Object(ee.P)(e,a,t,n))}),[E]);return l.a.createElement("div",null,l.a.createElement(h.a,{variant:"h6"},"\u7f16\u8f91\u5b58\u50a8\u7b56\u7565"),l.a.createElement(bt.a,null,l.a.createElement("form",{onSubmit:function(a){a.preventDefault(),c(!0);var t=Sn({},s);t.OptionsSerialized=Sn({},t.OptionsSerialized),t.AutoRename="true"===t.AutoRename,t.IsPrivate="true"===t.IsPrivate,t.IsOriginLinkEnable="true"===t.IsOriginLinkEnable,t.MaxSize=parseInt(t.MaxSize),t.OptionsSerialized.file_type=t.OptionsSerialized.file_type.split(","),1===t.OptionsSerialized.file_type.length&&""===t.OptionsSerialized.file_type[0]&&(t.OptionsSerialized.file_type=[]),Oe.b.post("/admin/policy",{policy:t}).then((function(a){b("top","right","\u5b58\u50a8\u7b56\u7565\u5df2"+(e.policy?"\u4fdd\u5b58":"\u6dfb\u52a0"),"success")})).catch((function(e){b("top","right",e.message,"error")})).then((function(){c(!1)})),c(!1)}},l.a.createElement(Pa.a,{"aria-label":"simple table"},l.a.createElement(wa.a,null,l.a.createElement(Da.a,null,l.a.createElement(za.a,null,"\u8bbe\u7f6e\u9879"),l.a.createElement(za.a,null,"\u503c"),l.a.createElement(za.a,null,"\u63cf\u8ff0"))),l.a.createElement(Wa.a,null,l.a.createElement(Da.a,null,l.a.createElement(za.a,{component:"th",scope:"row"},"ID"),l.a.createElement(za.a,null,s.ID),l.a.createElement(za.a,null,"\u5b58\u50a8\u7b56\u7565\u7f16\u53f7")),l.a.createElement(Da.a,null,l.a.createElement(za.a,{component:"th",scope:"row"},"\u7c7b\u578b"),l.a.createElement(za.a,null,s.Type),l.a.createElement(za.a,null,"\u5b58\u50a8\u7b56\u7565\u7c7b\u578b")),l.a.createElement(Da.a,null,l.a.createElement(za.a,{component:"th",scope:"row"},"\u540d\u79f0"),l.a.createElement(za.a,null,l.a.createElement(Qe.a,null,l.a.createElement(Xe.a,{required:!0,value:s.Name,onChange:p("Name")}))),l.a.createElement(za.a,null,"\u5b58\u50a8\u7b56\u540d\u79f0")),l.a.createElement(Da.a,null,l.a.createElement(za.a,{component:"th",scope:"row"},"Server"),l.a.createElement(za.a,null,l.a.createElement(Qe.a,null,l.a.createElement(Xe.a,{value:s.Server,onChange:p("Server")}))),l.a.createElement(za.a,null,"\u5b58\u50a8\u7aef Endpoint")),l.a.createElement(Da.a,null,l.a.createElement(za.a,{component:"th",scope:"row"},"BucketName"),l.a.createElement(za.a,null,l.a.createElement(Qe.a,null,l.a.createElement(Xe.a,{value:s.BucketName,onChange:p("BucketName")}))),l.a.createElement(za.a,null,"\u5b58\u50a8\u6876\u6807\u8bc6")),l.a.createElement(Da.a,null,l.a.createElement(za.a,{component:"th",scope:"row"},"\u79c1\u6709\u7a7a\u95f4"),l.a.createElement(za.a,null,l.a.createElement(Qe.a,null,l.a.createElement(Ft.a,{required:!0,value:s.IsPrivate,onChange:p("IsPrivate"),row:!0},l.a.createElement(ra.a,{value:"true",control:l.a.createElement(It.a,{color:"primary"}),label:"\u662f"}),l.a.createElement(ra.a,{value:"false",control:l.a.createElement(It.a,{color:"primary"}),label:"\u5426"})))),l.a.createElement(za.a,null,"\u662f\u5426\u4e3a\u79c1\u6709\u7a7a\u95f4")),l.a.createElement(Da.a,null,l.a.createElement(za.a,{component:"th",scope:"row"},"\u6587\u4ef6\u8d44\u6e90\u6839URL"),l.a.createElement(za.a,null,l.a.createElement(Qe.a,null,l.a.createElement(Xe.a,{value:s.BaseURL,onChange:p("BaseURL")}))),l.a.createElement(za.a,null,"\u9884\u89c8/\u83b7\u53d6\u6587\u4ef6\u5916\u94fe\u65f6\u751f\u6210URL\u7684\u524d\u7f00")),l.a.createElement(Da.a,null,l.a.createElement(za.a,{component:"th",scope:"row"},"AccessKey"),l.a.createElement(za.a,null,l.a.createElement(Qe.a,null,l.a.createElement(Xe.a,{multiline:!0,rowsMax:10,value:s.AccessKey,onChange:p("AccessKey")}))),l.a.createElement(za.a,null,"AccessKey / \u5237\u65b0Token")),l.a.createElement(Da.a,null,l.a.createElement(za.a,{component:"th",scope:"row"},"SecretKey"),l.a.createElement(za.a,null,l.a.createElement(Qe.a,null,l.a.createElement(Xe.a,{multiline:!0,rowsMax:10,value:s.SecretKey,onChange:p("SecretKey")}))),l.a.createElement(za.a,null,"SecretKey")),l.a.createElement(Da.a,null,l.a.createElement(za.a,{component:"th",scope:"row"},"\u6700\u5927\u5355\u6587\u4ef6\u5c3a\u5bf8 (Bytes)"),l.a.createElement(za.a,null,l.a.createElement(Qe.a,null,l.a.createElement(Xe.a,{type:"number",inputProps:{min:0,step:1},value:s.MaxSize,onChange:p("MaxSize")}))),l.a.createElement(za.a,null,"\u6700\u5927\u53ef\u4e0a\u4f20\u7684\u6587\u4ef6\u5c3a\u5bf8\uff0c\u586b\u5199\u4e3a0\u8868\u793a\u4e0d\u9650\u5236")),l.a.createElement(Da.a,null,l.a.createElement(za.a,{component:"th",scope:"row"},"\u81ea\u52a8\u91cd\u547d\u540d"),l.a.createElement(za.a,null,l.a.createElement(Qe.a,null,l.a.createElement(Ft.a,{required:!0,value:s.AutoRename,onChange:p("AutoRename"),row:!0},l.a.createElement(ra.a,{value:"true",control:l.a.createElement(It.a,{color:"primary"}),label:"\u662f"}),l.a.createElement(ra.a,{value:"false",control:l.a.createElement(It.a,{color:"primary"}),label:"\u5426"})))),l.a.createElement(za.a,null,"\u662f\u5426\u6839\u636e\u89c4\u5219\u5bf9\u4e0a\u4f20\u7269\u7406\u6587\u4ef6\u91cd\u547d\u540d")),l.a.createElement(Da.a,null,l.a.createElement(za.a,{component:"th",scope:"row"},"\u5b58\u50a8\u8def\u5f84"),l.a.createElement(za.a,null,l.a.createElement(Qe.a,null,l.a.createElement(Xe.a,{multiline:!0,value:s.DirNameRule,onChange:p("DirNameRule")}))),l.a.createElement(za.a,null,"\u6587\u4ef6\u7269\u7406\u5b58\u50a8\u8def\u5f84")),l.a.createElement(Da.a,null,l.a.createElement(za.a,{component:"th",scope:"row"},"\u5b58\u50a8\u6587\u4ef6\u540d"),l.a.createElement(za.a,null,l.a.createElement(Qe.a,null,l.a.createElement(Xe.a,{multiline:!0,value:s.FileNameRule,onChange:p("FileNameRule")}))),l.a.createElement(za.a,null,"\u6587\u4ef6\u7269\u7406\u5b58\u50a8\u6587\u4ef6\u540d")),l.a.createElement(Da.a,null,l.a.createElement(za.a,{component:"th",scope:"row"},"\u5141\u8bb8\u83b7\u53d6\u5916\u94fe"),l.a.createElement(za.a,null,l.a.createElement(Qe.a,null,l.a.createElement(Ft.a,{required:!0,value:s.IsOriginLinkEnable,onChange:p("IsOriginLinkEnable"),row:!0},l.a.createElement(ra.a,{value:"true",control:l.a.createElement(It.a,{color:"primary"}),label:"\u662f"}),l.a.createElement(ra.a,{value:"false",control:l.a.createElement(It.a,{color:"primary"}),label:"\u5426"})))),l.a.createElement(za.a,null,"\u662f\u5426\u5141\u8bb8\u83b7\u53d6\u5916\u94fe\u3002\u6ce8\u610f\uff0c\u67d0\u4e9b\u5b58\u50a8\u7b56\u7565\u7c7b\u578b\u4e0d\u652f\u6301\uff0c\u5373\u4f7f\u5728\u6b64\u5f00\u542f\uff0c\u83b7\u53d6\u7684\u5916\u94fe\u4e5f\u65e0\u6cd5\u4f7f\u7528\u3002")),l.a.createElement(Da.a,null,l.a.createElement(za.a,{component:"th",scope:"row"},"\u53c8\u62cd\u4e91\u9632\u76d7\u94fe Token"),l.a.createElement(za.a,null,l.a.createElement(Qe.a,null,l.a.createElement(Xe.a,{multiline:!0,value:s.OptionsSerialized.token,onChange:d("token")}))),l.a.createElement(za.a,null,"\u4ec5\u5bf9\u53c8\u62cd\u4e91\u5b58\u50a8\u7b56\u7565\u6709\u6548")),l.a.createElement(Da.a,null,l.a.createElement(za.a,{component:"th",scope:"row"},"\u5141\u8bb8\u6587\u4ef6\u6269\u5c55\u540d"),l.a.createElement(za.a,null,l.a.createElement(Qe.a,null,l.a.createElement(Xe.a,{multiline:!0,value:s.OptionsSerialized.file_type,onChange:d("file_type")}))),l.a.createElement(za.a,null,"\u7559\u7a7a\u8868\u793a\u4e0d\u9650\u5236")),l.a.createElement(Da.a,null,l.a.createElement(za.a,{component:"th",scope:"row"},"\u5141\u8bb8\u7684 MimeType"),l.a.createElement(za.a,null,l.a.createElement(Qe.a,null,l.a.createElement(Xe.a,{multiline:!0,value:s.OptionsSerialized.mimetype,onChange:d("mimetype")}))),l.a.createElement(za.a,null,"\u4ec5\u5bf9\u4e03\u725b\u5b58\u50a8\u7b56\u7565\u6709\u6548")),l.a.createElement(Da.a,null,l.a.createElement(za.a,{component:"th",scope:"row"},"OneDrive \u91cd\u5b9a\u5411\u5730\u5740"),l.a.createElement(za.a,null,l.a.createElement(Qe.a,null,l.a.createElement(Xe.a,{multiline:!0,value:s.OptionsSerialized.od_redirect,onChange:d("od_redirect")}))),l.a.createElement(za.a,null,"\u4e00\u822c\u6dfb\u52a0\u540e\u65e0\u9700\u4fee\u6539")))),l.a.createElement(Ke.a,{type:"submit",color:"primary",variant:"contained",style:{margin:8}},"\u4fdd\u5b58\u66f4\u6539"))))}var xn=Object(c.a)((function(e){var a;return{root:(a={},Object(m.a)(a,e.breakpoints.up("md"),{marginLeft:100}),Object(m.a)(a,"marginBottom",40),a),content:{padding:e.spacing(2)}}}));function wn(){var e=xn(),a=Object(r.useState)(!1),t=Object(n.a)(a,2),c=(t[0],t[1],Object(r.useState)("")),i=Object(n.a)(c,2),o=i[0],m=i[1],s=Object(r.useState)({}),u=Object(n.a)(s,2),p=u[0],d=u[1],E=Object($.i)(),b=E.mode,f=E.id,h=Object(Z.c)(),v=Object(r.useCallback)((function(e,a,t,n){return h(Object(ee.P)(e,a,t,n))}),[h]);return Object(r.useEffect)((function(){m(""),Oe.b.get("/admin/policy/"+f).then((function(e){e.data.IsOriginLinkEnable=e.data.IsOriginLinkEnable?"true":"false",e.data.AutoRename=e.data.AutoRename?"true":"false",e.data.MaxSize=e.data.MaxSize.toString(),e.data.IsPrivate=e.data.IsPrivate?"true":"false",e.data.OptionsSerialized.file_type=e.data.OptionsSerialized.file_type?e.data.OptionsSerialized.file_type.join(","):"",d(e.data),m(e.data.Type)})).catch((function(e){v("top","right",e.message,"error")}))}),[f]),l.a.createElement("div",null,l.a.createElement(fe.a,{square:!0,className:e.content},"guide"===b&&l.a.createElement(l.a.Fragment,null,"local"===o&&l.a.createElement(Kt,{policy:p}),"remote"===o&&l.a.createElement(Xt,{policy:p}),"qiniu"===o&&l.a.createElement(en,{policy:p}),"oss"===o&&l.a.createElement(ln,{policy:p}),"upyun"===o&&l.a.createElement(un,{policy:p}),"cos"===o&&l.a.createElement(fn,{policy:p}),"onedrive"===o&&l.a.createElement(yn,{policy:p})),"pro"===b&&""!==o&&l.a.createElement(_n,{policy:p})))}var Pn=Object(c.a)((function(e){var a;return{root:(a={},Object(m.a)(a,e.breakpoints.up("md"),{marginLeft:100}),Object(m.a)(a,"marginBottom",40),a),content:{padding:e.spacing(2)},container:{overflowX:"auto"},tableContainer:{marginTop:16},header:{display:"flex",justifyContent:"space-between"},headerRight:{}}})),Dn=[{id:"#",label:"#",minWidth:50},{id:"name",label:"\u540d\u79f0",minWidth:170},{id:"type",label:"\u5b58\u50a8\u7b56\u7565",minWidth:170},{id:"count",label:"\u4e0b\u5c5e\u7528\u6237\u6570",minWidth:50,align:"right"},{id:"size",label:"\u6700\u5927\u5bb9\u91cf",minWidth:100,align:"right"},{id:"action",label:"\u64cd\u4f5c",minWidth:170,align:"right"}];function zn(){var e=Pn(),a=Object(r.useState)(!1),t=Object(n.a)(a,2),c=(t[0],t[1],Object(r.useState)(0)),i=Object(n.a)(c,2),o=(i[0],i[1],Object(r.useState)([])),m=Object(n.a)(o,2),s=m[0],u=m[1],p=Object(r.useState)([]),d=Object(n.a)(p,2),E=d[0],b=d[1],f=Object(r.useState)(1),h=Object(n.a)(f,2),v=h[0],O=h[1],y=Object(r.useState)(10),N=Object(n.a)(y,2),C=N[0],j=N[1],S=Object(r.useState)(0),k=Object(n.a)(S,2),_=k[0],x=k[1],w=Object(r.useState)(!1),P=Object(n.a)(w,2),D=(P[0],P[1],l.a.useState(null)),z=Object(n.a)(D,2),W=z[0],F=(z[1],l.a.useState(0)),I=Object(n.a)(F,2),q=(I[0],I[1],l.a.useState({})),R=Object(n.a)(q,2),L=R[0],T=R[1],A=Object($.h)(),B=Object($.g)(),M=new URLSearchParams(Object($.h)().search);Object(r.useEffect)((function(){"0"===M.get("code")?H("top","right","\u6388\u6743\u6210\u529f","success"):M.get("msg")&&""!==M.get("msg")&&H("top","right",M.get("msg")+", "+M.get("err"),"warning")}),[A]),Object(r.useEffect)((function(){U()}),[v,C]);var U=function(){Oe.b.post("/admin/group/list",{page:v,page_size:C,order_by:"id desc"}).then((function(e){u(e.data.items),b(e.data.statics),x(e.data.total),T(e.data.policies)})).catch((function(e){H("top","right",e.message,"error")}))},K=Object(Z.c)(),H=Object(r.useCallback)((function(e,a,t,n){return K(Object(ee.P)(e,a,t,n))}),[K]);Boolean(W);return l.a.createElement("div",null,l.a.createElement("div",{className:e.header},l.a.createElement(Ke.a,{color:"primary",onClick:function(){return B.push("/admin/group/add")},variant:"contained"},"\u65b0\u5efa\u7528\u6237\u7ec4"),l.a.createElement("div",{className:e.headerRight},l.a.createElement(Ke.a,{color:"primary",onClick:function(){return U()},variant:"outlined"},"\u5237\u65b0"))),l.a.createElement(fe.a,{square:!0,className:e.tableContainer},l.a.createElement(bt.a,{className:e.container},l.a.createElement(Pa.a,{"aria-label":"sticky table",size:"small"},l.a.createElement(wa.a,null,l.a.createElement(Da.a,{style:{height:52}},Dn.map((function(e){return l.a.createElement(za.a,{key:e.id,align:e.align,style:{minWidth:e.minWidth}},e.label)})))),l.a.createElement(Wa.a,null,s.map((function(e){return l.a.createElement(Da.a,{hover:!0,key:e.ID},l.a.createElement(za.a,null,e.ID),l.a.createElement(za.a,null,e.Name),l.a.createElement(za.a,null,null!==e.PolicyList&&e.PolicyList.map((function(a,t){var n="";return L[a]&&(n+=L[a].Name),t!==e.PolicyList.length-1&&(n+=" / "),n}))),l.a.createElement(za.a,{align:"right"},void 0!==E[e.ID]&&E[e.ID].toLocaleString()),l.a.createElement(za.a,{align:"right"},void 0!==E[e.ID]&&Object(Ia.q)(e.MaxStorage)),l.a.createElement(za.a,{align:"right"},l.a.createElement(kt.a,{title:"\u5220\u9664"},l.a.createElement(g.a,{onClick:function(){return a=e.ID,void Oe.b.delete("/admin/group/"+a).then((function(e){U(),H("top","right","\u7528\u6237\u7ec4\u5df2\u5220\u9664","success")})).catch((function(e){H("top","right",e.message,"error")}));var a},size:"small"},l.a.createElement(Fa.a,null))),l.a.createElement(kt.a,{title:"\u7f16\u8f91"},l.a.createElement(g.a,{onClick:function(){return B.push("/admin/group/edit/"+e.ID)},size:"small"},l.a.createElement(St.a,null)))))}))))),l.a.createElement(ht.a,{rowsPerPageOptions:[10,25,100],component:"div",count:_,rowsPerPage:C,page:v-1,onChangePage:function(e,a){return O(a+1)},onChangeRowsPerPage:function(e){j(e.target.value),O(1)}})))}function Wn(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function Fn(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?Wn(t,!0).forEach((function(a){Object(m.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Wn(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var In=Object(c.a)((function(e){var a;return{root:(a={},Object(m.a)(a,e.breakpoints.up("md"),{marginLeft:100}),Object(m.a)(a,"marginBottom",40),a),form:{maxWidth:400,marginTop:20,marginBottom:20},formContainer:Object(m.a)({},e.breakpoints.up("md"),{padding:"0px 24px 0 24px"})}}));function qn(e,a,t){return{fontWeight:-1===a.indexOf(e)?t.typography.fontWeightRegular:t.typography.fontWeightMedium}}function Rn(e){var a=In(),t=Object(r.useState)(!1),c=Object(n.a)(t,2),i=c[0],o=c[1],s=Object(r.useState)(e.group?e.group:{ID:0,Name:"",MaxStorage:"1073741824",ShareEnabled:"true",WebDAVEnabled:"true",SpeedLimit:"0",PolicyList:["1"],OptionsSerialized:{share_download:"true",aria2_options:"{}",compress_size:"0",decompress_size:"0"}}),u=Object(n.a)(s,2),d=u[0],E=u[1],b=Object(r.useState)({}),f=Object(n.a)(b,2),v=f[0],g=f[1],O=Object(p.a)(),y=Object($.g)();Object(r.useEffect)((function(){Oe.b.post("/admin/policy/list",{page:1,page_size:1e4,order_by:"id asc",conditions:{}}).then((function(e){var a={};e.data.items.forEach((function(e){a[e.ID]=e.Name})),g(a)})).catch((function(e){_("top","right",e.message,"error")}))}),[]);var N=function(e){return function(a){E(Fn({},d,Object(m.a)({},e,a.target.value)))}},C=function(e){return function(a){var t=a.target.checked?"true":"false";E(Fn({},d,Object(m.a)({},e,t)))}},j=function(e){return function(a){var t=a.target.checked?"true":"false";E(Fn({},d,{OptionsSerialized:Fn({},d.OptionsSerialized,Object(m.a)({},e,t))}))}},S=function(e){return function(a){E(Fn({},d,{OptionsSerialized:Fn({},d.OptionsSerialized,Object(m.a)({},e,a.target.value))}))}},k=Object(Z.c)(),_=Object(r.useCallback)((function(e,a,t,n){return k(Object(ee.P)(e,a,t,n))}),[k]);return l.a.createElement("div",null,l.a.createElement("form",{onSubmit:function(a){a.preventDefault();var t=Fn({},d,{OptionsSerialized:Fn({},d.OptionsSerialized)});if(["ShareEnabled","WebDAVEnabled"].forEach((function(e){t[e]="true"===t[e]})),["archive_download","archive_task","one_time_download","share_download","share_free","aria2"].forEach((function(e){void 0!==t.OptionsSerialized[e]&&(t.OptionsSerialized[e]="true"===t.OptionsSerialized[e])})),["MaxStorage","SpeedLimit"].forEach((function(e){t[e]=parseInt(t[e])})),["compress_size","decompress_size"].forEach((function(e){void 0!==t.OptionsSerialized[e]&&(t.OptionsSerialized[e]=parseInt(t.OptionsSerialized[e]))})),t.PolicyList=t.PolicyList.map((function(e){return parseInt(e)})),t.PolicyList.length<1&&3!==t.ID)_("top","right","\u81f3\u5c11\u8981\u4e3a\u7528\u6237\u7ec4\u9009\u62e9\u4e00\u4e2a\u5b58\u50a8\u7b56\u7565","warning");else{try{t.OptionsSerialized.aria2_options=JSON.parse(t.OptionsSerialized.aria2_options)}catch(a){return void _("top","right","Aria2 \u8bbe\u7f6e\u9879\u683c\u5f0f\u9519\u8bef","warning")}o(!0),Oe.b.post("/admin/group",{group:t}).then((function(a){y.push("/admin/group"),_("top","right","\u7528\u6237\u7ec4\u5df2"+(e.group?"\u4fdd\u5b58":"\u6dfb\u52a0"),"success")})).catch((function(e){_("top","right",e.message,"error")})).then((function(){o(!1)}))}}},l.a.createElement("div",{className:a.root},l.a.createElement(h.a,{variant:"h6",gutterBottom:!0},0===d.ID&&"\u65b0\u5efa\u7528\u6237\u7ec4",0!==d.ID&&"\u7f16\u8f91 "+d.Name),l.a.createElement("div",{className:a.formContainer},3!==d.ID&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:a.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u7528\u6237\u7ec4\u540d"),l.a.createElement(Xe.a,{value:d.Name,onChange:N("Name"),required:!0}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u7528\u6237\u7ec4\u7684\u540d\u79f0"))),l.a.createElement("div",{className:a.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u53ef\u7528\u5b58\u50a8\u7b56\u7565"),l.a.createElement(Ye.a,{labelId:"demo-mutiple-chip-label",id:"demo-mutiple-chip",multiple:!0,value:d.PolicyList,onChange:N("PolicyList"),input:l.a.createElement(Xe.a,{id:"select-multiple-chip"}),renderValue:function(e){return l.a.createElement("div",{className:a.chips},e.map((function(e){return l.a.createElement(Le.a,{style:{margin:2},key:e,size:"small",label:v[e],className:a.chip})})))}},Object.keys(v).map((function(e){return l.a.createElement($e.a,{key:e,value:e,style:qn(e,d.PolicyList,O)},v[e])}))),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u6307\u5b9a\u7528\u6237\u7ec4\u53ef\u7528\u7684\u5b58\u50a8\u7b56\u7565\uff0c\u53ef\u591a\u9009\uff0c\u7528\u6237\u53ef\u5728\u9009\u5b9a\u8303\u56f4\u5185\u81ea\u7531\u5207\u6362\u5b58\u50a8\u7b56\u7565\u3002"))),l.a.createElement("div",{className:a.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(ha,{value:d.MaxStorage,onChange:N("MaxStorage"),min:0,max:0x8000000000000000,label:"\u521d\u59cb\u5bb9\u91cf",required:!0})),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u7528\u6237\u7ec4\u4e0b\u7684\u7528\u6237\u521d\u59cb\u53ef\u7528\u6700\u5927\u5bb9\u91cf"))),l.a.createElement("div",{className:a.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(ha,{value:d.SpeedLimit,onChange:N("SpeedLimit"),min:0,max:0x8000000000000000,label:"\u4e0b\u8f7d\u9650\u901f",suffix:"/s",required:!0})),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u586b\u5199\u4e3a 0 \u8868\u793a\u4e0d\u9650\u5236\u3002\u5f00\u542f\u9650\u5236\u540e\uff0c \u6b64\u7528\u6237\u7ec4\u4e0b\u7684\u7528\u6237\u4e0b\u8f7d\u6240\u6709\u652f\u6301\u9650\u901f\u7684\u5b58\u50a8\u7b56\u7565\u4e0b\u7684\u6587\u4ef6\u65f6\uff0c\u4e0b\u8f7d\u6700\u5927\u901f\u5ea6\u4f1a\u88ab\u9650\u5236\u3002")),3!==d.ID&&l.a.createElement("div",{className:a.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(ra.a,{control:l.a.createElement(na.a,{checked:"true"===d.ShareEnabled,onChange:C("ShareEnabled")}),label:"\u5141\u8bb8\u521b\u5efa\u5206\u4eab"}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u5173\u95ed\u540e\uff0c\u7528\u6237\u65e0\u6cd5\u521b\u5efa\u5206\u4eab\u94fe\u63a5"))),l.a.createElement("div",{className:a.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(ra.a,{control:l.a.createElement(na.a,{checked:"true"===d.OptionsSerialized.share_download,onChange:j("share_download")}),label:"\u5141\u8bb8\u4e0b\u8f7d\u5206\u4eab"}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u5173\u95ed\u540e\uff0c\u7528\u6237\u65e0\u6cd5\u4e0b\u8f7d\u522b\u4eba\u521b\u5efa\u7684\u6587\u4ef6\u5206\u4eab"))),l.a.createElement("div",{className:a.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(ra.a,{control:l.a.createElement(na.a,{checked:"true"===d.OptionsSerialized.share_free,onChange:j("share_free")}),label:"\u514d\u79ef\u5206\u4e0b\u8f7d\u5206\u4eab"}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u5f00\u542f\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u514d\u8d39\u4e0b\u8f7d\u9700\u4ed8\u79ef\u5206\u7684\u5206\u4eab"))),3!==d.ID&&l.a.createElement("div",{className:a.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(ra.a,{control:l.a.createElement(na.a,{checked:"true"===d.WebDAVEnabled,onChange:C("WebDAVEnabled")}),label:"WebDAV"}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u5173\u95ed\u540e\uff0c\u7528\u6237\u65e0\u6cd5\u901a\u8fc7 WebDAV \u534f\u8bae\u8fde\u63a5\u81f3\u7f51\u76d8"))),l.a.createElement("div",{className:a.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(ra.a,{control:l.a.createElement(na.a,{checked:"true"===d.OptionsSerialized.one_time_download,onChange:j("one_time_download")}),label:"\u7981\u6b62\u591a\u6b21\u4e0b\u8f7d\u8bf7\u6c42"}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u53ea\u9488\u5bf9\u672c\u673a\u5b58\u50a8\u7b56\u7565\u6709\u6548\u3002\u5f00\u542f\u540e\uff0c\u7528\u6237\u65e0\u6cd5\u4f7f\u7528\u591a\u7ebf\u7a0b\u4e0b\u8f7d\u5de5\u5177\u3002"))),3!==d.ID&&l.a.createElement("div",{className:a.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(ra.a,{control:l.a.createElement(na.a,{checked:"true"===d.OptionsSerialized.aria2,onChange:j("aria2")}),label:"\u79bb\u7ebf\u4e0b\u8f7d"}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u662f\u5426\u5141\u8bb8\u7528\u6237\u521b\u5efa\u79bb\u7ebf\u4e0b\u8f7d\u4efb\u52a1"))),l.a.createElement(qt.a,{in:"true"===d.OptionsSerialized.aria2},l.a.createElement("div",{className:a.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"Aria2 \u4efb\u52a1\u53c2\u6570"),l.a.createElement(Xe.a,{multiline:!0,value:d.OptionsSerialized.aria2_options,onChange:S("aria2_options")}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u6b64\u7528\u6237\u7ec4\u521b\u5efa\u79bb\u7ebf\u4e0b\u8f7d\u4efb\u52a1\u65f6\u989d\u5916\u643a\u5e26\u7684\u53c2\u6570\uff0c\u4ee5 JSON \u7f16\u7801\u540e\u7684\u683c\u5f0f\u4e66\u5199\uff0c\u60a8\u53ef\u4e5f\u53ef\u4ee5\u5c06\u8fd9\u4e9b\u8bbe\u7f6e\u5199\u5728 Aria2 \u914d\u7f6e\u6587\u4ef6\u91cc\uff0c\u53ef\u7528\u53c2\u6570\u8bf7\u67e5\u9605\u5b98\u65b9\u6587\u6863")))),l.a.createElement("div",{className:a.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(ra.a,{control:l.a.createElement(na.a,{checked:"true"===d.OptionsSerialized.archive_download,onChange:j("archive_download")}),label:"\u6253\u5305\u4e0b\u8f7d"}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u662f\u5426\u5141\u8bb8\u7528\u6237\u591a\u9009\u6587\u4ef6\u6253\u5305\u4e0b\u8f7d"))),3!==d.ID&&l.a.createElement("div",{className:a.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(ra.a,{control:l.a.createElement(na.a,{checked:"true"===d.OptionsSerialized.archive_task,onChange:j("archive_task")}),label:"\u538b\u7f29/\u89e3\u538b\u7f29 \u4efb\u52a1"}),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u662f\u5426\u7528\u6237\u521b\u5efa \u538b\u7f29/\u89e3\u538b\u7f29 \u4efb\u52a1"))),l.a.createElement(qt.a,{in:"true"===d.OptionsSerialized.archive_task},l.a.createElement("div",{className:a.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(ha,{value:d.OptionsSerialized.compress_size,onChange:S("compress_size"),min:0,max:0x8000000000000000,label:"\u5f85\u538b\u7f29\u6587\u4ef6\u6700\u5927\u5927\u5c0f"})),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u7528\u6237\u53ef\u521b\u5efa\u7684\u538b\u7f29\u4efb\u52a1\u7684\u6587\u4ef6\u6700\u5927\u603b\u5927\u5c0f\uff0c\u586b\u5199\u4e3a 0 \u8868\u793a\u4e0d\u9650\u5236")),l.a.createElement("div",{className:a.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(ha,{value:d.OptionsSerialized.decompress_size,onChange:S("decompress_size"),min:0,max:0x8000000000000000,label:"\u5f85\u89e3\u538b\u6587\u4ef6\u6700\u5927\u5927\u5c0f"})),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u7528\u6237\u53ef\u521b\u5efa\u7684\u89e3\u538b\u7f29\u4efb\u52a1\u7684\u6587\u4ef6\u6700\u5927\u603b\u5927\u5c0f\uff0c\u586b\u5199\u4e3a 0 \u8868\u793a\u4e0d\u9650\u5236"))))),l.a.createElement("div",{className:a.root},l.a.createElement(Ke.a,{disabled:i,type:"submit",variant:"contained",color:"primary"},"\u4fdd\u5b58"))))}function Ln(){var e=Object(r.useState)({}),a=Object(n.a)(e,2),t=a[0],c=a[1],i=Object($.i)().id,o=Object(Z.c)(),m=Object(r.useCallback)((function(e,a,t,n){return o(Object(ee.P)(e,a,t,n))}),[o]);return Object(r.useEffect)((function(){c({}),Oe.b.get("/admin/group/"+i).then((function(e){if(["ShareEnabled","WebDAVEnabled"].forEach((function(a){e.data[a]=e.data[a]?"true":"false"})),["archive_download","archive_task","one_time_download","share_download","share_free","aria2"].forEach((function(a){void 0!==e.data.OptionsSerialized[a]&&(e.data.OptionsSerialized[a]=e.data.OptionsSerialized[a]?"true":"false")})),["MaxStorage","SpeedLimit"].forEach((function(a){e.data[a]=e.data[a].toString()})),["compress_size","decompress_size"].forEach((function(a){void 0!==e.data.OptionsSerialized[a]&&(e.data.OptionsSerialized[a]=e.data.OptionsSerialized[a].toString())})),e.data.PolicyList=e.data.PolicyList.map((function(e){return e.toString()})),void 0===e.data.OptionsSerialized.aria2_options)e.data.OptionsSerialized.aria2_options="{}";else try{e.data.OptionsSerialized.aria2_options=JSON.stringify(e.data.OptionsSerialized.aria2_options)}catch(a){return void m("top","right","Aria2 \u8bbe\u7f6e\u9879\u683c\u5f0f\u9519\u8bef","warning")}c(e.data)})).catch((function(e){m("top","right",e.message,"error")}))}),[i]),l.a.createElement("div",null,void 0!==t.ID&&l.a.createElement(Rn,{group:t}))}var Tn=t(5801),An=t(5802),Bn=t(5290),Mn=t(5295);function Un(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function Kn(e){var a=e.setFilter,t=e.setSearch,c=e.open,i=e.onClose,o=Object(r.useState)({group_id:"all",status:"all"}),s=Object(n.a)(o,2),u=s[0],p=s[1],d=Object(r.useState)([]),E=Object(n.a)(d,2),b=E[0],f=E[1],h=Object(r.useState)(""),v=Object(n.a)(h,2),g=v[0],O=v[1],y=Object(Z.c)(),N=Object(r.useCallback)((function(e,a,t,n){return y(Object(ee.P)(e,a,t,n))}),[y]),C=function(e){return function(a){p(function(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?Un(t,!0).forEach((function(a){Object(m.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Un(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}({},u,Object(m.a)({},e,a.target.value)))}};Object(r.useEffect)((function(){Oe.b.get("/admin/groups").then((function(e){f(e.data)})).catch((function(e){N("top","right",e.message,"error")}))}),[]);return l.a.createElement(Ae.a,{open:c,onClose:i,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",fullWidth:!0,maxWidth:"xs"},l.a.createElement(Te.a,{id:"alert-dialog-title"},"\u8fc7\u6ee4\u6761\u4ef6"),l.a.createElement(Be.a,null,l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{id:"demo-simple-select-label"},"\u7528\u6237\u7ec4"),l.a.createElement(Ye.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:u.group_id,onChange:C("group_id")},l.a.createElement($e.a,{value:"all"},"\u5168\u90e8"),b.map((function(e){return 3===e.ID?null:l.a.createElement($e.a,{key:e.ID,value:e.ID.toString()},e.Name)})))),l.a.createElement(Qe.a,{fullWidth:!0,style:{marginTop:16}},l.a.createElement(Ge.a,{id:"demo-simple-select-label"},"\u7528\u6237\u72b6\u6001"),l.a.createElement(Ye.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:u.status,onChange:C("status")},l.a.createElement($e.a,{value:"all"},"\u5168\u90e8"),l.a.createElement($e.a,{value:"0"},"\u6b63\u5e38"),l.a.createElement($e.a,{value:"1"},"\u672a\u6fc0\u6d3b"),l.a.createElement($e.a,{value:"2"},"\u88ab\u5c01\u7981"),l.a.createElement($e.a,{value:"3"},"\u8d85\u989d\u4f7f\u7528\u88ab\u5c01\u7981"))),l.a.createElement(Qe.a,{fullWidth:!0,style:{marginTop:16}},l.a.createElement(ua.a,{value:g,onChange:function(e){return O(e.target.value)},id:"standard-basic",label:"\u641c\u7d22 \u6635\u79f0 / \u7528\u6237\u540d"}))),l.a.createElement(Ue.a,null,l.a.createElement(Ke.a,{onClick:i,color:"default"},"\u53d6\u6d88"),l.a.createElement(Ke.a,{onClick:function(e){var n={};Object.keys(u).forEach((function(e){"all"!==u[e]&&(n[e]=u[e])})),a(n),t(""!==g?{nick:g,email:g}:{}),i()},color:"primary"},"\u5e94\u7528")))}var Hn=t(5240);function Jn(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}var Gn=Object(c.a)((function(e){var a;return{root:(a={},Object(m.a)(a,e.breakpoints.up("md"),{marginLeft:100}),Object(m.a)(a,"marginBottom",40),a),content:{padding:e.spacing(2)},container:{overflowX:"auto"},tableContainer:{marginTop:16},header:{display:"flex",justifyContent:"space-between"},headerRight:{},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(u.e)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function Qn(){var e=Gn(),a=Object(r.useState)([]),t=Object(n.a)(a,2),c=t[0],i=t[1],o=Object(r.useState)(1),s=Object(n.a)(o,2),u=s[0],d=s[1],E=Object(r.useState)(10),f=Object(n.a)(E,2),v=f[0],O=f[1],y=Object(r.useState)(0),N=Object(n.a)(y,2),C=N[0],j=N[1],S=Object(r.useState)({}),k=Object(n.a)(S,2),_=k[0],x=k[1],w=Object(r.useState)({}),P=Object(n.a)(w,2),D=P[0],z=P[1],W=Object(r.useState)(["id","desc"]),F=Object(n.a)(W,2),I=F[0],q=F[1],R=Object(r.useState)(!1),L=Object(n.a)(R,2),T=L[0],A=L[1],B=Object(r.useState)([]),M=Object(n.a)(B,2),U=M[0],K=M[1],H=Object(r.useState)(!1),J=Object(n.a)(H,2),G=J[0],Q=J[1],X=(Object($.h)(),Object($.g)()),V=(new URLSearchParams(Object($.h)().search),Object(p.a)());Object(r.useEffect)((function(){Y()}),[u,v,I,_,D]);var Y=function(){Oe.b.post("/admin/user/list",{page:u,page_size:v,order_by:I.join(" "),conditions:_,searches:D}).then((function(e){i(e.data.items),j(e.data.total),K([])})).catch((function(e){ne("top","right",e.message,"error")}))},ae=function(e){Q(!0),Oe.b.patch("/admin/user/ban/"+e).then((function(a){i(c.map((function(t){return t.ID===e?function(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?Jn(t,!0).forEach((function(a){Object(m.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Jn(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}({},t,{Status:a.data}):t})))})).catch((function(e){ne("top","right",e.message,"error")})).then((function(){Q(!1)}))},te=Object(Z.c)(),ne=Object(r.useCallback)((function(e,a,t,n){return te(Object(ee.P)(e,a,t,n))}),[te]),re=function(e){return-1!==U.indexOf(e)};return l.a.createElement("div",null,l.a.createElement(Kn,{filter:_,open:T,onClose:function(){return A(!1)},setSearch:z,setFilter:x}),l.a.createElement("div",{className:e.header},l.a.createElement(Ke.a,{style:{alignSelf:"center"},color:"primary",onClick:function(){return X.push("/admin/user/add")},variant:"contained"},"\u65b0\u5efa\u7528\u6237"),l.a.createElement("div",{className:e.headerRight},l.a.createElement(kt.a,{title:"\u8fc7\u6ee4"},l.a.createElement(g.a,{style:{marginRight:8},onClick:function(){return A(!0)}},l.a.createElement(Hn.a,{color:"secondary",variant:"dot",invisible:0===Object.keys(D).length&&0===Object.keys(_).length},l.a.createElement(Tn.a,null)))),l.a.createElement(Ke.a,{color:"primary",onClick:function(){return Y()},variant:"outlined"},"\u5237\u65b0"))),l.a.createElement(fe.a,{square:!0,className:e.tableContainer},U.length>0&&l.a.createElement(b.a,{className:e.highlight},l.a.createElement(h.a,{style:{flex:"1 1 100%"},color:"inherit",variant:"subtitle1"},"\u5df2\u9009\u62e9 ",U.length," \u4e2a\u5bf9\u8c61"),l.a.createElement(kt.a,{title:"\u5220\u9664"},l.a.createElement(g.a,{onClick:function(e){Q(!0),Oe.b.post("/admin/user/delete",{id:U}).then((function(e){Y(),ne("top","right","\u7528\u6237\u7ec4\u5df2\u5220\u9664","success")})).catch((function(e){ne("top","right",e.message,"error")})).then((function(){Q(!1)}))},disabled:G,"aria-label":"delete"},l.a.createElement(Fa.a,null)))),l.a.createElement(bt.a,{className:e.container},l.a.createElement(Pa.a,{"aria-label":"sticky table",size:"small"},l.a.createElement(wa.a,null,l.a.createElement(Da.a,{style:{height:52}},l.a.createElement(za.a,{padding:"checkbox"},l.a.createElement(Bn.a,{indeterminate:U.length>0&&U.length<c.length,checked:c.length>0&&U.length===c.length,onChange:function(e){if(e.target.checked){var a=c.map((function(e){return e.ID}));K(a)}else K([])},inputProps:{"aria-label":"select all desserts"}})),l.a.createElement(za.a,{style:{minWidth:59}},l.a.createElement(Mn.a,{active:"id"===I[0],direction:I[1],onClick:function(){return q(["id","asc"===I[1]?"desc":"asc"])}},"#","id"===I[0]?l.a.createElement("span",{className:e.visuallyHidden},"desc"===I[1]?"sorted descending":"sorted ascending"):null)),l.a.createElement(za.a,{style:{minWidth:120}},l.a.createElement(Mn.a,{active:"nick"===I[0],direction:I[1],onClick:function(){return q(["nick","asc"===I[1]?"desc":"asc"])}},"\u6635\u79f0","nick"===I[0]?l.a.createElement("span",{className:e.visuallyHidden},"desc"===I[1]?"sorted descending":"sorted ascending"):null)),l.a.createElement(za.a,{style:{minWidth:170}},l.a.createElement(Mn.a,{active:"email"===I[0],direction:I[1],onClick:function(){return q(["email","asc"===I[1]?"desc":"asc"])}},"Email","email"===I[0]?l.a.createElement("span",{className:e.visuallyHidden},"desc"===I[1]?"sorted descending":"sorted ascending"):null)),l.a.createElement(za.a,{style:{minWidth:70}},"\u7528\u6237\u7ec4"),l.a.createElement(za.a,{style:{minWidth:50}},"\u72b6\u6001"),l.a.createElement(za.a,{align:"right",style:{minWidth:80}},l.a.createElement(Mn.a,{active:"storage"===I[0],direction:I[1],onClick:function(){return q(["storage","asc"===I[1]?"desc":"asc"])}},"\u5df2\u7528\u7a7a\u95f4","storage"===I[0]?l.a.createElement("span",{className:e.visuallyHidden},"desc"===I[1]?"sorted descending":"sorted ascending"):null)),l.a.createElement(za.a,{style:{minWidth:100}},"\u64cd\u4f5c"))),l.a.createElement(Wa.a,null,c.map((function(e){return l.a.createElement(Da.a,{hover:!0,key:e.ID,role:"checkbox",selected:re(e.ID)},l.a.createElement(za.a,{padding:"checkbox"},l.a.createElement(Bn.a,{onClick:function(a){return function(e,a){var t=U.indexOf(a),n=[];-1===t?n=n.concat(U,a):0===t?n=n.concat(U.slice(1)):t===U.length-1?n=n.concat(U.slice(0,-1)):t>0&&(n=n.concat(U.slice(0,t),U.slice(t+1))),K(n)}(0,e.ID)},checked:re(e.ID)})),l.a.createElement(za.a,null,e.ID),l.a.createElement(za.a,null,e.Nick),l.a.createElement(za.a,null,e.Email),l.a.createElement(za.a,null,l.a.createElement(ja.a,{href:"/#/admin/group/edit/"+e.Group.ID},e.Group.Name)),l.a.createElement(za.a,null,0===e.Status&&l.a.createElement(h.a,{style:{color:V.palette.success.main},variant:"body2"},"\u6b63\u5e38"),1===e.Status&&l.a.createElement(h.a,{color:"textSecondary",variant:"body2"},"\u672a\u6fc0\u6d3b"),2===e.Status&&l.a.createElement(h.a,{color:"error",variant:"body2"},"\u88ab\u5c01\u7981"),3===e.Status&&l.a.createElement(h.a,{color:"error",variant:"body2"},"\u8d85\u989d\u5c01\u7981")),l.a.createElement(za.a,{align:"right"},Object(Ia.q)(e.Storage)),l.a.createElement(za.a,null,l.a.createElement(kt.a,{title:"\u5220\u9664"},l.a.createElement(g.a,{disabled:G,onClick:function(){return a=e.ID,Q(!0),void Oe.b.post("/admin/user/delete",{id:[a]}).then((function(e){Y(),ne("top","right","\u7528\u6237\u7ec4\u5df2\u5220\u9664","success")})).catch((function(e){ne("top","right",e.message,"error")})).then((function(){Q(!1)}));var a},size:"small"},l.a.createElement(Fa.a,null))),l.a.createElement(kt.a,{title:"\u7f16\u8f91"},l.a.createElement(g.a,{onClick:function(){return X.push("/admin/user/edit/"+e.ID)},size:"small"},l.a.createElement(St.a,null))),l.a.createElement(kt.a,{title:"\u5c01\u7981/\u89e3\u5c01"},l.a.createElement(g.a,{disabled:G,onClick:function(){return ae(e.ID)},size:"small"},l.a.createElement(An.a,null)))))}))))),l.a.createElement(ht.a,{rowsPerPageOptions:[10,25,100],component:"div",count:C,rowsPerPage:v,page:u-1,onChangePage:function(e,a){return d(a+1)},onChangeRowsPerPage:function(e){O(e.target.value),d(1)}})))}function Xn(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function Vn(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?Xn(t,!0).forEach((function(a){Object(m.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Xn(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var Yn=Object(c.a)((function(e){var a;return{root:(a={},Object(m.a)(a,e.breakpoints.up("md"),{marginLeft:100}),Object(m.a)(a,"marginBottom",40),a),form:{maxWidth:400,marginTop:20,marginBottom:20},formContainer:Object(m.a)({},e.breakpoints.up("md"),{padding:"0px 24px 0 24px"})}}));function $n(e){var a=Yn(),t=Object(r.useState)(!1),c=Object(n.a)(t,2),i=c[0],o=c[1],s=Object(r.useState)(e.user?e.user:{ID:0,Email:"",Nick:"",Password:"",Status:"0",GroupID:"2",Score:"0"}),u=Object(n.a)(s,2),d=u[0],E=u[1],b=Object(r.useState)([]),f=Object(n.a)(b,2),v=f[0],g=f[1],O=(Object(p.a)(),Object($.g)());Object(r.useEffect)((function(){Oe.b.get("/admin/groups").then((function(e){g(e.data)})).catch((function(e){C("top","right",e.message,"error")}))}),[]);var y=function(e){return function(a){E(Vn({},d,Object(m.a)({},e,a.target.value)))}},N=Object(Z.c)(),C=Object(r.useCallback)((function(e,a,t,n){return N(Object(ee.P)(e,a,t,n))}),[N]);return l.a.createElement("div",null,l.a.createElement("form",{onSubmit:function(a){a.preventDefault();var t=Vn({},d);["Status","GroupID","Score"].forEach((function(e){t[e]=parseInt(t[e])})),o(!0),Oe.b.post("/admin/user",{user:t,password:t.Password}).then((function(a){O.push("/admin/user"),C("top","right","\u7528\u6237\u5df2"+(e.user?"\u4fdd\u5b58":"\u6dfb\u52a0"),"success")})).catch((function(e){C("top","right",e.message,"error")})).then((function(){o(!1)}))}},l.a.createElement("div",{className:a.root},l.a.createElement(h.a,{variant:"h6",gutterBottom:!0},0===d.ID&&"\u521b\u5efa\u7528\u6237",0!==d.ID&&"\u7f16\u8f91 "+d.Nick),l.a.createElement("div",{className:a.formContainer},l.a.createElement("div",{className:a.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u90ae\u7bb1"),l.a.createElement(Xe.a,{value:d.Email,type:"email",onChange:y("Email"),required:!0}))),l.a.createElement("div",{className:a.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u6635\u79f0"),l.a.createElement(Xe.a,{value:d.Nick,onChange:y("Nick"),required:!0}))),l.a.createElement("div",{className:a.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u5bc6\u7801"),l.a.createElement(Xe.a,{type:"password",value:d.Password,onChange:y("Password"),required:0===d.ID}),l.a.createElement(Ve.a,{id:"component-helper-text"},0!==d.ID&&"\u7559\u7a7a\u8868\u793a\u4e0d\u4fee\u6539"))),l.a.createElement("div",{className:a.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u7528\u6237\u7ec4"),l.a.createElement(Ye.a,{value:d.GroupID,onChange:y("GroupID"),required:!0},v.map((function(e){return 3===e.ID?null:l.a.createElement($e.a,{key:e.ID,value:e.ID.toString()},e.Name)}))),l.a.createElement(Ve.a,{id:"component-helper-text"},"\u7528\u6237\u6240\u5c5e\u7528\u6237\u7ec4"))),l.a.createElement("div",{className:a.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u72b6\u6001"),l.a.createElement(Ye.a,{value:d.Status,onChange:y("Status"),required:!0},l.a.createElement($e.a,{value:"0"},"\u6b63\u5e38"),l.a.createElement($e.a,{value:"1"},"\u672a\u6fc0\u6d3b"),l.a.createElement($e.a,{value:"2"},"\u88ab\u5c01\u7981"),l.a.createElement($e.a,{value:"3"},"\u8d85\u989d\u4f7f\u7528\u88ab\u5c01\u7981")))),l.a.createElement("div",{className:a.form},l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{htmlFor:"component-helper"},"\u79ef\u5206"),l.a.createElement(Xe.a,{type:"number",inputProps:{min:0,step:1},value:d.Score,onChange:y("Score"),required:!0}))))),l.a.createElement("div",{className:a.root},l.a.createElement(Ke.a,{disabled:i,type:"submit",variant:"contained",color:"primary"},"\u4fdd\u5b58"))))}function Zn(){var e=Object(r.useState)({}),a=Object(n.a)(e,2),t=a[0],c=a[1],i=Object($.i)().id,o=Object(Z.c)(),m=Object(r.useCallback)((function(e,a,t,n){return o(Object(ee.P)(e,a,t,n))}),[o]);return Object(r.useEffect)((function(){c({}),Oe.b.get("/admin/user/"+i).then((function(e){["Status","GroupID","Score"].forEach((function(a){e.data[a]=e.data[a].toString()})),c(e.data)})).catch((function(e){m("top","right",e.message,"error")}))}),[i]),l.a.createElement("div",null,void 0!==t.ID&&l.a.createElement($n,{user:t}))}function er(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function ar(e){var a=e.setFilter,t=e.setSearch,c=e.open,i=e.onClose,o=Object(r.useState)({policy_id:"all",user_id:""}),s=Object(n.a)(o,2),u=s[0],p=s[1],d=Object(r.useState)([]),E=Object(n.a)(d,2),b=E[0],f=E[1],h=Object(r.useState)(""),v=Object(n.a)(h,2),g=v[0],O=v[1],y=Object(Z.c)(),N=Object(r.useCallback)((function(e,a,t,n){return y(Object(ee.P)(e,a,t,n))}),[y]),C=function(e){return function(a){p(function(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?er(t,!0).forEach((function(a){Object(m.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):er(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}({},u,Object(m.a)({},e,a.target.value)))}};Object(r.useEffect)((function(){Oe.b.post("/admin/policy/list",{page:1,page_size:1e4,order_by:"id asc",conditions:{}}).then((function(e){f(e.data.items)})).catch((function(e){N("top","right",e.message,"error")}))}),[]);return l.a.createElement(Ae.a,{open:c,onClose:i,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",fullWidth:!0,maxWidth:"xs"},l.a.createElement(Te.a,{id:"alert-dialog-title"},"\u8fc7\u6ee4\u6761\u4ef6"),l.a.createElement(Be.a,null,l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{id:"demo-simple-select-label"},"\u5b58\u50a8\u7b56\u7565"),l.a.createElement(Ye.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:u.policy_id,onChange:C("policy_id")},l.a.createElement($e.a,{value:"all"},"\u5168\u90e8"),b.map((function(e){return 3===e.ID?null:l.a.createElement($e.a,{key:e.ID,value:e.ID.toString()},e.Name)})))),l.a.createElement(Qe.a,{fullWidth:!0,style:{marginTop:16}},l.a.createElement(ua.a,{value:u.user_id,onChange:C("user_id"),id:"standard-basic",label:"\u4e0a\u4f20\u8005ID"})),l.a.createElement(Qe.a,{fullWidth:!0,style:{marginTop:16}},l.a.createElement(ua.a,{value:g,onChange:function(e){return O(e.target.value)},id:"standard-basic",label:"\u641c\u7d22 \u6587\u4ef6\u540d"}))),l.a.createElement(Ue.a,null,l.a.createElement(Ke.a,{onClick:i,color:"default"},"\u53d6\u6d88"),l.a.createElement(Ke.a,{onClick:function(e){var n={};Object.keys(u).forEach((function(e){"all"!==u[e]&&""!==u[e]&&(n[e]=u[e])})),a(n),t(""!==g?{name:g}:{}),i()},color:"primary"},"\u5e94\u7528")))}var tr=Object(c.a)((function(e){var a;return{root:(a={},Object(m.a)(a,e.breakpoints.up("md"),{marginLeft:100}),Object(m.a)(a,"marginBottom",40),a),content:{padding:e.spacing(2)},container:{overflowX:"auto"},tableContainer:{marginTop:16},header:{display:"flex",justifyContent:"space-between"},headerRight:{},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(u.e)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function nr(){var e=tr(),a=Object(r.useState)([]),t=Object(n.a)(a,2),c=t[0],i=t[1],o=Object(r.useState)(1),m=Object(n.a)(o,2),s=m[0],u=m[1],p=Object(r.useState)(10),d=Object(n.a)(p,2),E=d[0],f=d[1],v=Object(r.useState)(0),O=Object(n.a)(v,2),y=O[0],N=O[1],C=Object(r.useState)({}),j=Object(n.a)(C,2),S=j[0],k=j[1],_=Object(r.useState)({}),x=Object(n.a)(_,2),w=x[0],P=x[1],D=Object(r.useState)({}),z=Object(n.a)(D,2),W=z[0],F=z[1],I=Object(r.useState)(["id","desc"]),q=Object(n.a)(I,2),R=q[0],L=q[1],T=Object(r.useState)(!1),A=Object(n.a)(T,2),B=A[0],M=A[1],U=Object(r.useState)([]),K=Object(n.a)(U,2),H=K[0],J=K[1],G=Object(r.useState)(!1),Q=Object(n.a)(G,2),X=Q[0],V=Q[1];Object(r.useEffect)((function(){Y()}),[s,E,R,S,W]);var Y=function(){Oe.b.post("/admin/file/list",{page:s,page_size:E,order_by:R.join(" "),conditions:S,searches:W}).then((function(e){i(e.data.items),N(e.data.total),J([]),P(e.data.users)})).catch((function(e){ae("top","right",e.message,"error")}))},$=Object(Z.c)(),ae=Object(r.useCallback)((function(e,a,t,n){return $(Object(ee.P)(e,a,t,n))}),[$]),te=function(e){return-1!==H.indexOf(e)};return l.a.createElement("div",null,l.a.createElement(ar,{filter:S,open:B,onClose:function(){return M(!1)},setSearch:F,setFilter:k}),l.a.createElement("div",{className:e.header},l.a.createElement("div",{className:e.headerRight},l.a.createElement(kt.a,{title:"\u8fc7\u6ee4"},l.a.createElement(g.a,{style:{marginRight:8},onClick:function(){return M(!0)}},l.a.createElement(Hn.a,{color:"secondary",variant:"dot",invisible:0===Object.keys(W).length&&0===Object.keys(S).length},l.a.createElement(Tn.a,null)))),l.a.createElement(Ke.a,{color:"primary",onClick:function(){return Y()},variant:"outlined"},"\u5237\u65b0"))),l.a.createElement(fe.a,{square:!0,className:e.tableContainer},H.length>0&&l.a.createElement(b.a,{className:e.highlight},l.a.createElement(h.a,{style:{flex:"1 1 100%"},color:"inherit",variant:"subtitle1"},"\u5df2\u9009\u62e9 ",H.length," \u4e2a\u5bf9\u8c61"),l.a.createElement(kt.a,{title:"\u5220\u9664"},l.a.createElement(g.a,{onClick:function(e){V(!0),Oe.b.post("/admin/file/delete",{id:H}).then((function(e){Y(),ae("top","right","\u5220\u9664\u4efb\u52a1\u5c06\u5728\u540e\u53f0\u6267\u884c","success")})).catch((function(e){ae("top","right",e.message,"error")})).then((function(){V(!1)}))},disabled:X,"aria-label":"delete"},l.a.createElement(Fa.a,null)))),l.a.createElement(bt.a,{className:e.container},l.a.createElement(Pa.a,{"aria-label":"sticky table",size:"small"},l.a.createElement(wa.a,null,l.a.createElement(Da.a,{style:{height:52}},l.a.createElement(za.a,{padding:"checkbox"},l.a.createElement(Bn.a,{indeterminate:H.length>0&&H.length<c.length,checked:c.length>0&&H.length===c.length,onChange:function(e){if(e.target.checked){var a=c.map((function(e){return e.ID}));J(a)}else J([])},inputProps:{"aria-label":"select all desserts"}})),l.a.createElement(za.a,{style:{minWidth:59}},l.a.createElement(Mn.a,{active:"id"===R[0],direction:R[1],onClick:function(){return L(["id","asc"===R[1]?"desc":"asc"])}},"#","id"===R[0]?l.a.createElement("span",{className:e.visuallyHidden},"desc"===R[1]?"sorted descending":"sorted ascending"):null)),l.a.createElement(za.a,{style:{minWidth:250}},l.a.createElement(Mn.a,{active:"name"===R[0],direction:R[1],onClick:function(){return L(["name","asc"===R[1]?"desc":"asc"])}},"\u6587\u4ef6\u540d","name"===R[0]?l.a.createElement("span",{className:e.visuallyHidden},"desc"===R[1]?"sorted descending":"sorted ascending"):null)),l.a.createElement(za.a,{align:"right",style:{minWidth:70}},l.a.createElement(Mn.a,{active:"size"===R[0],direction:R[1],onClick:function(){return L(["size","asc"===R[1]?"desc":"asc"])}},"\u5927\u5c0f","size"===R[0]?l.a.createElement("span",{className:e.visuallyHidden},"desc"===R[1]?"sorted descending":"sorted ascending"):null)),l.a.createElement(za.a,{style:{minWidth:120}},"\u4e0a\u4f20\u8005"),l.a.createElement(za.a,{style:{minWidth:150}},"\u4e0a\u4f20\u4e8e"),l.a.createElement(za.a,{style:{minWidth:100}},"\u64cd\u4f5c"))),l.a.createElement(Wa.a,null,c.map((function(e){return l.a.createElement(Da.a,{hover:!0,key:e.ID,role:"checkbox",selected:te(e.ID)},l.a.createElement(za.a,{padding:"checkbox"},l.a.createElement(Bn.a,{onClick:function(a){return function(e,a){var t=H.indexOf(a),n=[];-1===t?n=n.concat(H,a):0===t?n=n.concat(H.slice(1)):t===H.length-1?n=n.concat(H.slice(0,-1)):t>0&&(n=n.concat(H.slice(0,t),H.slice(t+1))),J(n)}(0,e.ID)},checked:te(e.ID)})),l.a.createElement(za.a,null,e.ID),l.a.createElement(za.a,null,l.a.createElement(ja.a,{target:"_blank",color:"inherit",href:"/api/v3/admin/file/preview/"+e.ID},e.Name)),l.a.createElement(za.a,{align:"right"},Object(Ia.q)(e.Size)),l.a.createElement(za.a,null,l.a.createElement(ja.a,{href:"/#/admin/user/edit/"+e.UserID},w[e.UserID]?w[e.UserID].Nick:"\u672a\u77e5")),l.a.createElement(za.a,null,new Date(e.CreatedAt).toLocaleDateString()+" "+new Date(e.CreatedAt).toLocaleTimeString()),l.a.createElement(za.a,null,l.a.createElement(kt.a,{title:"\u5220\u9664"},l.a.createElement(g.a,{disabled:X,onClick:function(){return a=e.ID,V(!0),void Oe.b.post("/admin/file/delete",{id:[a]}).then((function(e){Y(),ae("top","right","\u5220\u9664\u4efb\u52a1\u5c06\u5728\u540e\u53f0\u6267\u884c","success")})).catch((function(e){ae("top","right",e.message,"error")})).then((function(){V(!1)}));var a},size:"small"},l.a.createElement(Fa.a,null)))))}))))),l.a.createElement(ht.a,{rowsPerPageOptions:[10,25,50,100],component:"div",count:y,rowsPerPage:E,page:s-1,onChangePage:function(e,a){return u(a+1)},onChangeRowsPerPage:function(e){f(e.target.value),u(1)}})))}function rr(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function lr(e){var a=e.setFilter,t=e.setSearch,c=e.open,i=e.onClose,o=Object(r.useState)({is_dir:"all",user_id:""}),s=Object(n.a)(o,2),u=s[0],p=s[1],d=Object(r.useState)(""),E=Object(n.a)(d,2),b=E[0],f=E[1],h=Object(Z.c)(),v=(Object(r.useCallback)((function(e,a,t,n){return h(Object(ee.P)(e,a,t,n))}),[h]),function(e){return function(a){p(function(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?rr(t,!0).forEach((function(a){Object(m.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):rr(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}({},u,Object(m.a)({},e,a.target.value)))}});return l.a.createElement(Ae.a,{open:c,onClose:i,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",fullWidth:!0,maxWidth:"xs"},l.a.createElement(Te.a,{id:"alert-dialog-title"},"\u8fc7\u6ee4\u6761\u4ef6"),l.a.createElement(Be.a,null,l.a.createElement(Qe.a,{fullWidth:!0},l.a.createElement(Ge.a,{id:"demo-simple-select-label"},"\u6e90\u6587\u4ef6\u7c7b\u578b"),l.a.createElement(Ye.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:u.is_dir,onChange:v("is_dir")},l.a.createElement($e.a,{value:"all"},"\u5168\u90e8"),l.a.createElement($e.a,{value:"1"},"\u76ee\u5f55"),l.a.createElement($e.a,{value:"0"},"\u6587\u4ef6"))),l.a.createElement(Qe.a,{fullWidth:!0,style:{marginTop:16}},l.a.createElement(ua.a,{value:u.user_id,onChange:v("user_id"),id:"standard-basic",label:"\u4e0a\u4f20\u8005ID"})),l.a.createElement(Qe.a,{fullWidth:!0,style:{marginTop:16}},l.a.createElement(ua.a,{value:b,onChange:function(e){return f(e.target.value)},id:"standard-basic",label:"\u641c\u7d22 \u6587\u4ef6\u540d"}))),l.a.createElement(Ue.a,null,l.a.createElement(Ke.a,{onClick:i,color:"default"},"\u53d6\u6d88"),l.a.createElement(Ke.a,{onClick:function(e){var n={};Object.keys(u).forEach((function(e){"all"!==u[e]&&""!==u[e]&&(n[e]=u[e])})),a(n),t(""!==b?{source_name:b}:{}),i()},color:"primary"},"\u5e94\u7528")))}var cr=Object(c.a)((function(e){var a;return{root:(a={},Object(m.a)(a,e.breakpoints.up("md"),{marginLeft:100}),Object(m.a)(a,"marginBottom",40),a),content:{padding:e.spacing(2)},container:{overflowX:"auto"},tableContainer:{marginTop:16},header:{display:"flex",justifyContent:"space-between"},headerRight:{},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(u.e)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function ir(){var e=cr(),a=Object(r.useState)([]),t=Object(n.a)(a,2),c=t[0],i=t[1],o=Object(r.useState)(1),m=Object(n.a)(o,2),s=m[0],u=m[1],p=Object(r.useState)(10),d=Object(n.a)(p,2),E=d[0],f=d[1],v=Object(r.useState)(0),O=Object(n.a)(v,2),y=O[0],N=O[1],C=Object(r.useState)({}),j=Object(n.a)(C,2),S=j[0],k=j[1],_=Object(r.useState)({}),x=Object(n.a)(_,2),w=x[0],P=x[1],D=Object(r.useState)({}),z=Object(n.a)(D,2),W=z[0],F=z[1],I=Object(r.useState)({}),q=Object(n.a)(I,2),R=q[0],L=q[1],T=Object(r.useState)(["id","desc"]),A=Object(n.a)(T,2),B=A[0],M=A[1],U=Object(r.useState)(!1),K=Object(n.a)(U,2),H=K[0],J=K[1],G=Object(r.useState)([]),Q=Object(n.a)(G,2),X=Q[0],V=Q[1],Y=Object(r.useState)(!1),$=Object(n.a)(Y,2),ae=$[0],te=$[1];Object(r.useEffect)((function(){ne()}),[s,E,B,S,R]);var ne=function(){Oe.b.post("/admin/share/list",{page:s,page_size:E,order_by:B.join(" "),conditions:S,searches:R}).then((function(e){P(e.data.users),F(e.data.ids),i(e.data.items),N(e.data.total),V([])})).catch((function(e){le("top","right",e.message,"error")}))},re=Object(Z.c)(),le=Object(r.useCallback)((function(e,a,t,n){return re(Object(ee.P)(e,a,t,n))}),[re]),ce=function(e){return-1!==X.indexOf(e)};return l.a.createElement("div",null,l.a.createElement(lr,{filter:S,open:H,onClose:function(){return J(!1)},setSearch:L,setFilter:k}),l.a.createElement("div",{className:e.header},l.a.createElement("div",{className:e.headerRight},l.a.createElement(kt.a,{title:"\u8fc7\u6ee4"},l.a.createElement(g.a,{style:{marginRight:8},onClick:function(){return J(!0)}},l.a.createElement(Hn.a,{color:"secondary",variant:"dot",invisible:0===Object.keys(R).length&&0===Object.keys(S).length},l.a.createElement(Tn.a,null)))),l.a.createElement(Ke.a,{color:"primary",onClick:function(){return ne()},variant:"outlined"},"\u5237\u65b0"))),l.a.createElement(fe.a,{square:!0,className:e.tableContainer},X.length>0&&l.a.createElement(b.a,{className:e.highlight},l.a.createElement(h.a,{style:{flex:"1 1 100%"},color:"inherit",variant:"subtitle1"},"\u5df2\u9009\u62e9 ",X.length," \u4e2a\u5bf9\u8c61"),l.a.createElement(kt.a,{title:"\u5220\u9664"},l.a.createElement(g.a,{onClick:function(e){te(!0),Oe.b.post("/admin/share/delete",{id:X}).then((function(e){ne(),le("top","right","\u5206\u4eab\u5df2\u5220\u9664","success")})).catch((function(e){le("top","right",e.message,"error")})).then((function(){te(!1)}))},disabled:ae,"aria-label":"delete"},l.a.createElement(Fa.a,null)))),l.a.createElement(bt.a,{className:e.container},l.a.createElement(Pa.a,{"aria-label":"sticky table",size:"small"},l.a.createElement(wa.a,null,l.a.createElement(Da.a,{style:{height:52}},l.a.createElement(za.a,{padding:"checkbox"},l.a.createElement(Bn.a,{indeterminate:X.length>0&&X.length<c.length,checked:c.length>0&&X.length===c.length,onChange:function(e){if(e.target.checked){var a=c.map((function(e){return e.ID}));V(a)}else V([])},inputProps:{"aria-label":"select all desserts"}})),l.a.createElement(za.a,{style:{minWidth:10}},l.a.createElement(Mn.a,{active:"id"===B[0],direction:B[1],onClick:function(){return M(["id","asc"===B[1]?"desc":"asc"])}},"#","id"===B[0]?l.a.createElement("span",{className:e.visuallyHidden},"desc"===B[1]?"sorted descending":"sorted ascending"):null)),l.a.createElement(za.a,{style:{minWidth:200}},l.a.createElement(Mn.a,{active:"source_name"===B[0],direction:B[1],onClick:function(){return M(["source_name","asc"===B[1]?"desc":"asc"])}},"\u5bf9\u8c61\u540d","source_name"===B[0]?l.a.createElement("span",{className:e.visuallyHidden},"desc"===B[1]?"sorted descending":"sorted ascending"):null)),l.a.createElement(za.a,{style:{minWidth:70}},"\u7c7b\u578b"),l.a.createElement(za.a,{style:{minWidth:100},align:"right"},l.a.createElement(Mn.a,{active:"views"===B[0],direction:B[1],onClick:function(){return M(["views","asc"===B[1]?"desc":"asc"])}},"\u6d4f\u89c8","views"===B[0]?l.a.createElement("span",{className:e.visuallyHidden},"desc"===B[1]?"sorted descending":"sorted ascending"):null)),l.a.createElement(za.a,{style:{minWidth:100},align:"right"},l.a.createElement(Mn.a,{active:"downloads"===B[0],direction:B[1],onClick:function(){return M(["downloads","asc"===B[1]?"desc":"asc"])}},"\u4e0b\u8f7d","downloads"===B[0]?l.a.createElement("span",{className:e.visuallyHidden},"desc"===B[1]?"sorted descending":"sorted ascending"):null)),l.a.createElement(za.a,{style:{minWidth:100},align:"right"},l.a.createElement(Mn.a,{active:"score"===B[0],direction:B[1],onClick:function(){return M(["score","asc"===B[1]?"desc":"asc"])}},"\u79ef\u5206","score"===B[0]?l.a.createElement("span",{className:e.visuallyHidden},"desc"===B[1]?"sorted descending":"sorted ascending"):null)),l.a.createElement(za.a,{style:{minWidth:120}},"\u81ea\u52a8\u8fc7\u671f"),l.a.createElement(za.a,{style:{minWidth:120}},"\u5206\u4eab\u8005"),l.a.createElement(za.a,{style:{minWidth:150}},"\u5206\u4eab\u4e8e"),l.a.createElement(za.a,{style:{minWidth:100}},"\u64cd\u4f5c"))),l.a.createElement(Wa.a,null,c.map((function(e){return l.a.createElement(Da.a,{hover:!0,key:e.ID,role:"checkbox",selected:ce(e.ID)},l.a.createElement(za.a,{padding:"checkbox"},l.a.createElement(Bn.a,{onClick:function(a){return function(e,a){var t=X.indexOf(a),n=[];-1===t?n=n.concat(X,a):0===t?n=n.concat(X.slice(1)):t===X.length-1?n=n.concat(X.slice(0,-1)):t>0&&(n=n.concat(X.slice(0,t),X.slice(t+1))),V(n)}(0,e.ID)},checked:ce(e.ID)})),l.a.createElement(za.a,null,e.ID),l.a.createElement(za.a,{style:{wordBreak:"break-all"}},l.a.createElement(ja.a,{target:"_blank",color:"inherit",href:"/#/s/"+W[e.ID]+(""===e.Password?"":"?password="+e.Password)},e.SourceName)),l.a.createElement(za.a,null,""===e.Password?"\u516c\u5f00":"\u79c1\u5bc6"),l.a.createElement(za.a,{align:"right"},e.Views),l.a.createElement(za.a,{align:"right"},e.Downloads),l.a.createElement(za.a,{align:"right"},e.Score),l.a.createElement(za.a,null,e.RemainDownloads>-1&&e.RemainDownloads+" \u6b21\u4e0b\u8f7d\u540e",-1===e.RemainDownloads&&"\u65e0"),l.a.createElement(za.a,null,l.a.createElement(ja.a,{href:"/#/admin/user/edit/"+e.UserID},w[e.UserID]?w[e.UserID].Nick:"\u672a\u77e5")),l.a.createElement(za.a,null,new Date(e.CreatedAt).toLocaleDateString()+" "+new Date(e.CreatedAt).toLocaleTimeString()),l.a.createElement(za.a,null,l.a.createElement(kt.a,{title:"\u5220\u9664"},l.a.createElement(g.a,{disabled:ae,onClick:function(){return a=e.ID,te(!0),void Oe.b.post("/admin/share/delete",{id:[a]}).then((function(e){ne(),le("top","right","\u5206\u4eab\u5df2\u5220\u9664","success")})).catch((function(e){le("top","right",e.message,"error")})).then((function(){te(!1)}));var a},size:"small"},l.a.createElement(Fa.a,null)))))}))))),l.a.createElement(ht.a,{rowsPerPageOptions:[10,25,50,100],component:"div",count:y,rowsPerPage:E,page:s-1,onChangePage:function(e,a){return u(a+1)},onChangeRowsPerPage:function(e){f(e.target.value),u(1)}})))}var or=Object(c.a)((function(e){var a;return{root:(a={},Object(m.a)(a,e.breakpoints.up("md"),{marginLeft:100}),Object(m.a)(a,"marginBottom",40),a),content:{padding:e.spacing(2)},container:{overflowX:"auto"},tableContainer:{marginTop:16},header:{display:"flex",justifyContent:"space-between"},headerRight:{},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(u.e)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function mr(){var e=or(),a=Object(r.useState)([]),t=Object(n.a)(a,2),c=t[0],i=t[1],o=Object(r.useState)(1),m=Object(n.a)(o,2),s=m[0],u=m[1],p=Object(r.useState)(10),d=Object(n.a)(p,2),E=d[0],f=d[1],v=Object(r.useState)(0),O=Object(n.a)(v,2),y=O[0],N=O[1],C=Object(r.useState)({}),j=Object(n.a)(C,2),S=j[0],k=j[1],_=Object(r.useState)({}),x=Object(n.a)(_,2),w=x[0],P=x[1],D=Object(r.useState)({}),z=Object(n.a)(D,2),W=z[0],F=z[1],I=Object(r.useState)(["id","desc"]),q=Object(n.a)(I,2),R=q[0],L=q[1],T=Object(r.useState)(!1),A=Object(n.a)(T,2),B=A[0],M=A[1],U=Object(r.useState)([]),K=Object(n.a)(U,2),H=K[0],J=K[1],G=Object(r.useState)(!1),Q=Object(n.a)(G,2),X=Q[0],V=Q[1];Object(r.useEffect)((function(){Y()}),[s,E,R,S,W]);var Y=function(){Oe.b.post("/admin/order/list",{page:s,page_size:E,order_by:R.join(" "),conditions:S,searches:W}).then((function(e){P(e.data.users),i(e.data.items),N(e.data.total),J([])})).catch((function(e){ae("top","right",e.message,"error")}))},$=Object(Z.c)(),ae=Object(r.useCallback)((function(e,a,t,n){return $(Object(ee.P)(e,a,t,n))}),[$]),te=function(e){return-1!==H.indexOf(e)};return l.a.createElement("div",null,l.a.createElement(lr,{filter:S,open:B,onClose:function(){return M(!1)},setSearch:F,setFilter:k}),l.a.createElement("div",{className:e.header},l.a.createElement("div",{className:e.headerRight},l.a.createElement(Ke.a,{color:"primary",onClick:function(){return Y()},variant:"outlined"},"\u5237\u65b0"))),l.a.createElement(fe.a,{square:!0,className:e.tableContainer},H.length>0&&l.a.createElement(b.a,{className:e.highlight},l.a.createElement(h.a,{style:{flex:"1 1 100%"},color:"inherit",variant:"subtitle1"},"\u5df2\u9009\u62e9 ",H.length," \u4e2a\u5bf9\u8c61"),l.a.createElement(kt.a,{title:"\u5220\u9664"},l.a.createElement(g.a,{onClick:function(e){V(!0),Oe.b.post("/admin/order/delete",{id:H}).then((function(e){Y(),ae("top","right","\u8ba2\u5355\u8bb0\u5f55\u5df2\u5220\u9664","success")})).catch((function(e){ae("top","right",e.message,"error")})).then((function(){V(!1)}))},disabled:X,"aria-label":"delete"},l.a.createElement(Fa.a,null)))),l.a.createElement(bt.a,{className:e.container},l.a.createElement(Pa.a,{"aria-label":"sticky table",size:"small"},l.a.createElement(wa.a,null,l.a.createElement(Da.a,{style:{height:52}},l.a.createElement(za.a,{padding:"checkbox"},l.a.createElement(Bn.a,{indeterminate:H.length>0&&H.length<c.length,checked:c.length>0&&H.length===c.length,onChange:function(e){if(e.target.checked){var a=c.map((function(e){return e.ID}));J(a)}else J([])},inputProps:{"aria-label":"select all desserts"}})),l.a.createElement(za.a,{style:{minWidth:10}},l.a.createElement(Mn.a,{active:"id"===R[0],direction:R[1],onClick:function(){return L(["id","asc"===R[1]?"desc":"asc"])}},"#","id"===R[0]?l.a.createElement("span",{className:e.visuallyHidden},"desc"===R[1]?"sorted descending":"sorted ascending"):null)),l.a.createElement(za.a,{style:{minWidth:130}},"\u8ba2\u5355\u540d"),l.a.createElement(za.a,{style:{minWidth:90}},"\u5546\u54c1"),l.a.createElement(za.a,{style:{minWidth:80}},l.a.createElement(Mn.a,{active:"order_no"===R[0],direction:R[1],onClick:function(){return L(["order_no","asc"===R[1]?"desc":"asc"])}},"\u8ba2\u5355\u53f7","order_no"===R[0]?l.a.createElement("span",{className:e.visuallyHidden},"desc"===R[1]?"sorted descending":"sorted ascending"):null)),l.a.createElement(za.a,{style:{minWidth:100},align:"right"},"\u5355\u4ef7"),l.a.createElement(za.a,{style:{minWidth:80},align:"right"},"\u6570\u91cf"),l.a.createElement(za.a,{style:{minWidth:100}},"\u72b6\u6001"),l.a.createElement(za.a,{style:{minWidth:80}},"\u652f\u4ed8\u65b9\u5f0f"),l.a.createElement(za.a,{style:{minWidth:100}},"\u521b\u5efa\u8005"),l.a.createElement(za.a,{style:{minWidth:150}},"\u521b\u5efa\u4e8e"),l.a.createElement(za.a,{style:{minWidth:80}},"\u64cd\u4f5c"))),l.a.createElement(Wa.a,null,c.map((function(e){return l.a.createElement(Da.a,{hover:!0,key:e.ID,role:"checkbox",selected:te(e.ID)},l.a.createElement(za.a,{padding:"checkbox"},l.a.createElement(Bn.a,{onClick:function(a){return function(e,a){var t=H.indexOf(a),n=[];-1===t?n=n.concat(H,a):0===t?n=n.concat(H.slice(1)):t===H.length-1?n=n.concat(H.slice(0,-1)):t>0&&(n=n.concat(H.slice(0,t),H.slice(t+1))),J(n)}(0,e.ID)},checked:te(e.ID)})),l.a.createElement(za.a,null,e.ID),l.a.createElement(za.a,null,e.Name),l.a.createElement(za.a,null,0===e.Type&&"\u5bb9\u91cf\u5305",1===e.Type&&"\u7528\u6237\u7ec4",2===e.Type&&"\u79ef\u5206"),l.a.createElement(za.a,null,e.OrderNo),l.a.createElement(za.a,{align:"right"},"score"===e.Method&&e.Price,"score"!==e.Method&&l.a.createElement(l.a.Fragment,null,"\uffe5",(e.Price/100).toFixed(2))),l.a.createElement(za.a,{align:"right"},e.Num),l.a.createElement(za.a,null,0===e.Status&&"\u672a\u652f\u4ed8",1===e.Status&&"\u5df2\u652f\u4ed8"),l.a.createElement(za.a,null,"score"===e.Method&&"\u79ef\u5206","alipay"===e.Method&&"\u652f\u4ed8\u5b9d","payjs"===e.Method&&"PayJS"),l.a.createElement(za.a,null,l.a.createElement(ja.a,{href:"/#/admin/user/edit/"+e.UserID},w[e.UserID]?w[e.UserID].Nick:"\u672a\u77e5")),l.a.createElement(za.a,null,new Date(e.CreatedAt).toLocaleDateString()+" "+new Date(e.CreatedAt).toLocaleTimeString()),l.a.createElement(za.a,null,l.a.createElement(kt.a,{title:"\u5220\u9664"},l.a.createElement(g.a,{disabled:X,onClick:function(){return a=e.ID,V(!0),void Oe.b.post("/admin/order/delete",{id:[a]}).then((function(e){Y(),ae("top","right","\u8ba2\u5355\u8bb0\u5f55\u5df2\u5220\u9664","success")})).catch((function(e){ae("top","right",e.message,"error")})).then((function(){V(!1)}));var a},size:"small"},l.a.createElement(Fa.a,null)))))}))))),l.a.createElement(ht.a,{rowsPerPageOptions:[10,25,50,100],component:"div",count:y,rowsPerPage:E,page:s-1,onChangePage:function(e,a){return u(a+1)},onChangeRowsPerPage:function(e){f(e.target.value),u(1)}})))}var sr=Object(c.a)((function(e){var a;return{root:(a={},Object(m.a)(a,e.breakpoints.up("md"),{marginLeft:100}),Object(m.a)(a,"marginBottom",40),a),content:{padding:e.spacing(2)},container:{overflowX:"auto"},tableContainer:{marginTop:16},header:{display:"flex",justifyContent:"space-between"},headerRight:{},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(u.e)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function ur(){var e=sr(),a=Object(r.useState)([]),t=Object(n.a)(a,2),c=t[0],i=t[1],o=Object(r.useState)(1),m=Object(n.a)(o,2),s=m[0],u=m[1],p=Object(r.useState)(10),d=Object(n.a)(p,2),E=d[0],f=d[1],v=Object(r.useState)(0),O=Object(n.a)(v,2),y=O[0],N=O[1],C=Object(r.useState)({}),j=Object(n.a)(C,2),S=j[0],k=j[1],_=Object(r.useState)({}),x=Object(n.a)(_,2),w=x[0],P=x[1],D=Object(r.useState)({}),z=Object(n.a)(D,2),W=z[0],F=z[1],I=Object(r.useState)(["id","desc"]),q=Object(n.a)(I,2),R=q[0],L=q[1],T=Object(r.useState)(!1),A=Object(n.a)(T,2),B=A[0],M=A[1],U=Object(r.useState)([]),K=Object(n.a)(U,2),H=K[0],J=K[1],G=Object(r.useState)(!1),Q=Object(n.a)(G,2),X=Q[0],V=Q[1];Object(r.useEffect)((function(){Y()}),[s,E,R,S,W]);var Y=function(){Oe.b.post("/admin/download/list",{page:s,page_size:E,order_by:R.join(" "),conditions:S,searches:W}).then((function(e){P(e.data.users),i(e.data.items),N(e.data.total),J([])})).catch((function(e){ae("top","right",e.message,"error")}))},$=Object(Z.c)(),ae=Object(r.useCallback)((function(e,a,t,n){return $(Object(ee.P)(e,a,t,n))}),[$]),te=function(e){return-1!==H.indexOf(e)};return l.a.createElement("div",null,l.a.createElement(lr,{filter:S,open:B,onClose:function(){return M(!1)},setSearch:F,setFilter:k}),l.a.createElement("div",{className:e.header},l.a.createElement("div",{className:e.headerRight},l.a.createElement(Ke.a,{color:"primary",onClick:function(){return Y()},variant:"outlined"},"\u5237\u65b0"))),l.a.createElement(fe.a,{square:!0,className:e.tableContainer},H.length>0&&l.a.createElement(b.a,{className:e.highlight},l.a.createElement(h.a,{style:{flex:"1 1 100%"},color:"inherit",variant:"subtitle1"},"\u5df2\u9009\u62e9 ",H.length," \u4e2a\u5bf9\u8c61"),l.a.createElement(kt.a,{title:"\u5220\u9664"},l.a.createElement(g.a,{onClick:function(e){V(!0),Oe.b.post("/admin/download/delete",{id:H}).then((function(e){Y(),ae("top","right","\u4efb\u52a1\u5df2\u5220\u9664","success")})).catch((function(e){ae("top","right",e.message,"error")})).then((function(){V(!1)}))},disabled:X,"aria-label":"delete"},l.a.createElement(Fa.a,null)))),l.a.createElement(bt.a,{className:e.container},l.a.createElement(Pa.a,{"aria-label":"sticky table",size:"small"},l.a.createElement(wa.a,null,l.a.createElement(Da.a,{style:{height:52}},l.a.createElement(za.a,{padding:"checkbox"},l.a.createElement(Bn.a,{indeterminate:H.length>0&&H.length<c.length,checked:c.length>0&&H.length===c.length,onChange:function(e){if(e.target.checked){var a=c.map((function(e){return e.ID}));J(a)}else J([])},inputProps:{"aria-label":"select all desserts"}})),l.a.createElement(za.a,{style:{minWidth:10}},l.a.createElement(Mn.a,{active:"id"===R[0],direction:R[1],onClick:function(){return L(["id","asc"===R[1]?"desc":"asc"])}},"#","id"===R[0]?l.a.createElement("span",{className:e.visuallyHidden},"desc"===R[1]?"sorted descending":"sorted ascending"):null)),l.a.createElement(za.a,{style:{minWidth:130}},"\u6e90\u5730\u5740"),l.a.createElement(za.a,{style:{minWidth:90}},"\u72b6\u6001"),l.a.createElement(za.a,{style:{minWidth:150},align:"right"},l.a.createElement(Mn.a,{active:"total_size"===R[0],direction:R[1],onClick:function(){return L(["total_size","asc"===R[1]?"desc":"asc"])}},"\u5927\u5c0f","total_size"===R[0]?l.a.createElement("span",{className:e.visuallyHidden},"desc"===R[1]?"sorted descending":"sorted ascending"):null)),l.a.createElement(za.a,{style:{minWidth:100}},"\u521b\u5efa\u8005"),l.a.createElement(za.a,{style:{minWidth:150}},"\u521b\u5efa\u4e8e"),l.a.createElement(za.a,{style:{minWidth:80}},"\u64cd\u4f5c"))),l.a.createElement(Wa.a,null,c.map((function(e){return l.a.createElement(Da.a,{hover:!0,key:e.ID,role:"checkbox",selected:te(e.ID)},l.a.createElement(za.a,{padding:"checkbox"},l.a.createElement(Bn.a,{onClick:function(a){return function(e,a){var t=H.indexOf(a),n=[];-1===t?n=n.concat(H,a):0===t?n=n.concat(H.slice(1)):t===H.length-1?n=n.concat(H.slice(0,-1)):t>0&&(n=n.concat(H.slice(0,t),H.slice(t+1))),J(n)}(0,e.ID)},checked:te(e.ID)})),l.a.createElement(za.a,null,e.ID),l.a.createElement(za.a,{style:{wordBreak:"break-all"}},e.Source),l.a.createElement(za.a,null,0===e.Status&&"\u5c31\u7eea",1===e.Status&&"\u4e0b\u8f7d\u4e2d",2===e.Status&&"\u6682\u505c\u4e2d",3===e.Status&&"\u51fa\u9519",4===e.Status&&"\u5b8c\u6210",5===e.Status&&"\u53d6\u6d88/\u505c\u6b62",6===e.Status&&"\u672a\u77e5"),l.a.createElement(za.a,{align:"right"},Object(Ia.q)(e.TotalSize)),l.a.createElement(za.a,null,l.a.createElement(ja.a,{href:"/#/admin/user/edit/"+e.UserID},w[e.UserID]?w[e.UserID].Nick:"\u672a\u77e5")),l.a.createElement(za.a,null,new Date(e.CreatedAt).toLocaleDateString()+" "+new Date(e.CreatedAt).toLocaleTimeString()),l.a.createElement(za.a,null,l.a.createElement(kt.a,{title:"\u5220\u9664"},l.a.createElement(g.a,{disabled:X,onClick:function(){return a=e.ID,V(!0),void Oe.b.post("/admin/download/delete",{id:[a]}).then((function(e){Y(),ae("top","right","\u4efb\u52a1\u5df2\u5220\u9664","success")})).catch((function(e){ae("top","right",e.message,"error")})).then((function(){V(!1)}));var a},size:"small"},l.a.createElement(Fa.a,null)))))}))))),l.a.createElement(ht.a,{rowsPerPageOptions:[10,25,50,100],component:"div",count:y,rowsPerPage:E,page:s-1,onChangePage:function(e,a){return u(a+1)},onChangeRowsPerPage:function(e){f(e.target.value),u(1)}})))}var pr=Object(c.a)((function(e){var a;return{root:(a={},Object(m.a)(a,e.breakpoints.up("md"),{marginLeft:100}),Object(m.a)(a,"marginBottom",40),a),content:{padding:e.spacing(2)},container:{overflowX:"auto"},tableContainer:{marginTop:16},header:{display:"flex",justifyContent:"space-between"},headerRight:{},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(u.e)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function dr(){var e=pr(),a=Object(r.useState)([]),t=Object(n.a)(a,2),c=t[0],i=t[1],o=Object(r.useState)(1),m=Object(n.a)(o,2),s=m[0],u=m[1],p=Object(r.useState)(10),d=Object(n.a)(p,2),E=d[0],f=d[1],v=Object(r.useState)(0),O=Object(n.a)(v,2),y=O[0],N=O[1],C=Object(r.useState)({}),j=Object(n.a)(C,2),S=j[0],k=j[1],_=Object(r.useState)({}),x=Object(n.a)(_,2),w=x[0],P=x[1],D=Object(r.useState)({}),z=Object(n.a)(D,2),W=z[0],F=z[1],I=Object(r.useState)(["id","desc"]),q=Object(n.a)(I,2),R=q[0],L=q[1],T=Object(r.useState)(!1),A=Object(n.a)(T,2),B=A[0],M=A[1],U=Object(r.useState)([]),K=Object(n.a)(U,2),H=K[0],J=K[1],G=Object(r.useState)(!1),Q=Object(n.a)(G,2),X=Q[0],V=Q[1];Object(r.useEffect)((function(){Y()}),[s,E,R,S,W]);var Y=function(){Oe.b.post("/admin/task/list",{page:s,page_size:E,order_by:R.join(" "),conditions:S,searches:W}).then((function(e){P(e.data.users),i(e.data.items),N(e.data.total),J([])})).catch((function(e){ae("top","right",e.message,"error")}))},$=Object(Z.c)(),ae=Object(r.useCallback)((function(e,a,t,n){return $(Object(ee.P)(e,a,t,n))}),[$]),te=function(e){return-1!==H.indexOf(e)};return l.a.createElement("div",null,l.a.createElement(lr,{filter:S,open:B,onClose:function(){return M(!1)},setSearch:F,setFilter:k}),l.a.createElement("div",{className:e.header},l.a.createElement("div",{className:e.headerRight},l.a.createElement(Ke.a,{color:"primary",onClick:function(){return Y()},variant:"outlined"},"\u5237\u65b0"))),l.a.createElement(fe.a,{square:!0,className:e.tableContainer},H.length>0&&l.a.createElement(b.a,{className:e.highlight},l.a.createElement(h.a,{style:{flex:"1 1 100%"},color:"inherit",variant:"subtitle1"},"\u5df2\u9009\u62e9 ",H.length," \u4e2a\u5bf9\u8c61"),l.a.createElement(kt.a,{title:"\u5220\u9664"},l.a.createElement(g.a,{onClick:function(e){V(!0),Oe.b.post("/admin/task/delete",{id:H}).then((function(e){Y(),ae("top","right","\u4efb\u52a1\u5df2\u5220\u9664","success")})).catch((function(e){ae("top","right",e.message,"error")})).then((function(){V(!1)}))},disabled:X,"aria-label":"delete"},l.a.createElement(Fa.a,null)))),l.a.createElement(bt.a,{className:e.container},l.a.createElement(Pa.a,{"aria-label":"sticky table",size:"small"},l.a.createElement(wa.a,null,l.a.createElement(Da.a,{style:{height:52}},l.a.createElement(za.a,{padding:"checkbox"},l.a.createElement(Bn.a,{indeterminate:H.length>0&&H.length<c.length,checked:c.length>0&&H.length===c.length,onChange:function(e){if(e.target.checked){var a=c.map((function(e){return e.ID}));J(a)}else J([])},inputProps:{"aria-label":"select all desserts"}})),l.a.createElement(za.a,{style:{minWidth:10}},l.a.createElement(Mn.a,{active:"id"===R[0],direction:R[1],onClick:function(){return L(["id","asc"===R[1]?"desc":"asc"])}},"#","id"===R[0]?l.a.createElement("span",{className:e.visuallyHidden},"desc"===R[1]?"sorted descending":"sorted ascending"):null)),l.a.createElement(za.a,{style:{minWidth:130}},"\u7c7b\u578b"),l.a.createElement(za.a,{style:{minWidth:90}},"\u72b6\u6001"),l.a.createElement(za.a,{style:{minWidth:90}},"\u6700\u540e\u8fdb\u5ea6"),l.a.createElement(za.a,{style:{minWidth:150}},"\u9519\u8bef\u4fe1\u606f"),l.a.createElement(za.a,{style:{minWidth:100}},"\u521b\u5efa\u8005"),l.a.createElement(za.a,{style:{minWidth:150}},"\u521b\u5efa\u4e8e"),l.a.createElement(za.a,{style:{minWidth:80}},"\u64cd\u4f5c"))),l.a.createElement(Wa.a,null,c.map((function(a){return l.a.createElement(Da.a,{hover:!0,key:a.ID,role:"checkbox",selected:te(a.ID)},l.a.createElement(za.a,{padding:"checkbox"},l.a.createElement(Bn.a,{onClick:function(e){return function(e,a){var t=H.indexOf(a),n=[];-1===t?n=n.concat(H,a):0===t?n=n.concat(H.slice(1)):t===H.length-1?n=n.concat(H.slice(0,-1)):t>0&&(n=n.concat(H.slice(0,t),H.slice(t+1))),J(n)}(0,a.ID)},checked:te(a.ID)})),l.a.createElement(za.a,null,a.ID),l.a.createElement(za.a,{style:{wordBreak:"break-all"}},Object(ft.c)(a.Type)),l.a.createElement(za.a,null,Object(ft.b)(a.Status)),l.a.createElement(za.a,null,Object(ft.a)(a.Type,a.Progress)),l.a.createElement(za.a,{className:e.noWrap},function(e){if(""===e)return"-";try{return JSON.parse(e).msg}catch(a){return"\u672a\u77e5"}}(a.Error)),l.a.createElement(za.a,null,l.a.createElement(ja.a,{href:"/#/admin/user/edit/"+a.UserID},w[a.UserID]?w[a.UserID].Nick:"\u672a\u77e5")),l.a.createElement(za.a,null,new Date(a.CreatedAt).toLocaleDateString()+" "+new Date(a.CreatedAt).toLocaleTimeString()),l.a.createElement(za.a,null,l.a.createElement(kt.a,{title:"\u5220\u9664"},l.a.createElement(g.a,{disabled:X,onClick:function(){return e=a.ID,V(!0),void Oe.b.post("/admin/task/delete",{id:[e]}).then((function(e){Y(),ae("top","right","\u4efb\u52a1\u5df2\u5220\u9664","success")})).catch((function(e){ae("top","right",e.message,"error")})).then((function(){V(!1)}));var e},size:"small"},l.a.createElement(Fa.a,null)))))}))))),l.a.createElement(ht.a,{rowsPerPageOptions:[10,25,50,100],component:"div",count:y,rowsPerPage:E,page:s-1,onChangePage:function(e,a){return u(a+1)},onChangeRowsPerPage:function(e){f(e.target.value),u(1)}})))}t.d(a,"default",(function(){return fr}));var Er=Object(c.a)((function(e){return{root:{display:"flex"},content:{flexGrow:1,padding:0,minWidth:0},toolbar:e.mixins.toolbar}})),br=de()({palette:{background:{}}},Ee.a);function fr(){var e=Er(),a=Object($.g)(),t=Object(r.useState)(!1),c=Object(n.a)(t,2),m=c[0],s=c[1];return Object(r.useEffect)((function(){var e=se.a.GetUser();if(e&&e.group)return 1!==e.group.id?void a.push("/home"):void s(!0);a.push("/login")}),[]),l.a.createElement(l.a.Fragment,null,l.a.createElement(ue.a,{theme:br},l.a.createElement("div",{className:e.root},l.a.createElement(i.a,null),l.a.createElement(o.a,null),m&&l.a.createElement(me,{content:function(e){return l.a.createElement($.d,null,l.a.createElement($.b,{path:"".concat(e,"/home"),exact:!0},l.a.createElement(Je,null)),l.a.createElement($.b,{path:"".concat(e,"/basic")},l.a.createElement(aa,null)),l.a.createElement($.b,{path:"".concat(e,"/access")},l.a.createElement(sa,null)),l.a.createElement($.b,{path:"".concat(e,"/mail")},l.a.createElement(Ea,null)),l.a.createElement($.b,{path:"".concat(e,"/upload")},l.a.createElement(ya,null)),l.a.createElement($.b,{path:"".concat(e,"/vas")},l.a.createElement(Xa,null)),l.a.createElement($.b,{path:"".concat(e,"/theme")},l.a.createElement(ot,null)),l.a.createElement($.b,{path:"".concat(e,"/aria2")},l.a.createElement(ut,null)),l.a.createElement($.b,{path:"".concat(e,"/image")},l.a.createElement(Et,null)),l.a.createElement($.b,{path:"".concat(e,"/policy"),exact:!0},l.a.createElement(Pt,null)),l.a.createElement($.b,{path:"".concat(e,"/policy/add/:type"),exact:!0},l.a.createElement(Cn,null)),l.a.createElement($.b,{path:"".concat(e,"/policy/edit/:mode/:id"),exact:!0},l.a.createElement(wn,null)),l.a.createElement($.b,{path:"".concat(e,"/group"),exact:!0},l.a.createElement(zn,null)),l.a.createElement($.b,{path:"".concat(e,"/group/add"),exact:!0},l.a.createElement(Rn,null)),l.a.createElement($.b,{path:"".concat(e,"/group/edit/:id"),exact:!0},l.a.createElement(Ln,null)),l.a.createElement($.b,{path:"".concat(e,"/user"),exact:!0},l.a.createElement(Qn,null)),l.a.createElement($.b,{path:"".concat(e,"/user/add"),exact:!0},l.a.createElement($n,null)),l.a.createElement($.b,{path:"".concat(e,"/user/edit/:id"),exact:!0},l.a.createElement(Zn,null)),l.a.createElement($.b,{path:"".concat(e,"/file"),exact:!0},l.a.createElement(nr,null)),l.a.createElement($.b,{path:"".concat(e,"/share"),exact:!0},l.a.createElement(ir,null)),l.a.createElement($.b,{path:"".concat(e,"/order"),exact:!0},l.a.createElement(mr,null)),l.a.createElement($.b,{path:"".concat(e,"/download"),exact:!0},l.a.createElement(ur,null)),l.a.createElement($.b,{path:"".concat(e,"/task"),exact:!0},l.a.createElement(dr,null)))}}))))}}}]);
//# sourceMappingURL=6.68cc5fe1.chunk.js.map